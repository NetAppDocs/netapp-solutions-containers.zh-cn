<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="e80842c9211bc376ee42d583c70ae408" category="doc">NetApp平台</block>
  <block id="932ba7da1da9b241bfc5ddbb10e49da2" category="paragraph">企业越来越多地采用 DevOps 实践来创建新产品、缩短发布周期并快速添加新功能。由于其固有的敏捷特性，容器和微服务在支持 DevOps 实践方面发挥着至关重要的作用。然而，在企业环境中以生产规模实践 DevOps 也面临着自身的挑战，并对底层基础设施提出了一定的要求，例如：</block>
  <block id="43ee156205e7f74e32a02d556537fe90" category="list-text">堆栈中所有层的高可用性</block>
  <block id="b59807af538b77fee1fb3d1d3c81f9a8" category="list-text">简化部署程序</block>
  <block id="2748d7182409b378e23f62724be778fd" category="list-text">无中断运行和升级</block>
  <block id="1a4af279491c72d7c36b4c9767ae712f" category="list-text">API 驱动和可编程的基础设施，以跟上微服务的敏捷性</block>
  <block id="0cdff7d38ef496f6b5510c5034fedf15" category="list-text">具有性能保证的多租户</block>
  <block id="c67346d734cf1873532bdc9f9a1421da" category="list-text">能够同时运行虚拟化和容器化工作负载</block>
  <block id="71d00a17a6d603b0b4ebb168354950db" category="list-text">根据工作负载需求独立扩展基础设施的能力</block>
  <block id="2b8932b35916e8cecb6216546111322e" category="paragraph">Red Hat OpenShift Container Platform 是一个完全支持的企业级 Kubernetes 平台。  Red Hat 对开源 Kubernetes 进行了多项改进，以提供一个完全集成所有组件的应用程序平台，用于构建、部署和管理容器化应用程序。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link">此处</block>
  <block id="73677e8d319e77c91f647e668e868ecb" category="paragraph">欲了解更多信息，请访问 OpenShift 网站<block ref="35d5a627a33ce17e4bd125258d59fbc4" category="inline-link-rx"></block>。</block>
  <block id="660d073f0987fac312dc40bd5dc868bd" category="paragraph">NetApp拥有多种非常适合企业数据中心和混合云部署的存储系统。  NetApp产品组合包括NetApp ONTAP、 NetApp Element和NetApp e-Series 存储系统，所有这些系统都可以为容器化应用程序提供持久存储。</block>
  <block id="f582083d849d313b57029bcb7e14f0b5" category="paragraph">如需了解更多信息，请访问NetApp网站<block ref="95da63d781dead5af723667a3f69096a" category="inline-link-rx"></block>。</block>
  <block id="52793fa37eb7686ddfd1adbb418ea88b" category="paragraph">Trident是一个开源且完全支持的存储编排器，适用于容器和 Kubernetes 发行版（如 {k8s_distribution_name}）。</block>
  <block id="674132e161f2169b0ec0b4ccbd09312c" category="paragraph">欲了解更多信息，请访问Trident网站<block ref="845024b96ab150d9f628b33995c60669" category="inline-link-rx"></block>。</block>
  <block id="367ed9b12ca74138f4b935c22d3372f4" category="paragraph">NetApp拥有多个符合Trident的存储平台，可以为容器化应用程序配置、保护和管理数据。</block>
  <block id="5e8f0f670e38fbdf628b0883f946934f" category="inline-image-macro">该图显示输入/输出对话框或表示书面内容</block>
  <block id="794b7480b9144c16979c06a95be8a070" category="paragraph"><block ref="794b7480b9144c16979c06a95be8a070" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50bc4bb14f0d89a22c593112574d0fb3" category="list-text">AFF和FAS系统运行NetApp ONTAP并为基于文件 (NFS) 和基于块 (iSCSI) 的用例提供存储。</block>
  <block id="bf3bfadca5040d5a50a8703c7dbb7ef1" category="list-text">Cloud Volumes ONTAP和ONTAP Select分别在云和虚拟空间中提供相同的优势。</block>
  <block id="63617ca0b43f2c1f725b03637e6647cf" category="list-text">Google Cloud NetApp Volumes （AWS/GCP）和Azure NetApp Files在云中提供基于文件的存储。</block>
  <block id="1268e1be2d69bcbe60fed1b018c4c7be" category="list-text">NetApp Element存储系统涵盖高度可扩展环境中的基于块的（iSCSI）用例。</block>
  <block id="c64f419c58469b610f6840042d2d188c" category="admonition">NetApp产品组合中的每个存储系统都可以简化数据管理和内部站点与云之间的移动，以便您的数据位于您的应用程序所在的位置。</block>
  <block id="8d866fd138999801041cd8ebf044c39f" category="paragraph">以下页面包含有关在 {solution_name} 解决方案中验证的NetApp存储系统的更多信息：</block>
  <block id="7b02ea300aef2e0bff0d7f6111053284" category="inline-link-macro">NetApp ONTAP</block>
  <block id="31190025c7f2a3470ada77c7c360ad75" category="list-text"><block ref="31190025c7f2a3470ada77c7c360ad75" category="inline-link-macro-rx"></block></block>
  <block id="fcda5b98e8c212807dc088477e802757" category="inline-link-macro">NetApp Element</block>
  <block id="15155104ed4dffb0c6f48a716c490eb6" category="list-text"><block ref="15155104ed4dffb0c6f48a716c490eb6" category="inline-link-macro-rx"></block></block>
  <block id="9d312703c40c2d87b835076063682d59" category="paragraph">NetApp ONTAP是一款功能强大的存储软件工具，具有直观的 GUI、具有自动化集成的 REST API、基于 AI 的预测分析和纠正措施、无中断硬件升级以及跨存储导入等功能。</block>
  <block id="48235fec2427a785c4a09d7150fc11fc" category="inline-link">NetApp ONTAP网站</block>
  <block id="e65027864c84a42fc0799d878ffa0005" category="paragraph">有关NetApp ONTAP存储系统的更多信息，请访问<block ref="be9464a7a83e639a645a801fff2791d9" category="inline-link-rx"></block>。</block>
  <block id="3716516b242be48f15f8cbce6557a296" category="paragraph">ONTAP提供以下功能：</block>
  <block id="3e23168685787e9deffccb3bdb29d98a" category="list-text">一个统一的存储系统，可同时访问和管理 NFS、CIFS、iSCSI、FC、FCoE 和 FC-NVMe 协议的数据。</block>
  <block id="11927aa24f71bc959d85115c8dd8c3a9" category="list-text">不同的部署模型包括全闪存、混合和全 HDD 硬件配置上的本地部署；受支持的虚拟机管理程序（如ONTAP Select）上的基于 VM 的存储平台；以及在云中的Cloud Volumes ONTAP。</block>
  <block id="65c42edcb28a34e276f92dd9b2172613" category="list-text">通过支持自动数据分层、内联数据压缩、重复数据删除和压缩，提高了ONTAP系统上的数据存储效率。</block>
  <block id="f0a8a62c8d7ea4d12a7f1c95b40d3cb3" category="list-text">基于工作负载、QoS 控制的存储。</block>
  <block id="8bd43c9f55116966ac61fd08aa3cd4bf" category="list-text">与公共云无缝集成，实现数据分层和保护。  ONTAP还提供强大的数据保护功能，使其在任何环境中都脱颖而出：</block>
  <block id="613db5a747bd15eeccbcbedce5bd8888" category="list-text">* NetApp Snapshot 副本。*使用最少的磁盘空间快速进行时间点数据备份，且不产生额外的性能开销。</block>
  <block id="8f666d296151faf9c472110831227243" category="list-text">* NetApp SnapMirror。*将数据的 Snapshot 副本从一个存储系统镜像到另一个存储系统。  ONTAP还支持将数据镜像到其他物理平台和云原生服务。</block>
  <block id="5685b3f13393b751231ff096f77e6747" category="list-text">* NetApp SnapLock。*通过将不可重写数据写入在指定时间内无法覆盖或擦除的特殊卷，可以有效地管理这些数据。</block>
  <block id="dff1063d1e007396b7fb75f266dd48b7" category="list-text">* NetApp SnapVault。*将来自多个存储系统的数据备份到中央 Snapshot 副本，作为所有指定系统的备份。</block>
  <block id="779cb4084f09228e9562ca3bedc5555c" category="list-text">* NetAppSyncMirror。*为物理连接到同一控制器的两个不同磁盘丛提供实时 RAID 级数据镜像。</block>
  <block id="929a0581ca4b2982313e21e51effbc10" category="list-text">* NetApp SnapRestore。*提供从 Snapshot 副本按需快速恢复备份数据的功能。</block>
  <block id="4e3f9a03501932f914205c4ad0e682ea" category="list-text">* NetApp FlexClone。*根据 Snapshot 副本提供NetApp卷的完全可读、可写副本的即时配置。</block>
  <block id="774a065cb3548cc61fb0ec3bc1494fbe" category="inline-link">ONTAP 9 文档中心</block>
  <block id="d06c8b79097ede1a26446d68bec0ca39" category="paragraph">有关ONTAP的更多信息，请参阅<block ref="b961dc88c1ac3ab8c78f9fff5ef05edb" category="inline-link-rx"></block>。</block>
  <block id="c389369b80a8ce8ead607b4c7088682e" category="admonition">NetApp ONTAP可在本地、虚拟化或云中使用。</block>
  <block id="7fe152f424c1b9adb613191ffd1e7aea" category="paragraph"><block ref="7fe152f424c1b9adb613191ffd1e7aea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a69e0f8303b40f9f4d56038d3d260c9" category="section-title">NetApp AFF/ FAS</block>
  <block id="f4fc33973424c12639f93790b1c6f370" category="paragraph">NetApp提供强大的全闪存 (AFF) 和横向扩展混合 (FAS) 存储平台，这些平台具有低延迟性能、集成数据保护和多协议支持等特点。</block>
  <block id="1c17e6d2341ed81f40ea6b64de41e6d7" category="paragraph">这两个系统均由NetApp ONTAP数据管理软件提供支持，这是业界最先进的数据管理软件，可实现简化、高可用、云集成的存储管理，为您的数据结构需求提供企业级的速度、效率和安全性。</block>
  <block id="992c24be8f66e4259b38ce763c115251" category="paragraph">有关 NETAPP AFF/ FAS平台的更多信息，请单击<block ref="629508ef5a91b5835f70894f34eed424" category="inline-link-rx"></block>。</block>
  <block id="3a3a5cd068731551120f43f37950768b" category="section-title">ONTAP Select</block>
  <block id="158de41b0c768154e1c26d384097971b" category="paragraph">ONTAP Select是NetApp ONTAP的软件定义部署，可以部署到您环境中的虚拟机管理程序上。它可以安装在 VMware vSphere 或 KVM 上，并提供基于硬件的ONTAP系统的全部功能和体验。</block>
  <block id="3f0bbee5abf3eed060d4147cb0d060b9" category="paragraph">有关ONTAP Select的更多信息，请单击<block ref="7c1424ed7be035c303f12b0763e38ece" category="inline-link-rx"></block>。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="section-title">Cloud Volumes ONTAP</block>
  <block id="9c38b2d834f16a22a033cc493828d911" category="paragraph">NetApp Cloud Volumes ONTAP是NetApp ONTAP的云部署版本，可以部署在许多公共云中，包括 Amazon AWS、Microsoft Azure 和 Google Cloud。</block>
  <block id="c7fa0d52c3955385f084d0e67c59f963" category="paragraph">有关Cloud Volumes ONTAP 的更多信息，请单击<block ref="75c9b0075008bbe40ac851ad7f6dda6a" category="inline-link-rx"></block>。</block>
  <block id="87517df6852cb879fffc1e5811e773eb" category="paragraph">NetApp提供多种产品来帮助您协调、管理、保护和迁移有状态的容器化应用程序及其数据。</block>
  <block id="d8c97b16fc0393403d454727d6719db4" category="paragraph"><block ref="d8c97b16fc0393403d454727d6719db4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d3fb24019e0cc5250fe07af0c12fa7b" category="paragraph">NetApp Trident是一个开源且完全支持的存储编排器，适用于容器和 Kubernetes 发行版（如 {k8s_distribution_name}）。欲了解更多信息，请访问Trident网站<block ref="845024b96ab150d9f628b33995c60669" category="inline-link-rx"></block>。</block>
  <block id="ccbb3765ebd50818c2e13a7aba362360" category="paragraph">以下页面包含有关已在 {solution_name} 解决方案中针对应用程序和持久存储管理进行验证的NetApp产品的更多信息：</block>
  <block id="e71e852dc96d4d0e2da95de923a6f8ff" category="inline-link-macro">NetApp Trident</block>
  <block id="25b90e1180939c55a6c004f0caece01e" category="list-text"><block ref="25b90e1180939c55a6c004f0caece01e" category="inline-link-macro-rx"></block></block>
  <block id="cb857ac0e7804032ead22f167cd7975d" category="paragraph">Trident是一个开源的、完全支持的存储编排器，适用于容器和 Kubernetes 发行版（如 {k8s_distribution_name}）。  Trident可与整个NetApp存储产品组合配合使用，包括NetApp ONTAP和 Element 存储系统，并且还支持 NFS 和 iSCSI 连接。  Trident允许最终用户从其NetApp存储系统配置和管理存储，而无需存储管理员的干预，从而加速 DevOps 工作流程。</block>
  <block id="a4957cf974ce20219897bbbf5b131cb8" category="paragraph">管理员可以根据项目需求和存储系统模型配置多个存储后端，以实现高级存储功能，包括压缩、特定磁盘类型或保证一定性能水平的 QoS 级别。定义完成后，开发人员可以在他们的项目中使用这些后端来创建持久卷声明 (PVC) 并根据需要将持久存储附加到他们的容器。</block>
  <block id="c1169b92d2702ce17fd2fd00ee52298d" category="paragraph"><block ref="c1169b92d2702ce17fd2fd00ee52298d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1a87a98cf239ab6c40a301d699d36ce" category="paragraph">Trident的开发周期很快，和 Kubernetes 一样，每年发布四次。</block>
  <block id="2e0b4ead344201a59336e8b95c4c575f" category="paragraph">Trident的最新版本是 2022 年 4 月发布的 22.04。已测试过哪个版本的Trident以及可以找到哪个 Kubernetes 发行版的支持矩阵<block ref="34562000b9988739736848a0014e5230" category="inline-link-rx"></block>。</block>
  <block id="ed42e52f359216f47260ed1d21ef331c" category="paragraph">从 20.04 版本开始， Trident设置由Trident操作员执行。该操作员使大规模部署变得更容易，并提供额外的支持，包括作为Trident安装的一部分部署的 pod 的自我修复。</block>
  <block id="4a85fdd5a26454abc330a5ec2a46a326" category="paragraph">随着 21.01 版本的发布，Helm 图表可用来简化Trident Operator 的安装。</block>
  <block id="c0018d5f0e0d9decd39a8059cc2bc473" category="summary">本页提供的示例是 Anthos with NetApp的解决方案验证和用例。</block>
  <block id="d48e549b4fdcc889e0243c53bbb4dda0" category="doc">解决方案验证和用例</block>
  <block id="fc31dc82d7754f65126c60eab5625947" category="inline-link-macro">使用 Google Cloud Console 安装应用程序</block>
  <block id="e41ed2ca65cd2c48386be2ec8ef5bdbd" category="paragraph"><block ref="e41ed2ca65cd2c48386be2ec8ef5bdbd" category="inline-link-macro-rx"></block></block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="summary"></block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="doc">在哪里可以找到更多信息</block>
  <block id="1be465260df7c846768e06c988594a6a" category="paragraph">要了解有关本文档中描述的信息的更多信息，请查看以下网站：</block>
  <block id="6f4e4d9fbe846fd8bf7decf7dcffbd63" category="list-text">NetApp 文档</block>
  <block id="1497398039e94eb756be9a3cff5649c7" category="inline-link"><block ref="1497398039e94eb756be9a3cff5649c7" category="inline-link-rx"></block></block>
  <block id="f2d3084aa0f70da5e15757ee3292cda7" category="paragraph"><block ref="f2d3084aa0f70da5e15757ee3292cda7" category="inline-link-rx"></block></block>
  <block id="78e584e510e96276ebd784fceafb9bdb" category="list-text">NetApp Trident文档</block>
  <block id="b74877ef96b7f6ef3d913a0c3ebca5e8" category="inline-link"><block ref="b74877ef96b7f6ef3d913a0c3ebca5e8" category="inline-link-rx"></block></block>
  <block id="086fce5f74cc93b0516aadec33636e09" category="paragraph"><block ref="086fce5f74cc93b0516aadec33636e09" category="inline-link-rx"></block></block>
  <block id="7cfc9495aac39bbaa5defc76b7f4e8db" category="list-text">Anthos Clusters on VMware 文档</block>
  <block id="3001330ca359a25f2bb0fb3a80b81f98" category="inline-link"><block ref="3001330ca359a25f2bb0fb3a80b81f98" category="inline-link-rx"></block></block>
  <block id="ce31d50048cf83e159c11cdf9571f300" category="paragraph"><block ref="ce31d50048cf83e159c11cdf9571f300" category="inline-link-rx"></block></block>
  <block id="9ee8ef3c59727b8b17070caf87743214" category="list-text">Anthos on Bare Metal 文档</block>
  <block id="bc10096da41c680de98ecf3f1def7d17" category="inline-link"><block ref="bc10096da41c680de98ecf3f1def7d17" category="inline-link-rx"></block></block>
  <block id="d642746f7d7a37b7cb340d9a62d751a5" category="paragraph"><block ref="d642746f7d7a37b7cb340d9a62d751a5" category="inline-link-rx"></block></block>
  <block id="4666fc2f640685636f115f8b2b6b8ce0" category="list-text">VMware vSphere 文档</block>
  <block id="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link"><block ref="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link-rx"></block></block>
  <block id="71aa41fc980571d5a324adedae614f9c" category="paragraph"><block ref="71aa41fc980571d5a324adedae614f9c" category="inline-link-rx"></block></block>
  <block id="fdd1d4ba64f526087e6e49e35a884fbd" category="summary">本节专门介绍实际用户在将此解决方案部署到生产中时可能需要执行的自定义，例如部署自定义负载均衡器实例。</block>
  <block id="0bc570c518e7c4f356ebceb14fa8372f" category="doc">高级配置选项</block>
  <block id="b432301f7ba469598e6ea2eb86e4859a" category="paragraph">通常，最容易部署的解决方案是最好的，但在某些情况下，需要进行高级定制才能满足特定应用程序或解决方案部署到的环境的要求或规范。为此，Red Hat OpenShift 与NetApp解决方案允许进行以下定制以满足这些需求。</block>
  <block id="e9f8a0ceeb83fb28487ef50dc197de0e" category="admonition">在本节中，我们记录了一些高级配置选项，例如使用第三方负载均衡器或创建用于托管自定义容器映像的私有注册表，这两者都是安装NetApp Trident Protect 的先决条件。</block>
  <block id="02b655f637212514780af2795fd74fc4" category="paragraph">以下页面包含有关 Red Hat OpenShift with NetApp解决方案中验证的高级配置选项的更多信息：</block>
  <block id="de3b8bd79707b5ac064727a07d81d808" category="summary">Anthos on Bare Metal 的硬件无关功能让您可以选择针对您的个性化用例优化的计算平台，同时还提供许多额外的好处。</block>
  <block id="aa69ca65720dd2e4eef99ebfb7816268" category="doc">裸机上的 Anthos</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">受益</block>
  <block id="a5fcf88905522eca0a7500198fc13ea9" category="paragraph">示例包括：</block>
  <block id="b872ec62b57abae84b75461c58e0a0a7" category="list-text">*自带服务器。*您可以使用与现有基础设施相匹配的服务器来降低资本支出和管理成本。</block>
  <block id="231a9d200c75839cf9b4ffeecde45821" category="list-text">*自带 Linux 操作系统。*通过选择要部署 Anthos-on-bare-metal 环境的 Linux 操作系统，您可以确保 Anthos 环境能够完美地融入您现有的基础架构和管理方案。</block>
  <block id="8f3c025cf8c4fb1a7841163ea4213611" category="list-text">*提高性能并降低成本。*无需虚拟机管理程序，Anthos-on-bare-metal 集群就可以直接访问服务器硬件资源，包括 GPU 等性能优化的硬件设备。</block>
  <block id="5c96e444541cebd597916a4a84177f6b" category="list-text">*提高网络性能并降低延迟。*由于 Anthos-on-bare-metal 服务器节点直接连接到您的网络，而无需虚拟化抽象层，因此可以对它们进行优化以实现低延迟和性能。</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">硬件要求</block>
  <block id="a623a8d0366bf079411aa30be45b2d10" category="section-title">计算</block>
  <block id="2c912ca37607e38556f15eebae425241" category="paragraph">Google Cloud 会定期通过其 Anthos Ready 平台合作伙伴计划请求合作伙伴服务器平台使用新版本的 Anthos 进行更新验证。可以找到当前已验证的服务器平台和支持的 Anthos 版本的列表<block ref="3b2369e07f297fb9367d6c18ca70e2ac" category="inline-link-rx"></block>。</block>
  <block id="6a655d9810c4c5ea4ab7a5520d43ca6f" category="paragraph">下表包含已由NetApp和NetApp合作伙伴工程师测试的用于验证 Anthos on 裸机部署的服务器平台。</block>
  <block id="c0bd7654d5b278e65f21cf4e9153fdb4" category="cell">制造商</block>
  <block id="529a05ca6c1263aab080ec4f20754411" category="cell">制作</block>
  <block id="a559b87068921eec05086ce5485e9784" category="cell">型号</block>
  <block id="7b1d1185b835814de783483f686e9825" category="cell">Cisco</block>
  <block id="21f20abdc637c3f2ef02355079dac15d" category="cell">UCS</block>
  <block id="8746d13b8a20e92a40041de84ef0df6f" category="cell">B200 M5</block>
  <block id="3cd9b23ed31110b2ebcbcc8c9a1dc8c0" category="cell">HPE</block>
  <block id="dcaa84314614529edc3d258cff7f565a" category="cell">Proliant</block>
  <block id="76cca00a6b1e58467cea8165c904fe4f" category="cell">DL360</block>
  <block id="64d354dc5879cf570ce7b4ef676e75bd" category="section-title">操作系统</block>
  <block id="08c2b93847522285403aa57a50c67356" category="paragraph">Anthos-on-bare-metal 节点可以根据客户的选择配置几种不同的 Linux 发行版，以帮助匹配他们当前的数据中心基础架构。</block>
  <block id="c5c8661ff74179fd251af29468f2ee7d" category="paragraph">下表列出了NetApp及其合作伙伴用于验证解决方案的 Linux 操作系统。</block>
  <block id="b8e7b465df7c5979dc731d06e84ce2cf" category="cell">版本</block>
  <block id="97f1ca2cfbf4529686b9719bf26e07c0" category="cell">Anthos 版本</block>
  <block id="aa1fc3398e84bda331b47203c1e53ad5" category="cell">CentOS</block>
  <block id="09ee2ff894d42056476c4e659964e53d" category="cell">8.4.2105</block>
  <block id="9f281f23fa0eaa9fab3de640f4c4ed29" category="cell">1.14</block>
  <block id="c73bbd3786350b0a8d3577d82afdf489" category="cell">Red Hat Enterprise Linux</block>
  <block id="6762f053abca7510f6648c71492724a7" category="cell">8.4</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="cell">Ubuntu</block>
  <block id="fdd2aab0f0128709917906c63ac4ead9" category="cell">18.04.5 LTS（内核 5.4.0-81-generic）</block>
  <block id="c8d51ff28b5d8ab2f7a2a108c7318d3e" category="cell">20.04.2 LTS</block>
  <block id="26181b11798a17989dc697461dc3e9d0" category="section-title">附加硬件</block>
  <block id="629f0a0ce45378aa8d3f93d405eb19cc" category="paragraph">为了完成 Anthos on Bare Metal 的部署，使其成为经过全面验证的解决方案， NetApp和我们的合作伙伴工程师已经对用于网络和存储的其他数据中心组件进行了测试。</block>
  <block id="9e5fa7e53550abb6c768c926e7888df7" category="paragraph">下表包含有关这些附加基础设施组件的信息。</block>
  <block id="b763f3ad097c7d9beb9849be170a627a" category="cell">硬件名称</block>
  <block id="8c692721fdfc559bf4689567aa48fb47" category="cell">关系</block>
  <block id="5cb4ead83aaa15a241ef0e8c36f0678c" category="cell">C9336C-FX2</block>
  <block id="cfaa375bf6c7f9fcc1bc04d4f30c9154" category="cell">NetApp</block>
  <block id="c8984126713ed072b9cb0a44a162be4d" category="cell">AFF</block>
  <block id="969f1705e87aebac2415f45faaf8ef89" category="cell">A250、A220</block>
  <block id="8bb152d8bbc90b878b63c05b6b953334" category="section-title">附加软件</block>
  <block id="effae9170216f08fb6cb3265a4cae9cc" category="paragraph">下表包括在验证环境中部署的其他软件版本的列表。</block>
  <block id="91c8cbe28b4928f6ea19ea8d1894623a" category="cell">软件名称</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">版本</block>
  <block id="604081aa29d106416ce93ba7c42a41e3" category="cell">NXOS</block>
  <block id="55e62f54b487de5f2a89d645f80d77b4" category="cell">9.3(5)</block>
  <block id="253b40ae359ba25b56231803430c4873" category="cell">ONTAP</block>
  <block id="60c153e0ec5ee4601950a2256ca730fa" category="cell">9.11.1P4</block>
  <block id="10f0fa4079121b371145e16713fdbb44" category="cell">Trident</block>
  <block id="93edfe5491b7772fd10045fef48289e7" category="cell">23.01.0</block>
  <block id="e0f2ed66fa5adfb40b7738ba72a899c9" category="paragraph">在NetApp和我们在 World Wide Technology (WWT) 的合作伙伴团队执行 Anthos Ready 平台验证期间，实验室环境是根据下图构建的，这使我们能够测试解决方案中部署的每种服务器类型、操作系统、网络设备和存储系统的功能。</block>
  <block id="1126fba791a29eca6a914fb9cc520b2d" category="inline-image-macro">Anthos BareMetal 物理硬件图</block>
  <block id="79d758c8d244aeaeb6ff675747719e7a" category="paragraph"><block ref="79d758c8d244aeaeb6ff675747719e7a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f95cad6e29b1c5d602bd5bc840867b18" category="inline-image-macro">Anthos BareMetal 逻辑网络图</block>
  <block id="07d0a22ea67554590949bb82da51df67" category="paragraph"><block ref="07d0a22ea67554590949bb82da51df67" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9401797270b98418222b9be6674161bc" category="admonition">此多操作系统环境展示了与 Anthos-on-bare-metal 解决方案支持的操作系统版本的互操作性。我们预计客户将在其部署中对一个或一个子集的操作系统进行标准化。</block>
  <block id="c7a2b443f8714e7071c1d55a3bd2715f" category="section-title">基础设施支持资源</block>
  <block id="f8f0e385abfb7fc517b1b9b4e9e8d19e" category="paragraph">在裸机上部署 Anthos 之前，应准备好以下基础架构：</block>
  <block id="3a6810b280d17ed872c226f7c95dac46" category="list-text">至少一个提供可从管理网络访问的完整主机名解析的 DNS 服务器。</block>
  <block id="14de5275438fed7bf294f7d1ef6ebfce" category="list-text">至少一个可从管理网络访问的 NTP 服务器。</block>
  <block id="ab851d2f29c7c89b9bc55851dd1002d2" category="list-text">（可选）带内管理网络的出站互联网连接。</block>
  <block id="82d4df3a9be244e5548f2913b75e403c" category="admonition">本文档的视频和演示部分有一个 Anthos on bare metal 部署的演示视频。</block>
  <block id="e66e12138810859d8abf5fa2081fb491" category="summary">如何使用 Google Cloud Console 将应用程序部署到本地 Anthos GKE 集群。</block>
  <block id="0fedf382c8cab1bb4bd4137b2edd4ddf" category="doc">从 Google Cloud Console Marketplace 部署应用程序</block>
  <block id="0366cc0ad13ff79b1787f5d794b5a6ad" category="paragraph">本节详细介绍如何使用 Google Cloud Console 将应用程序部署到本地 Anthos GKE 集群。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="db974f321885ec32e283b3ba19624bf5" category="list-text">已在本地部署并在 Google Cloud Console 中注册的 Anthos 集群</block>
  <block id="86baa7935f2da05d24c2736b997d56af" category="list-text">在您的 Anthos 集群中配置的 MetalLB 负载均衡器</block>
  <block id="0e4a5cc43eded7fb6f9688b4db42749c" category="list-text">具有将应用程序部署到集群的权限的帐户</block>
  <block id="0abcad93e8aa42fe77227a82e7bfac88" category="list-text">如果您选择具有相关费用的应用程序，则需要 Google Cloud 的结算帐户（可选）</block>
  <block id="241b7771ea8f8a56aa7c79c94ea05b45" category="section-title">部署应用程序</block>
  <block id="7519665b833135b7a83098238355d197" category="paragraph">对于此用例，我们使用 Google Cloud Console 将一个简单的 WordPress 应用程序部署到我们的一个 Anthos 集群。该部署使用NetApp ONTAP在预定义存储类中提供的持久存储。然后，我们演示了两种不同的方法来修改应用程序的默认服务，以便 MetalLB 负载均衡器为其提供 IP 地址并将其公开给全世界。</block>
  <block id="0f46ecb3b1113d47388dd5a45b007f77" category="paragraph">要以这种方式部署应用程序，请完成以下步骤：</block>
  <block id="284e9ebcc65faa3412015e1aef0b212f" category="list-text">验证您要部署到的集群是否可以在 Google Cloud Console 中访问。</block>
  <block id="c5ae9e1da0751273beff7dba35e9f3a0" category="inline-image-macro">注册集群</block>
  <block id="06eb01def20560e62dffdad82c884961" category="paragraph"><block ref="06eb01def20560e62dffdad82c884961" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ffca2e9c9a134c6025fcd79da7b2c759" category="list-text">从左侧菜单中选择应用程序，选择顶部的三个点选项菜单，然后选择从市场部署，这将打开一个新窗口，您可以从中从 Google Cloud 市场中选择一个应用程序。</block>
  <block id="0684d335d9a7c1f72f6bfcd5a3f89e00" category="inline-image-macro">应用市场</block>
  <block id="8a118a984a2347a1d259edda78f288b6" category="paragraph"><block ref="8a118a984a2347a1d259edda78f288b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec1116a3fdba8715414e3ef4e4f99912" category="list-text">搜索您想要安装的应用程序，在本例中为 WordPress。</block>
  <block id="822f5bce2ee65cbb4bdffaba2710ba34" category="inline-image-macro">搜索 WordPress</block>
  <block id="382d0fd2b2048049b2a9d328d41ecf90" category="paragraph"><block ref="382d0fd2b2048049b2a9d328d41ecf90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="510d39751378d8f38e07c02ea0fc6be6" category="list-text">选择 WordPress 应用程序后，将显示概览屏幕。单击配置按钮。</block>
  <block id="10caa5e50634911a226bf4aadc5a0c7a" category="inline-image-macro">WordPress 概览屏幕</block>
  <block id="d452e5b4d46877348253fbd17b831b15" category="paragraph"><block ref="d452e5b4d46877348253fbd17b831b15" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6ef5c869d6fe64bd1b351a45360b963" category="list-text">在下一页中，您必须选择要部署到的集群，在我们的例子中是 Demo-Cluster。选择或创建新的命名空间和应用程序实例名称，并选择 WordPress 应用程序及其支持 MariaDB 数据库所需的存储类和持久卷大小。在这两种情况下，我们都选择了ONTAP-NAS-CSI 存储类。</block>
  <block id="355246a53a979cfb1041a2b1940f6879" category="inline-image-macro">WordPress 配置</block>
  <block id="cd222714e2565e3e2a033fd9d4009baa" category="paragraph"><block ref="cd222714e2565e3e2a033fd9d4009baa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45d655c70f06a3434e67cbfc80248a9a" category="admonition">不要选择“启用公共 IP 访问”。这样做会创建一个 NodePort 类型的服务，该服务无法从本地 Anthos 部署访问。</block>
  <block id="afab588b2fdc93623ccf8cb877caf4da" category="list-text">单击“部署”按钮后，您将看到一个提供应用程序详细信息的页面。您可以刷新此页面或使用 CLI 登录到您的集群来检查部署状态。</block>
  <block id="31e41095bfaa14799239e8d9ba7ad438" category="inline-image-macro">申请详情</block>
  <block id="6d1aa4cbe2a9c3746c1c2ae010226c39" category="paragraph"><block ref="6d1aa4cbe2a9c3746c1c2ae010226c39" category="inline-image-macro-rx" type="image"></block></block>
  <block id="182bdd798d19f66a7142e53dc7ba7d03" category="list-text">通过运行命令来获取应用程序命名空间中的 pod 信息，可以使用 CLI 检查应用程序部署时的状态：<block ref="f33e7514e1b666008863c58a5b3b8fc3" prefix=" " category="inline-code"></block> 。</block>
  <block id="4fdb8b8bf983b608be34dc4a03f63bae" category="inline-image-macro">Kubectl 获取 Pod</block>
  <block id="c47ad77ef8d5e7ac06ff160614a91d45" category="paragraph"><block ref="c47ad77ef8d5e7ac06ff160614a91d45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e9914dac3fe74f2b341b37fde931ccc8" category="admonition">请注意，此屏幕截图中有一个部署程序容器处于错误状态。这是正常的。此 pod 是 Google Cloud Console 用来部署应用程序的辅助 pod，它会在其他 pod 开始初始化过程后自行终止。</block>
  <block id="9d8881c161170e208f09b8b2a142a66f" category="list-text">片刻之后，验证您的应用程序是否正在运行。</block>
  <block id="ce0590d3b5f26b188a077af82f7344a2" category="inline-image-macro">应用程序运行</block>
  <block id="250f1901b1fdb4f892b48474ba7bb72d" category="paragraph"><block ref="250f1901b1fdb4f892b48474ba7bb72d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad3acabe74bca98e10c24bed74bda730" category="section-title">公开应用程序</block>
  <block id="76ce15c259c30934261379d5c782fb7a" category="paragraph">应用程序部署后，您有两种方法可以为其分配一个全球可达的 IP。</block>
  <block id="636274e5bcac1260da12a33d8dae0b1e" category="section-title">使用 Google Cloud Console</block>
  <block id="affe13ca759d7abbd8dd52510dcccb9d" category="paragraph">您可以使用 Google Cloud Console 公开应用程序，并在浏览器中编辑服务的 YAML 输出以设置可公开访问的 IP。为此，请执行以下步骤：</block>
  <block id="e14de37e4860e0a27178cce381f79223" category="list-text">在 Google Cloud Console 中，点击左侧菜单中的服务和入口。</block>
  <block id="7888520f99ee2ce14da11b431d5ae318" category="inline-image-macro">服务和入口</block>
  <block id="3385f1a5a399835e028edaed1b8336b7" category="paragraph"><block ref="3385f1a5a399835e028edaed1b8336b7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6187f833f4cb9c4f7b8ee4db49498f1b" category="list-text">点击<block ref="038c7925bdf387b6bedcaa4b32ec3a83" prefix=" " category="inline-code"></block>服务。这将打开服务详情屏幕。单击顶部的“编辑”按钮。</block>
  <block id="d203ca99d4a0afdab1bcfe540a547944" category="inline-image-macro">编辑服务详情</block>
  <block id="762e108c80328d3158b90bfbb90c01d8" category="paragraph"><block ref="762e108c80328d3158b90bfbb90c01d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="668b0ecfd7e72dc665e312c2993930b3" category="list-text">打开“编辑服务详细信息”页面，其中包含该服务的 YAML 信息。向下滚动直到看到<block ref="084d5d41838f6b2d8b0c1f1176d66d01" prefix=" " category="inline-code"></block>部分和<block ref="3190100143eef75fa97ee36e98fa3f8b" prefix=" " category="inline-code"></block>值，设置为<block ref="8fa769eb2083a1e8b123c7328287e112" prefix=" " category="inline-code"></block>。将此值更改为<block ref="a38b02b14f77fc6ad85cfb7df9d27b2e" prefix=" " category="inline-code"></block>并点击保存按钮。</block>
  <block id="d6b6ff61b6af359d37d3635e95073c9d" category="inline-image-macro">类型 ClusterIP 值</block>
  <block id="cefa1e452a48b727092da8faf27e90a9" category="paragraph"><block ref="cefa1e452a48b727092da8faf27e90a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5f9f0194a478fbc7f5f93f46c2953de" category="inline-image-macro">类型负载均衡器值</block>
  <block id="3e5c69b4903e03de38b53bd6f3f048c5" category="paragraph"><block ref="3e5c69b4903e03de38b53bd6f3f048c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7331da14461f4638eebbff81857db51" category="list-text">当您返回到服务详情页面时，<block ref="e659b52eba1f0299b2d8ca3483919e72" prefix=" " category="inline-code"></block>现在列出<block ref="a38b02b14f77fc6ad85cfb7df9d27b2e" prefix=" " category="inline-code"></block>和<block ref="918d33b6c8dd822ec40bbef2e2f58f3e" prefix=" " category="inline-code"></block>字段列出了从 MetalLB 池分配的 IP 地址以及应用程序可访问的端口。</block>
  <block id="3ec7f6e26f5dfb369960a71540f97a1f" category="inline-image-macro">服务详情最终版</block>
  <block id="d522a1fe5fe5cfc008304aa306eeedcc" category="paragraph"><block ref="d522a1fe5fe5cfc008304aa306eeedcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="74e17d078471c59b2bf53ed27db0fb1f" category="section-title">使用 Kubectl 修补服务</block>
  <block id="f022ee3e39dabcf83208cc99a6eb4a8b" category="paragraph">您可以使用 CLI 和<block ref="b40dfaf71508ce779421b1c4dde5f99f" prefix=" " category="inline-code"></block>命令来修改您的部署并设置可公开访问的 IP。为此，请完成以下步骤：</block>
  <block id="7d217d270c695202071f85ac46866514" category="list-text">使用以下命令列出与命名空间中的 Pod 关联的服务<block ref="3841f6ce7a9f7be216fe99eef26477f6" prefix=" " category="inline-code"></block>命令。</block>
  <block id="fe7c7c8f844859020a7db7a331ade810" category="inline-image-macro">列表服务</block>
  <block id="ef2301caf87a9b05fbe6769ececce103" category="paragraph"><block ref="ef2301caf87a9b05fbe6769ececce103" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6969be1fd50af4592e0d142a1d8d70cd" category="list-text">修改服务类型<block ref="8fa769eb2083a1e8b123c7328287e112" prefix=" " category="inline-code"></block>键入<block ref="5c89f521cbb8685d397906bd6ce0efa1" prefix=" " category="inline-code"></block>使用以下命令：</block>
  <block id="ee64374fc07de409e3af533d716265a7" category="paragraph">此新服务类型会自动从 MetalLB 池中分配一个可用的 IP 地址。</block>
  <block id="c2a179dcfc744c6d0e1f8e669f780a31" category="inline-image-macro">将服务修补为 LoadBalancer 类型</block>
  <block id="272ffffe95d28655539f409918b0b8c6" category="paragraph"><block ref="272ffffe95d28655539f409918b0b8c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="515ddbc3d2b92a28024949cdc11effe0" category="section-title">在暴露的外部IP上访问应用程序</block>
  <block id="9f32f710fb943684fe7ac71944e06000" category="paragraph">现在您已经通过可公开访问的 IP 地址公开了应用程序，您可以使用浏览器访问您的 WordPress 实例。</block>
  <block id="3922853243ef47d8d33c4ed74259c64a" category="inline-image-macro">浏览器中的 WordPress</block>
  <block id="90a9bd14ef0bc228bedd5314bd37a59a" category="paragraph"><block ref="90a9bd14ef0bc228bedd5314bd37a59a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9b6757a6af2937cac7096646ee8dedb8" category="summary">F5 BIG-IP 是一种应用交付控制器 (ADC)，它提供广泛的先进生产级流量管理和安全服务，如 L4-L7 负载平衡、SSL/TLS 卸载、DNS、防火墙等。这些服务大大提高了应用程序的可用性、安全性和性能。</block>
  <block id="abb33c60fb7710d77680621bb6bb0433" category="doc">安装 F5 BIG-IP 负载均衡器</block>
  <block id="4f3422718812b2a40b70340da35b565c" category="paragraph">F5 BIG-IP 是一种应用交付控制器 (ADC)，它提供广泛的先进生产级流量管理和安全服务，如 L4-L7 负载平衡、SSL/TLS 卸载、DNS、防火墙等。这些服务极大地提高了应用程序的可用性、安全性和性能。</block>
  <block id="81d91349803cba0e1b0d0f84948ff37c" category="paragraph">F5 BIG-IP 可以通过多种方式部署和使用，包括在专用硬件上、在云端或作为本地虚拟设备。请参阅此处的文档来探索和部署 F5 BIG-IP。</block>
  <block id="402c558f65f9d58557e4d79511d71f01" category="paragraph">F5 BIG-IP 是第一个与 Anthos On-Prem 一起提供的捆绑负载均衡器解决方案，并被用于 Anthos with NetApp解决方案的许多早期 Anthos Ready 合作伙伴验证中。</block>
  <block id="cb9f661ea2c5b0b25cb936398de81286" category="admonition">F5 BIG-IP 可以采用独立模式部署，也可以采用集群模式部署。为了进行此验证，F5 BIG-IP 以独立模式部署。但是，出于生产目的， NetApp建议创建一个 BIG-IP 实例集群，以避免单点故障。</block>
  <block id="0d3e8be481c0c23fd0a68da9a9340ef7" category="admonition">F5 BIG-IP 系统可以部署在专用硬件上、云端或作为本地虚拟设备部署，版本高于 12.x，以便与 F5 CIS 集成。为了本文档的目的，F5 BIG-IP 系统被验证为虚拟设备，例如使用 BIG-IP VE 版本。</block>
  <block id="39bc153685f2a0c6d56db4227295a3b0" category="section-title">已验证版本</block>
  <block id="b662a8c121a377d9111fe64265c8d819" category="paragraph">该解决方案利用在 VMware vSphere 中部署的虚拟设备。根据您的网络环境，F5 Big-IP 虚拟设备的网络可以配置为双臂或三臂配置。本文档中的部署基于双臂配置。关于如何配置虚拟设备以与 Anthos 配合使用的详细信息，请参阅<block ref="f18a28d0c935319437c4d1b1e33e5728" category="inline-link-rx"></block>。</block>
  <block id="9c62eb7c12e4e6a75fc74fffecb2db09" category="paragraph">NetApp的解决方案工程团队已在我们的实验室中验证了下表中的版本，以便与 Anthos On-Prem 的部署配合使用：</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">类型</block>
  <block id="37f438df6a6d5ba4c17ef8ca58562f00" category="cell">F5</block>
  <block id="90524e294c6b7accf9b320977f3f5baa" category="cell">BIG-IP虚拟网络</block>
  <block id="bc75f10c94df92e80198364d879456ab" category="cell">15.0.1-0.0.11</block>
  <block id="c2c889e06ea18c0e72996bc4b43c8115" category="cell">16.1.0-0.0.19</block>
  <block id="7cd8fb6e31cc946c078d2740c76a9899" category="section-title">安装</block>
  <block id="674751c31a2db2596bf7788e2953b80f" category="paragraph">要安装 F5 BIG-IP，请完成以下步骤：</block>
  <block id="ee5cd6f83412e93266bf30ff048db6ff" category="list-text">从 F5 下载虚拟应用程序开放虚拟设备 (OVA) 文件<block ref="cafae381bde5e2381c6df42a3aa937c6" category="inline-link-rx"></block>。</block>
  <block id="fff9995f30a825c5d3e5709e7b78117a" category="admonition">要下载该设备，用户必须在 F5 注册。他们为 Big-IP Virtual Edition Load Balancer 提供了 30 天的演示许可证。  NetApp建议对设备的生产部署使用永久的 10Gbps 许可证。</block>
  <block id="1a104d04970b6b80d8cf31f554404f4d" category="list-text">右键单击基础设施资源池并选择部署 OVF 模板。将启动一个向导，允许您选择在步骤 1 中刚刚下载的 OVA 文件。单击“下一步”。</block>
  <block id="fdf7304b13d736c791bc745a330e7309" category="inline-image-macro">部署 Big-IP 设备</block>
  <block id="43eb30dc400849ee6ecfee54a2263cb6" category="paragraph"><block ref="43eb30dc400849ee6ecfee54a2263cb6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6762efea56447c717fea204b2676851" category="list-text">单击“下一步”继续执行每个步骤并接受每个屏幕显示的默认值，直到到达存储选择屏幕。选择您想要部署虚拟机的 VM_Datastore，然后单击下一步。</block>
  <block id="fbd07b7802c1a124a9359b27b9f46968" category="list-text">向导显示的下一个屏幕允许您自定义在环境中使用的虚拟网络。在外部字段中选择 VM_Network，在管理字段中选择 Management_Network。 Internal 和 HA 用于 F5 Big-IP 设备的高级配置，未配置。这些参数可以保持不变，也可以配置为连接到非基础设施、分布式端口组。单击“下一步”。</block>
  <block id="5869793ca55f5fc50960cbd965138c70" category="inline-image-macro">部署 Big_IP 设备，第 2 部分</block>
  <block id="ddc3c0b3a2143a477aef07b46318c67a" category="paragraph"><block ref="ddc3c0b3a2143a477aef07b46318c67a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93353313944577e80d34c3d9491db6ce" category="list-text">查看设备的摘要屏幕，如果所有信息正确，请单击“完成”以开始部署。</block>
  <block id="68b984a73f20c874fb80feeaa4621109" category="list-text">虚拟设备部署完成后，右键单击并启动它。它应该在管理网络上接收 DHCP 地址。该设备基于 Linux，并且部署了 VMware Tools，因此您可以在 vSphere 客户端中查看它接收的 DHCP 地址。</block>
  <block id="ca9eda681850d46169f2940362b1548f" category="inline-image-macro">部署 Big-IP Appliance，第 3 部分</block>
  <block id="9a5b6f8184fdc8f5f7c76f324cba19f4" category="paragraph"><block ref="9a5b6f8184fdc8f5f7c76f324cba19f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d92e443c00989a23096c72b760af7de8" category="list-text">打开 Web 浏览器并使用上一步中的 IP 地址连接到设备。默认登录名为 admin/admin，首次登录后，设备会立即提示您更改管理员密码。然后它会返回到一个屏幕，您必须使用新的凭据登录。</block>
  <block id="dbe135d0d5ae1eb2c137c81f0ce0bdfb" category="inline-image-macro">Big-IP 配置</block>
  <block id="da270bb20b1f9864719d3ac159d6eec4" category="paragraph"><block ref="da270bb20b1f9864719d3ac159d6eec4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bdb0e3e1ff63b6d5f08545e207448035" category="list-text">第一个屏幕提示用户完成设置实用程序。单击“下一步”启动该实用程序。</block>
  <block id="6e7de45031877e6ff00d3069664fbcaf" category="inline-image-macro">Big-IP 配置，第 2 部分</block>
  <block id="325f5c5dc6bcbca0d5b9d52e778d882d" category="paragraph"><block ref="325f5c5dc6bcbca0d5b9d52e778d882d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8523c09995ae3cfb4593cd6c4e09029f" category="list-text">下一个屏幕提示激活设备的许可证。单击“激活”开始。当下一页出现提示时，粘贴您在注册下载时收到的 30 天评估许可证密钥或您购买设备时获得的永久许可证。单击“下一步”。</block>
  <block id="b648434aacde9879c494bb807f510d0a" category="inline-image-macro">Big-IP 配置，第 3 部分</block>
  <block id="719b24bba19ea09a951e19945c14e009" category="paragraph"><block ref="719b24bba19ea09a951e19945c14e009" category="inline-image-macro-rx" type="image"></block></block>
  <block id="38d2bfb14ed98f122ce9d9b9cdb2a127" category="admonition">为了使设备执行激活，管理接口上定义的网络必须能够访问互联网。</block>
  <block id="6ba845d7cd0e966d0a2a21209623a5b4" category="list-text">在下一个屏幕上，将显示最终用户许可协议 (EULA)。如果许可证中的条款可以接受，请单击“接受”。</block>
  <block id="c14be37e927625fe613c8c559de70df1" category="list-text">下一个屏幕将计算经过的时间，以验证迄今为止所做的配置更改。单击“继续”以恢复初始配置。</block>
  <block id="48f2578529c2f8c811567604f610cb5f" category="inline-image-macro">Big-IP 配置，第 4 部分</block>
  <block id="9116d82083927f302dac219ee889c7ce" category="paragraph"><block ref="9116d82083927f302dac219ee889c7ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c3d807fce3ffcb905b00324d2f7e2b9" category="list-text">配置更改窗口关闭，设置实用程序显示资源配置菜单。此窗口列出了当前许可的功能以及虚拟设备和每个正在运行的服务的当前资源分配。</block>
  <block id="bfadbbb449bc1cce93c56d86a1a7df03" category="inline-image-macro">Big-IP 配置，第 5 部分</block>
  <block id="252af3d558bee49b1b5df03703744ce8" category="paragraph"><block ref="252af3d558bee49b1b5df03703744ce8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="117c183bcbd703e6b0520f843e971c9b" category="list-text">单击左侧的平台菜单选项可以对平台进行进一步修改。修改包括设置使用 DHCP 配置的管理 IP 地址、设置设备安装的主机名和时区，以及保护设备免受 SSH 访问。</block>
  <block id="c9fd499e062b35d18ef68efd381c6c09" category="inline-image-macro">Big-IP 配置，第 6 部分</block>
  <block id="e54306c0087558150eae746af8563506" category="paragraph"><block ref="e54306c0087558150eae746af8563506" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fad130ca7ff2a3734a8b7547b3ebc404" category="list-text">接下来单击网络菜单，它使您能够配置标准网络功能。单击“下一步”开始标准网络配置向导。</block>
  <block id="f4e4f5e5f31a0b8312fb2338d9015dd0" category="inline-image-macro">Big-IP 配置，第 7 部分</block>
  <block id="2b1cd29ffb6b93e60c6e30c4d1ecede9" category="paragraph"><block ref="2b1cd29ffb6b93e60c6e30c4d1ecede9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c574654bbbf1cf9927e54a1cf4152c71" category="list-text">向导的第一页配置冗余；保留默认设置并单击下一步。下一页使您能够在负载均衡器上配置内部接口。接口 1.1 映射到 OVF 部署向导中标记为内部的 VMNIC。</block>
  <block id="19ee7bbff17fca60aeffed9079a87c6b" category="inline-image-macro">Big-IP 配置，第 8 部分</block>
  <block id="24ac884e1d0657922087c4ee456e62c2" category="paragraph"><block ref="24ac884e1d0657922087c4ee456e62c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37f1b31abf7679b5f5e495d8796a48a7" category="admonition">此页面中用于自 IP 地址、网络掩码和浮动 IP 地址的空间可以用不可路由的 IP 填充，以用作占位符。如果您正在部署三臂配置，它们还可以填充已配置为虚拟客户端分布式端口组的内部网络。必须完成这些操作才能继续向导。</block>
  <block id="93e0638cb95146eb8773223a90aa6d86" category="list-text">下一页使您能够配置外部网络，用于将服务映射到 Kubernetes 中部署的 pod。从 VM_Network 范围中选择一个静态 IP、适当的子网掩码以及来自同一范围的浮动 IP。接口 1.2 映射到 OVF 部署向导中标记为外部的 VMNIC。</block>
  <block id="803c8b846cb5b5c6c8d5a2b0b07f4dba" category="inline-image-macro">Big-IP 配置，第 9 部分</block>
  <block id="cc3690611fbb8d9a7f76eb93de616a5c" category="paragraph"><block ref="cc3690611fbb8d9a7f76eb93de616a5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3966f18c8da763e8d9f315b3e44811e" category="list-text">在下一页中，如果您在环境中部署多个虚拟设备，则可以配置内部 HA 网络。要继续，您必须填写 Self-IP 地址和网络掩码字段，并且必须选择接口 1.3 作为 VLAN 接口，该接口映射到 OVF 模板向导定义的 HA 网络。</block>
  <block id="9cd42351da162e75b1a0178bdd0ded20" category="inline-image-macro">Big-IP 配置，第 10 部分</block>
  <block id="b70ff7d233c0f30cfebf886267311050" category="paragraph"><block ref="b70ff7d233c0f30cfebf886267311050" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d469ac29aab926968093104ad6265df" category="list-text">下一页使您能够配置 NTP 服务器。然后单击“下一步”继续 DNS 设置。 DNS 服务器和域搜索列表应该已经由 DHCP 服务器填充。单击“下一步”接受默认设置并继续。</block>
  <block id="97a60c27b370d45c17075cff06f473a3" category="list-text">对于向导的剩余部分，单击“下一步”继续完成高级对等设置，其配置超出了本文档的范围。然后单击“完成”退出向导。</block>
  <block id="0953ce81fac634b21f33efe8dee24c28" category="list-text">为 Anthos 管理员集群和环境中部署的每个用户集群创建单独的分区。单击左侧菜单中的“系统”，导航到“用户”，然后单击“分区列表”。</block>
  <block id="ad99125325ea694a08a4db92eabb18a1" category="inline-image-macro">Big-IP 配置，第 11 部分</block>
  <block id="20b3d0d7160e29219d8972e307bf05a7" category="paragraph"><block ref="20b3d0d7160e29219d8972e307bf05a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99a0344c261b0475e6caf01bb585530f" category="list-text">显示的屏幕仅显示当前的公共分区。点击右侧的创建，创建第一个附加分区，并命名为<block ref="7b8bd901f7c351d00688bb6fecf79a3c" prefix=" " category="inline-code"></block>。然后单击重复，并将分区命名为<block ref="b328b4839c0f0e2bfc22ab6fca60065e" prefix=" " category="inline-code"></block>。再次单击重复按钮以命名下一个分区<block ref="916e48fa5c2bc8c7765c99a8f011dccb" prefix=" " category="inline-code"></block>。最后单击“完成”以完成向导。分区列表屏幕返回，其中列出了所有分区。</block>
  <block id="938c47fe40c045ae4bc242bf2339ab01" category="inline-image-macro">Big-IP 配置，第 12 部分</block>
  <block id="5a04cbd2b53a64ab71c77e9e71f9bcda" category="paragraph"><block ref="5a04cbd2b53a64ab71c77e9e71f9bcda" category="inline-image-macro-rx" type="image"></block></block>
  <block id="616e4c989df3c842830310568b54cee6" category="section-title">与 Anthos 集成</block>
  <block id="1dc19630e1d9c7f2a85a541796c5ec51" category="paragraph">每个配置文件中都有一个部分，分别针对管理员集群和您选择部署的每个用户集群，以配置负载均衡器，以便由 Anthos On Prem 管理。</block>
  <block id="38779167fbee63015f17c4c1b453dd32" category="paragraph">以下脚本是 GKE-Admin 集群分区配置的示例。需要取消注释和修改的值以粗体显示如下：</block>
  <block id="bbdfa4f0841eb6d317a11ae76992b8b8" category="summary">本节专门为想要使用NetApp部署定制 Anthos 的用户探索负载均衡器选项。</block>
  <block id="288c554e356764c1144e77f0d78f97bf" category="doc">探索负载均衡器选项</block>
  <block id="807a04fd6be3315608f66b00ab708987" category="paragraph">部署在 Anthos 中的应用程序通过部署在 Anthos 本地环境中的负载均衡器提供的服务向全世界公开。</block>
  <block id="b935e49429349d1edf159cd09a0b8ff5" category="paragraph">以下页面包含有关 Anthos with NetApp解决方案中验证的负载均衡器选项的更多信息：</block>
  <block id="5690bda4f5bf6f785884d9163cb5d7e1" category="list-text"><block ref="5690bda4f5bf6f785884d9163cb5d7e1" category="inline-link-macro-rx"></block></block>
  <block id="a8fba1abc3fbaa027d18daed3f6e170d" category="inline-link-macro">安装 MetalLB 负载均衡器</block>
  <block id="31001ebd2abf7634579201839add9d16" category="list-text"><block ref="31001ebd2abf7634579201839add9d16" category="inline-link-macro-rx"></block></block>
  <block id="b0215348c4b61c9ef3af7e95c45db79b" category="inline-link-macro">安装 SeeSaw 负载均衡器</block>
  <block id="418cf15cfefcd62c609f38705f650fe4" category="list-text"><block ref="418cf15cfefcd62c609f38705f650fe4" category="inline-link-macro-rx"></block></block>
  <block id="7eba670f1ea5a6e2fba9cff6b6399064" category="summary">本页详细介绍了 MetalLB 负载均衡器的安装和配置说明。</block>
  <block id="48501496ee9b06b63701de94b6ffc3a5" category="paragraph">本页列出了 MetalLB 托管负载均衡器的安装和配置说明。</block>
  <block id="32333b5f74abf17bffedb6e7abeb7b5f" category="section-title">安装 MetalLB 负载均衡器</block>
  <block id="ccd779a5e754b22c1589256334866c0a" category="paragraph">MetalLB 负载均衡器与 VMware 上的 Anthos Clusters 完全集成，并从 1.11 版本开始作为管理员和用户集群设置的一部分执行自动部署。相应的文本块<block ref="c6ce65430f0e0c334f6b50da737f2e9b" prefix=" " category="inline-code"></block>您必须修改这些配置文件才能提供负载均衡器信息。它在您的 Anthos 集群上自托管，而不需要像其他受支持的负载均衡器解决方案那样部署外部资源。它还允许您创建一个 IP 池，该 IP 池会在不在云提供商上运行的集群中创建负载均衡器类型的 Kubernetes 服务时自动分配地址。</block>
  <block id="b938ac6243408826bd53c58d2a6a6f1f" category="paragraph">为 Anthos 管理员启用 MetalLB 负载均衡器时，您必须修改<block ref="d4b71de62fea2275aed3155c187cb766" prefix=" " category="inline-code"></block>存在于<block ref="b58bb01ef49e2b97a31ca0536ef027fd" prefix=" " category="inline-code"></block>文件。您必须修改的唯一值是设置<block ref="0256ba7412d85da2acbcf1930256c21b" prefix=" " category="inline-code"></block>地址，然后设置<block ref="c4b58542f9e0392c2110da5afb7437af" prefix=" " category="inline-code"></block>作为 MetalLB。请参阅以下代码片段作为示例：</block>
  <block id="79fdf71abab382ca3fbab93d863f835c" category="paragraph">为 Anthos 用户集群启用 MetalLB 负载均衡器时，每个集群中有两个区域<block ref="aba03e96a3a4305fd83dc510e1607415" prefix=" " category="inline-code"></block>您必须更新的文件。首先，以类似于<block ref="b58bb01ef49e2b97a31ca0536ef027fd" prefix=" " category="inline-code"></block>文件，您必须修改<block ref="0256ba7412d85da2acbcf1930256c21b" prefix=" " category="inline-code"></block>，<block ref="4fa041ebf362f3965af3570da03ef0fe" prefix=" " category="inline-code"></block> ， 和<block ref="c4b58542f9e0392c2110da5afb7437af" prefix=" " category="inline-code"></block>中的值<block ref="d4b71de62fea2275aed3155c187cb766" prefix=" " category="inline-code"></block>部分。请参阅以下代码片段作为示例：</block>
  <block id="c173f58ae6718fb7dc80d6ddb9b392e5" category="admonition">ingressVIP IP 地址必须存在于稍后配置中分配给 MetalLB 负载均衡器的 IP 地址池中。</block>
  <block id="77960f17a334c28c4bacd9515ac55817" category="paragraph">然后你需要导航到<block ref="0ea77e636e8d12d9ce07b2dab6268822" prefix=" " category="inline-code"></block>小节并修改<block ref="045d68a12437e8212f812d2bf506dbc0" prefix=" " category="inline-code"></block>通过在<block ref="146d8d83713f4abd99cafc739779598c" prefix=" " category="inline-code"></block>多变的。您还必须创建一个 IP 地址池，MetalLB 可以通过为以下地址提供一个范围来将其分配给 LoadBalancer 类型的服务：<block ref="336f9e008319434aa314ef3c1b8a682f" prefix=" " category="inline-code"></block>多变的。</block>
  <block id="8dfd015968f24ba6c3e2d8386cd40cbe" category="admonition">地址池可以像示例中那样以范围的形式提供，将其限制为特定子网中的多个地址，或者如果整个子网可用，则可以以 CIDR 表示法的形式提供。</block>
  <block id="ea4a20324a094d5f515252d5669a60ca" category="list-text">当创建 LoadBalancer 类型的 Kubernetes 服务时，MetalLB 会自动为服务分配一个 externalIP，并通过响应 ARP 请求来通告该 IP 地址。</block>
  <block id="13a74472f5a5018f40319d30a728d03e" category="paragraph">NetApp ONTAP是一款功能强大的存储软件工具，具有直观的 GUI、具有自动化集成的 REST API、基于 AI 的预测分析和纠正措施、无中断硬件升级和跨存储导入等功能。</block>
  <block id="1e16ebc829d46d68a51d55ac22293b1e" category="list-text">与公共云无缝集成，实现数据分层和保护。  ONTAP还提供强大的数据保护功能，使其在任何环境中都脱颖而出：</block>
  <block id="f1bcd982a417f561201a3262b52a84d7" category="list-text">* NetApp SnapLock。*通过将不可重写的数据写入在指定时间内无法覆盖或擦除的特殊卷，可以有效地管理这些数据。</block>
  <block id="96f474208f638efbbd85fac3a46a2ed4" category="paragraph">有关ONTAP的更多信息，请参阅<block ref="eb1214e3900207403ada8715d3d4c764" category="inline-link-rx"></block>。</block>
  <block id="05c10047ab7b3613fff3f97b9c177de4" category="paragraph"><block ref="05c10047ab7b3613fff3f97b9c177de4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="678cbe37bb872d145128736b4650ef68" category="paragraph">NetApp提供强大的全闪存 (AFF) 和横向扩展混合 (FAS) 存储平台，这些平台具有低延迟性能、集成数据保护和多协议支持等特点。</block>
  <block id="b321b5ab2c84403c3a4dd82bce8757ab" category="paragraph">这两种系统均采用NetApp ONTAP数据管理软件，这是业界最先进的数据管理软件，具有高可用性、云集成、简化的存储管理，可提供数据结构所需的企业级速度、效率和安全性。</block>
  <block id="a9b90f3200d3b94ea47e85db3a435816" category="paragraph">有关 NETAPP AFF和FAS平台的更多信息，请单击<block ref="629508ef5a91b5835f70894f34eed424" category="inline-link-rx"></block>。</block>
  <block id="b008e805d13d953ddb5cbb220d8ef9b6" category="paragraph">ONTAP Select是NetApp ONTAP的软件定义部署，可以部署到您环境中的虚拟机管理程序上。它可以安装在 VMware vSphere 或 KVM 上，并提供基于硬件的ONTAP系统的全部功能和体验。</block>
  <block id="f0f4b6de2040d7dc57e7f4f6baee7ec3" category="paragraph">NetApp Cloud Volumes ONTAP是NetApp ONTAP的云部署版本，可部署在许多公共云中，包括：Amazon AWS、Microsoft Azure 和 Google Cloud。</block>
  <block id="957478b81604fc0a340d863f3b89a2da" category="summary">NetApp拥有多个符合我们的Trident Storage Orchestrator 要求的存储平台，可以为部署在 Anthos 上的应用程序配置存储。</block>
  <block id="77caa49b32b4fc8ce3276158f57f9229" category="doc">NetApp存储概述</block>
  <block id="4513c9751d66d2e2c06342e8efd125d2" category="paragraph">NetApp拥有多个符合我们的Trident Storage Orchestrator 要求的存储平台，可以为作为容器部署的应用程序配置存储。</block>
  <block id="205648ecca5c254d12179eaccc5a3309" category="paragraph"><block ref="205648ecca5c254d12179eaccc5a3309" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f772b6350e0abf44f0cfee9e8b1c0ac3" category="list-text">Google Cloud NetApp Volumes (GCP) 和Azure NetApp Files在云中提供基于文件的存储。</block>
  <block id="a59d40ff49aa25bc9e110fac9a9d1bdf" category="list-text">Amazon FSx ONTAP是 AWS 上的一项完全托管服务，为基于文件的用例提供存储。</block>
  <block id="cb050b8fb8c2102a0ab337119eb19f0f" category="admonition">NetApp产品组合中的每个存储系统都可以简化数据管理和内部站点与云之间的移动，确保您的数据位于应用程序所在的位置。</block>
  <block id="7768400c23564e6141f156e229944614" category="summary">Anthos 将开发和 IT 运营统一在单一平台上，以便在本地和混合云基础架构上一致地构建、部署和管理应用程序。  Anthos 以虚拟或裸机格式将 GKE Kubernetes 集群直接带入您的数据中心环境。</block>
  <block id="346f4310b75e0cc51fdf8a1db6149978" category="doc">Anthos 概览</block>
  <block id="89ef90a5be38c2b656627392eee1a2a9" category="paragraph">Anthos with NetApp是一种经过验证的最佳实践混合云架构，用于以可靠且值得信赖的方式部署本地 Google Kubernetes Engine (GKE) 环境。此NetApp验证架构参考文档既可作为设计指南，也可作为部署到裸机和虚拟环境的 Anthos with NetApp解决方案的部署验证。本文档中描述的架构已经过NetApp和 Google Cloud 的主题专家验证，可提供在企业数据中心环境中运行 Anthos 的优势。</block>
  <block id="72efb373513d77a08aa5dd7e375a418f" category="section-title">安托斯</block>
  <block id="5b1a0b45a2d6518143a0c9b299e736b4" category="paragraph">Anthos 是一种混合云 Kubernetes 数据中心解决方案，使组织能够构建和管理现代混合云基础架构，同时采用专注于应用程序开发的敏捷工作流程。 Anthos on VMware 是一种基于开源技术的解决方案，在基于 VMware vSphere 的基础架构中本地运行，可以与 Google Cloud 中的 Anthos GKE 连接和互操作。采用容器、服务网格和其他转换技术使组织能够在本地和基于云的环境中体验一致的应用程序开发周期和可用于生产的工作负载。下图描述了 Anthos 解决方案以及本地数据中心中的部署如何与云中的基础架构互连。</block>
  <block id="001a38f118eab6df015a51079735d9c9" category="paragraph">有关 Anthos 的更多信息，请参阅 Anthos 网站<block ref="984918f1ee4e70aa6181e0564d0768e7" category="inline-link-rx"></block>。</block>
  <block id="ea2625d89edeb5ba9cb41ca58df54e93" category="paragraph">Anthos 提供以下功能：</block>
  <block id="c10e0a21a04a29dfca9609b3ec4bab76" category="list-text">Anthos 配置管理。自动化混合 Kubernetes 部署的策略和安全。</block>
  <block id="e8c4d5cbaf3932ffa3fa7a097bff923e" category="list-text">*Anthos 服务网格。*通过 Istio 驱动的服务网格增强应用程序的可观察性、安全性和控制力。</block>
  <block id="ed4b514e0a9558c7acbec81ecc5fe0e1" category="list-text">*适用于 Kubernetes 应用程序的 Google Cloud Marketplace。*可供轻松部署的精选容器应用程序目录。</block>
  <block id="b2f70465e1ea6dcdc0843dc8ed3b7f55" category="list-text">*迁移至 Anthos。*物理服务和虚拟机从本地自动迁移到云端。</block>
  <block id="52bc26b321a0b4cd1f91f7961a0783c8" category="list-text">*Stackdriver。*  Google 提供的用于记录和监控云实例的管理服务。</block>
  <block id="fb067dfce4b20d2e2c1fda3014dad1ce" category="paragraph"><block ref="fb067dfce4b20d2e2c1fda3014dad1ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a4777b2291cea091fd5877d9051ff1a3" category="section-title">Anthos 的部署方法</block>
  <block id="0b7914a951055f790f36ed2e8e90bf01" category="section-title">VMware 上的 Anthos 集群</block>
  <block id="1702288bedca391f972e58fc0561e9ed" category="paragraph">对于大多数最终用户 Kubernetes 工作负载而言，部署到 VMware vSphere 环境的 Anthos 集群易于部署、维护和快速扩展。</block>
  <block id="3ff462b8be3eae55940a9720d059b948" category="paragraph">有关使用NetApp部署的 VMware Anthos 集群的更多信息，请访问页面<block ref="462985cd6fc7eed8464102a5c28dbadf" category="inline-link-macro-rx"></block>。</block>
  <block id="45a6d5427a773bd692ba6faf09ae9200" category="paragraph">部署在裸机服务器上的 Anthos 集群与硬件无关，并允许您选择针对个性化用例优化的计算平台。</block>
  <block id="e3836069d2d4813b8bc05aa64f38b266" category="paragraph">有关使用NetApp部署的 Anthos on Bare Metal 集群的更多信息，请访问<block ref="f3e30699ba84df9264e546fedad66564" category="inline-link-macro-rx"></block>。</block>
  <block id="872c01365a01300e2a8a772cd65e51b1" category="summary">本页详细介绍了 SeeSaw 负载均衡器的安装和配置说明。</block>
  <block id="1ffbf83c6ff924ed568f0f88c922ac88" category="paragraph">本页列出了 SeeSaw 托管负载均衡器的安装和配置说明。</block>
  <block id="2498fd03c323b46a1d209aa07977fa55" category="paragraph">Seesaw 是安装在 VMware Anthos Clusters 环境中（版本 1.6 至 1.10）的默认托管网络负载均衡器。</block>
  <block id="1de0bfc08643a28f36a8fcd5662e17f0" category="section-title">安装 SeeSaw 负载均衡器</block>
  <block id="7e83a37698e612c5150b6c3a383cf59b" category="paragraph">SeeSaw 负载均衡器与 VMware 上的 Anthos Clusters 完全集成，并作为管理员和用户集群设置的一部分执行自动部署。有文本块<block ref="c6ce65430f0e0c334f6b50da737f2e9b" prefix=" " category="inline-code"></block>必须修改配置文件以提供负载均衡器信息，然后在集群部署之前还有一个额外的步骤，使用内置的<block ref="fb87177c7509d5723aa1bbc241ec2f7b" prefix=" " category="inline-code"></block>工具。</block>
  <block id="3d4d180e7186ad7195269636446a1c4c" category="admonition">SeeSaw 负载均衡器可以以 HA 或非 HA 模式部署。为了进行此验证，SeeSaw 负载均衡器以非 HA 模式部署，这是默认设置。出于生产目的， NetApp建议在 HA 配置中部署 SeeSaw，以实现容错和可靠性。</block>
  <block id="613f73d2545e2e4434e09e47400d96a6" category="paragraph">每个配置文件中都有一个部分，分别用于管理员集群和您选择部署的每个用户集群，以配置负载均衡器，以便由 Anthos On-Prem 管理。</block>
  <block id="aa2bdb165616b7814c712fd55ecd1ce8" category="paragraph">以下文本是 GKE-Admin 集群分区配置的示例。需要取消注释和修改的值以粗体显示如下：</block>
  <block id="71f92aabf82706f3d2a00af1b3a34f95" category="paragraph">SeeSaw 负载均衡器还具有单独的静态<block ref="d218bc0ba36a7fb2d7aea32df7659206" prefix=" " category="inline-code"></block>您必须为每个集群部署提供该文件。该文件必须位于与<block ref="c6ce65430f0e0c334f6b50da737f2e9b" prefix=" " category="inline-code"></block>部署文件，或者必须在上面的部分指定完整路径。</block>
  <block id="cda0b5b1eab2f931076d0edc39a6920a" category="paragraph">样本<block ref="1db10b36979626249cbedcd8e8818146" prefix=" " category="inline-code"></block>文件类似于以下脚本：</block>
  <block id="b7e1a8e2925f8cb0b4f88b8532edd6d7" category="admonition">该文件提供了负载均衡器向底层集群提供的网络的网关和网络掩码，以及为运行负载均衡器而部署的虚拟机的管理 IP 和主机名。</block>
  <block id="d46a5e1e10f8a4a33306d0696cef14f5" category="summary">本参考文档提供了 Anthos with NetApp解决方案的部署验证，该解决方案已部署在多个数据中心环境中，并经过NetApp和我们的工程合作伙伴的验证。</block>
  <block id="9d171bf7d3d65afb2e7e56d43b4b9ed5" category="doc">NVA-1165：Anthos 与NetApp的合作</block>
  <block id="dbadbc59fa29afd33e371d5285fde4cf" category="paragraph">Banu Sundhar 和 Suresh Thoppay， NetApp</block>
  <block id="09b5959687a5ebe98c383e8290a7e8ec" category="paragraph">本参考文档提供了NetApp及其工程合作伙伴在多数据中心环境中部署 Anthos with NetApp解决方案时进行的部署验证。它还详细介绍了通过使用Trident存储编排器来管理持久存储，实现与NetApp存储系统的存储集成。最后，我们探索并记录了许多解决方案验证和实际用例。</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">使用情形</block>
  <block id="9b3053daf2ec8e22b4a577982f08f107" category="paragraph">Anthos with NetApp解决方案旨在通过以下用例为客户提供卓越的价值：</block>
  <block id="0d3aabd1c9ad032e07b543d0aff99cb1" category="list-text">使用提供的<block ref="f9d1b8d1854865b695167e2c5829f633" prefix=" " category="inline-code"></block>裸机上的工具或<block ref="fb87177c7509d5723aa1bbc241ec2f7b" prefix=" " category="inline-code"></block>VMware vSphere 上的工具。</block>
  <block id="cbc828fed325d3834b2bf3b1f2b5e639" category="inline-link">库贝维尔特</block>
  <block id="341508ebeee3f32bbf4f6fee6cb456a0" category="list-text">结合企业容器和虚拟化工作负载的强大功能，Anthos 虚拟部署在 vSphere 或裸机上，<block ref="3149dc0a8051bd1d167afbb1fe9775d9" category="inline-link-rx"></block> 。</block>
  <block id="7abf65c31b8f3f6197b9957f7e0ea40c" category="list-text">真实的配置和用例突出显示了与NetApp存储和Trident（Kubernetes 的开源存储编排器）一起使用时的 Anthos 功能。</block>
  <block id="f08561bbd831bfa1923e6acf045ef13a" category="section-title">商业价值</block>
  <block id="ee1ef628edbfb6bb102163064fbd3d8e" category="paragraph">Anthos with NetApp解决方案承认这些挑战，并提出了一种解决方案，通过在客户选择的数据中心环境中实施 Anthos on prem 的全自动部署来帮助解决每个问题。</block>
  <block id="a1f13b9a0674cc0beb81e208dfb68d05" category="section-title">技术概述</block>
  <block id="22acab0d08b6253aa6c7d6be2fd3f4d3" category="paragraph">Anthos with NetApp解决方案由以下主要组件组成：</block>
  <block id="c6e52ea38355d1c4527e874a4c673b5b" category="section-title">Anthos On Prem</block>
  <block id="385c65f480dfcbc7cb530a2c6c807ae9" category="paragraph">Anthos On Prem 是一个完全受支持的企业级 Kubernetes 平台，可以部署在 VMware vSphere 虚拟机管理程序中，也可以部署在您选择的裸机基础架构上。</block>
  <block id="81f74b2a02db97d708bd7cbf08d2463a" category="section-title">NetApp存储系统</block>
  <block id="5534dc7dafa6f321e51a117c53baff02" category="paragraph">NetApp拥有多种非常适合企业数据中心和混合云部署的存储系统。  NetApp产品组合包括NetApp ONTAP、 Cloud Volumes ONTAP、 Google Cloud NetApp Volumes、 Azure NetApp Files和 FSx ONTAP for NetApp ONTAP存储系统，所有这些产品都可以为容器化应用程序提供持久存储。</block>
  <block id="aa4193984de53d2a6d8fcc2d77c09bda" category="paragraph">欲了解更多信息，请访问NetApp网站<block ref="95da63d781dead5af723667a3f69096a" category="inline-link-rx"></block>。</block>
  <block id="069b087e8e1e69cc928f18a85f683523" category="section-title">NetApp存储集成</block>
  <block id="0d9d3475cd793588b3ac71ca4ce9696f" category="paragraph">Trident是一个开源且完全支持的容器和 Kubernetes 发行版（包括 Anthos）存储编排器。</block>
  <block id="aa44798f04a58b33c3699abd02a59c57" category="paragraph">本节专门介绍实际用户在将此解决方案部署到生产中时可能需要执行的自定义，例如创建专用私有映像注册表或部署自定义负载均衡器实例。</block>
  <block id="382742bb5fff6a719c144a0a01cd17e3" category="section-title">已验证版本的当前支持矩阵</block>
  <block id="57f64c5c85667657a2c67b472c545e5a" category="paragraph">看<block ref="0c665fc00d0d39d9ca9d157ca926b271" category="inline-link-rx"></block>用于已验证版本的支持矩阵。</block>
  <block id="21e8ffc6f822b183559b39b43061c1d2" category="summary">NetApp提供了多种产品来帮助我们的客户在基于容器的环境（如 Anthos）中编排和管理持久数据。</block>
  <block id="2515fbef39d57544723402c683215c64" category="doc">NetApp存储集成概述</block>
  <block id="5b9abd64aa4865a31820ebec932e54f2" category="section-title">Anthos Ready 存储合作伙伴计划。</block>
  <block id="7a8b9d74335d44fbaaf7f5d5aebf0cfd" category="paragraph">Google Cloud 会通过其 Anthos Ready 存储合作伙伴计划定期请求更新合作伙伴存储与 Anthos 新版本的集成验证。可以找到当前已验证的存储解决方案、CSI 驱动程序、可用功能以及支持的 Anthos 版本的列表<block ref="0ccc93736ba595a77f031ff105798de0" category="inline-link-rx"></block>。</block>
  <block id="a2671785dbaedf79e11966b715bd2597" category="paragraph">NetApp每季度都会定期遵守要求，以验证我们符合Trident CSI 的存储编排器和带有 Anthos 版本的ONTAP存储系统。</block>
  <block id="f30969a97d147237c7c42a7369a86e66" category="paragraph">下表包含NetApp和NetApp合作伙伴工程师在 Anthos Ready 存储合作伙伴计划中为验证NetApp Trident CSI 驱动程序和功能集而测试的 Anthos 版本：</block>
  <block id="02046ad0e82ff27f6e1774aa588fd853" category="cell">部署类型</block>
  <block id="1552eec8291d257c4b855dcfa425d802" category="cell">存储系统</block>
  <block id="e64d14806cb56de755bd93bd36d8af66" category="cell">Trident版本</block>
  <block id="888a77f5ac0748b6c8001822417df8b6" category="cell">协议</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="cell">功能</block>
  <block id="56079badd056a19303cc26e6a4fcc7e0" category="cell">VMware</block>
  <block id="0f07773d1d3bbe9fd494333211f6feaa" category="cell">1.28</block>
  <block id="594e1ec3daa27e540baa061f731f028f" category="cell">ONTAP 9.12.1</block>
  <block id="4e9b156e7e2788c8cd4b0877fd922657" category="cell">24.02</block>
  <block id="c07ee5debf5f3a3fef16c1ee5e8e4942" category="cell">NAS</block>
  <block id="7f7813d8ff1a7fae9bca0ef452fb1346" category="cell">多写入器、卷扩展、快照、PVCDataSource</block>
  <block id="62a0282d39568be094470486eaf70c4f" category="cell">SAN</block>
  <block id="8c56d327dfefc3dfd3c4c4fbe25a8bd1" category="cell">原始块、卷扩展、快照、PVCDataSource</block>
  <block id="0083e57a258edd18b949d3afbf6cfc2a" category="cell">1.15</block>
  <block id="1a3a2b5e6c52142797bb5c00594e2a3c" category="cell">23.04</block>
  <block id="8dfda84fc7f59655e20a770603bf9231" category="cell">23.01</block>
  <block id="9fe6d7d50b2c6958117a19834e038c82" category="cell">1.13</block>
  <block id="775d4bb28d257a6aa23992563a82c458" category="cell">22.10</block>
  <block id="cb9cc8981898224a2fe45ac6ff7d4244" category="cell">1.11</block>
  <block id="74eb178224c5fa701fbcd96998feaafe" category="cell">ONTAP 9.9.1</block>
  <block id="e764fe6b8f8825a307a87cedbef45678" category="cell">22.04</block>
  <block id="e5db66c80967b6fa50a1eede0ce50e2f" category="cell">多写入器、卷扩展、快照</block>
  <block id="4c606f506efd3b3bef3499e3342b5933" category="cell">原始块、卷扩展、快照</block>
  <block id="e0076fd5294e757abc41b2328ed8c57d" category="cell">元素 12.3</block>
  <block id="a2da3c930443e5d1421caec9ee18a376" category="cell">裸机</block>
  <block id="bdca6efb043178ef172612dd1e173dde" category="cell">1.10</block>
  <block id="2abfff2974f589f7a217325f304e0ec5" category="cell">ONTAP 9.8</block>
  <block id="955ddf0f7e289ee80cdea4b5324b620d" category="cell">22.01</block>
  <block id="84aafd4e962655f32c5bdea750278fba" category="paragraph">NetApp提供了多种产品来帮助您在基于容器的环境（如 Anthos）中编排和管理持久数据。</block>
  <block id="822a22bf8b93f7025f7320ca5a771bd4" category="paragraph">NetApp Trident是一个开源的、完全支持的存储编排器，适用于容器和 Kubernetes 发行版（包括 Anthos）。欲了解更多信息，请访问Trident网站<block ref="845024b96ab150d9f628b33995c60669" category="inline-link-rx"></block>。</block>
  <block id="ea3f2894c4df21a157c45dcbcf989bda" category="paragraph">以下页面包含有关NetApp产品的更多信息，这些产品已在 Anthos with NetApp解决方案中经过应用程序和持久存储管理验证。</block>
  <block id="8e0bd613649f232fe1f718134898ea21" category="summary">要实现Trident与NetApp ONTAP存储系统的集成，您必须创建一个能够与存储系统通信的后端。</block>
  <block id="60423d24e49c8db4836be0abd09fb78d" category="doc">NetApp ONTAP iSCSI 配置</block>
  <block id="3ca99f0e09d3b1ea097a113dd72c9317" category="list-text">下载的安装档案中提供了示例后端文件<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block>文件夹层次结构。对于服务于 iSCSI 的NetApp ONTAP系统，复制<block ref="684351d8ace6c8daa15d6a5ec881647e" prefix=" " category="inline-code"></block>文件到您的工作目录并编辑该文件。</block>
  <block id="fa346018b8222fdc195d0b73016cf5a0" category="list-text">编辑此文件中的 managementLIF、dataLIF、svm、用户名和密码值。</block>
  <block id="38ace6c607c7db13cd4cc319f9b0225b" category="list-text">有了这个后端文件，运行以下命令来创建您的第一个后端。</block>
  <block id="d8f188eff4c16fa87dd87f51db847f73" category="list-text">创建后端后，接下来必须创建存储类。与后端一样，有一个示例存储类文件，可以根据 sample-inputs 文件夹中提供的环境进行编辑。将其复制到工作目录并进行必要的编辑以反映创建的后端。</block>
  <block id="eb22c0d536e50f388da6dfd91ba4c0b6" category="list-text">对此文件唯一需要做的编辑是定义<block ref="55b56fb238360663afa6230ad82e74a0" prefix=" " category="inline-code"></block>将值设置为新创建的后端的存储驱动程序的名称。还要注意名称字段值，该值必须在后续步骤中引用。</block>
  <block id="da0289d58f35e36d18325d6e8038b226" category="admonition">有一个可选字段称为<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>这是在这个文件中定义的。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（XFS、ext4 等），也可以将其删除以允许工作节点操作系统决定使用哪个文件系统。</block>
  <block id="00d32067724b7191cb5b0ffaf99cc3fe" category="list-text">运行<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>命令来创建存储类。</block>
  <block id="71cb54ab06aa16af27a0ec2157972648" category="list-text">创建存储类后，您必须创建第一个持久卷声明 (PVC)。有一个示例<block ref="a46b72c0e3ff39640d78567a663da1aa" prefix=" " category="inline-code"></block>也可用于执行位于 sample-inputs 中的此操作的文件。</block>
  <block id="afc499f2f95809cedce5c8922067065f" category="list-text">对此文件唯一需要做的编辑是确保<block ref="ee822781a3bd0ae0f8f6331dc4865d9c" prefix=" " category="inline-code"></block>字段与刚刚创建的字段匹配。  PVC 定义可以根据要配置的工作负载的需要进一步定制。</block>
  <block id="36a95a56c85c06906ce9ed37f6c88bbe" category="list-text">通过发出<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>命令。创建可能需要一些时间，具体取决于所创建的备份卷的大小，因此您可以在创建完成时观察该过程。</block>
  <block id="cbaa3aa588b8aa5c85dca443c15a0195" category="doc">NetApp ONTAP NFS 配置</block>
  <block id="89441fb0b16307f49090afa2b479b9fa" category="list-text">下载的安装档案中提供了示例后端文件<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block>文件夹层次结构。对于服务于 NFS 的NetApp ONTAP系统，复制<block ref="d897e4d05156cbf9998e98200d6190aa" prefix=" " category="inline-code"></block>文件到您的工作目录并编辑该文件。</block>
  <block id="87f6ff6bf74013e1dfe6df49a1cf1986" category="list-text">编辑此文件中的 backendName、managementLIF、dataLIF、svm、username 和 password 值。</block>
  <block id="f897eefba2c59919d6493db4825e2db2" category="admonition">最佳做法是将自定义 backendName 值定义为 storageDriverName 和为 NFS 提供服务的 dataLIF 的组合，以便于识别。</block>
  <block id="00d6947fd6a153943286b857dcd0f339" category="admonition">有一个可选字段称为<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>这是在这个文件中定义的。可以在 NFS 后端删除此行。</block>
  <block id="38371fce1a5a5624906f4174135ca977" category="summary">Trident是一个完全受支持的开源存储编排器，适用于容器和 Kubernetes 发行版（包括 Anthos）。</block>
  <block id="1fdd8c73a319eed7bf9c10862e3ccde5" category="doc">Trident概述</block>
  <block id="b01daa55b9d9959fd631c89839b1cd32" category="paragraph">Trident是一个完全受支持的开源存储编排器，适用于容器和 Kubernetes 发行版（包括 Anthos）。  Trident可与整个NetApp存储产品组合配合使用，包括NetApp ONTAP，并且还支持 NFS 和 iSCSI 连接。  Trident允许最终用户从其NetApp存储系统配置和管理存储，而无需存储管理员的干预，从而加速 DevOps 工作流程。</block>
  <block id="e16f8b7c3b79f3d80b3d5b5862b4481a" category="paragraph">管理员可以根据项目需求和存储系统模型配置多个存储后端，以实现高级存储功能，包括压缩、特定磁盘类型和保证一定性能水平的 QoS 级别。定义完成后，开发人员可以在他们的项目中使用这些后端来创建持久卷声明 (PVC) 并根据需要将持久存储附加到他们的容器。</block>
  <block id="cacc5da01514f9fa700d86e18966b3ef" category="paragraph"><block ref="cacc5da01514f9fa700d86e18966b3ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="783c5d4bcd70f34a1ac53de76b17e00d" category="paragraph">最新版本的Trident的文档可以在<block ref="845024b96ab150d9f628b33995c60669" category="inline-link-rx"></block>。已测试过哪个版本的Trident以及可以找到哪个 Kubernetes 发行版的支持矩阵<block ref="34562000b9988739736848a0014e5230" category="inline-link-rx"></block>。</block>
  <block id="b62bb4786ef52ad76706950add6991dd" category="paragraph">从 20.04 版本开始， Trident设置由Trident操作员执行。该操作员使大规模部署变得更容易，并提供额外的支持，包括作为Trident安装的一部分部署的 pod 的自我修复。</block>
  <block id="1efa4d2f8950cdd5154a6c130953c9f2" category="paragraph">随着 22.04 版本的发布，Helm 图表已可用，以简化Trident Operator 的安装。</block>
  <block id="d5ceedf0fbe688f1315aeef68b4bd00d" category="paragraph">有关Trident安装的详细信息，请参阅<block ref="df28848dc0c60e349970187bfd75a0df" category="inline-link-rx"></block>。</block>
  <block id="6cfca408e9e3b476e6440302dbe3a550" category="section-title">创建存储系统后端</block>
  <block id="6d82ca16bfbce249e1f9ea541bff13ff" category="inline-link-macro">创建后端。</block>
  <block id="0ce840bddfd38211a3fa14afcf54b563" category="paragraph">完成Trident Operator 安装后，您必须为正在使用的特定NetApp存储平台配置后端。按照下面的链接继续设置和配置Trident。<block ref="6afa050ddd54f270f14f9071966035ab" category="inline-link-macro-rx"></block></block>
  <block id="14f4c7abe09c4481722f1fa6563f2604" category="section-title">创建存储类</block>
  <block id="f1e3764062d0208c91b1cbb929dbe6c4" category="paragraph">创建后端后，您必须创建一个存储类，Kubernetes 用户在需要卷时将指定该存储类。 Kubernetes 用户通过使用持久卷声明 (PVC) 来配置卷，通过名称指定存储类。按照下面的链接创建存储类。<block ref="d71f4f7b9c3f7c9426171d42e12723d2" category="inline-link-macro-rx"></block></block>
  <block id="50cbd0d28725f746b370915ee052232c" category="section-title">动态配置卷</block>
  <block id="72407fd74e9ce26b706ed85bc90bd124" category="inline-link-macro">创建 PVC</block>
  <block id="54fc27fa939861851f69424ace384dc2" category="paragraph">您必须使用存储类创建 Kubernetes 持久卷声明 (PVC) 对象来动态配置卷。按照下面的链接创建一个 PVC 对象。<block ref="c60059241533eaa052b5302a867dee16" category="inline-link-macro-rx"></block></block>
  <block id="279865aaa331ec925a99c3272eb45478" category="section-title">使用音量</block>
  <block id="fed9c63a200801110024280f08877e16" category="inline-link-macro">将卷挂载到 Pod 中</block>
  <block id="1e2f7a8dd5d4ae913a1fd565f75f47f6" category="paragraph">应用程序可以通过将上述步骤中配置的卷挂载到 pod 中来使用该卷。下面的链接显示了一个示例。<block ref="089227f27218a48e27ca586faba48d0e" category="inline-link-macro-rx"></block></block>
  <block id="70e2a62f68d21714178b04c1c938d7ea" category="section-title">示例配置</block>
  <block id="5f81609404aa3c8258fda936db387e50" category="inline-link-macro">iSCSI 协议的示例清单，window=_blank</block>
  <block id="0e0e30c744337b798d795bb0f72b0366" category="paragraph"><block ref="0e0e30c744337b798d795bb0f72b0366" category="inline-link-macro-rx"></block></block>
  <block id="d51bcf02e4ee8592abc3f54657dde8dd" category="inline-link-macro">nfs 协议的示例清单，window=_blank</block>
  <block id="dbeac2a6da996e718ff03ec5e51a5cc4" category="paragraph"><block ref="dbeac2a6da996e718ff03ec5e51a5cc4" category="inline-link-macro-rx"></block></block>
  <block id="122aacda8785e42ca8fd7bd6ebce84f8" category="summary">VMware vSphere 是一个虚拟化平台，用于集中管理在 ESXi 虚拟机管理程序上运行的大量虚拟化服务器和网络。</block>
  <block id="87f76f310cf20e85a098d49fa77367e5" category="doc">VMware 上的 Anthos 集群</block>
  <block id="305e6830d9a37648b6048edc110fb7e4" category="paragraph">VMware 上的 Anthos 集群是 Google Kubernetes Engine 的扩展，部署在最终用户的私有数据中心。组织可以在本地 Kubernetes 集群中部署旨在在 Google Cloud 容器中运行的相同应用程序。  Anthos on VMware 集群可以部署到您数据中心现有的 VMware vSphere 环境中，从而节省资本支出并实现更快速的部署和扩展操作。</block>
  <block id="b107e7085d2931bbe4118d8c5eed9643" category="paragraph">Anthos clusters on VMware 的部署包括以下组件：</block>
  <block id="305e92355c5c05eac28d2fbad20eaa5c" category="list-text">*Anthos 管理员工作站。*部署主机<block ref="fb87177c7509d5723aa1bbc241ec2f7b" prefix=" " category="inline-code"></block>和<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>可以运行命令来部署并与 Anthos 部署进行交互。</block>
  <block id="3cd74a54f5924b896bf9cb97397e8b35" category="list-text">*管理员集群。*在 VMware 上设置 Anthos 集群时部署的初始集群。该集群管理所有下属用户集群操作，包括部署、扩展和升级。</block>
  <block id="11b774f9c0d1531100a341b6da7d98fa" category="list-text">*用户集群。*每个用户集群都部署有自己的负载均衡器实例或分区，使其可以作为单个用户或组的独立 Kubernetes 集群，从而帮助实现完全多租户。</block>
  <block id="b4dfd3f706cb0162d524cf7c36093e7c" category="paragraph">下图是 Anthos-clusters-on-VMware 部署的描述。</block>
  <block id="e0a89487b2139b200583e1bb08a45a74" category="paragraph"><block ref="e0a89487b2139b200583e1bb08a45a74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="348ed6380fe1c4753877d1f13d95d39a" category="paragraph">Anthos clusters on VMware 具有以下优势：</block>
  <block id="cf97925041bebbd35543bc4fc24fa499" category="list-text">*高级多租户。*可以为每个最终用户分配自己的用户集群，并部署其自己的开发环境所需的虚拟资源。</block>
  <block id="f34111b15d3f3387462dd512dde1392f" category="list-text">*节省成本*最终用户可以通过将多个用户集群部署到同一物理环境并利用自己的物理资源进行应用程序部署（而不是在其 Google Cloud 环境或大型裸机集群上配置资源）来实现显著的成本节省。</block>
  <block id="a6c34625dcf8367e84732b5219f81cb7" category="list-text">*开发然后发布。*在应用程序开发过程中可以使用内部部署，这样可以在云中公开发布应用程序之前，在本地数据中心的隐私环境中测试应用程序。</block>
  <block id="844236b21d302f8c93eda00636abfff8" category="list-text">*安全要求*对安全性有较高要求或敏感数据集无法存储在公共云中的客户可以从其自己的数据中心的安全环境中运行其应用程序，从而满足组织要求。</block>
  <block id="8887a9a417a1629326acdb917d224337" category="section-title">VMware vSphere</block>
  <block id="68bc8529d7c57946fe13e6b3399ee287" category="inline-link">VMware vSphere 网站</block>
  <block id="80888e73d00a224bebfc22e8e4539b6d" category="paragraph">有关 VMware vSphere 的更多信息，请参见<block ref="8e822bbeb5824c0a05189bf9ff98da5c" category="inline-link-rx"></block>。</block>
  <block id="cb4d59b9004b7c584811a3d656f78bc5" category="paragraph">VMware vSphere 提供以下功能：</block>
  <block id="a542faac65568ba146d392d835d7fb33" category="list-text">VMware vCenter 服务器。  VMware vCenter Server 通过单个控制台统一管理所有主机和虚拟机，并汇总集群、主机和虚拟机的性能监控。</block>
  <block id="f89d1a459fed3d81a3b4a7360d0e85fc" category="list-text">VMware vSphere vMotion。  VMware vCenter 允许您根据请求以无中断的方式在集群中的节点之间热迁移虚拟机。</block>
  <block id="4418ae814387892bd88d45091a182234" category="list-text">vSphere 高可用性。为了避免主机发生故障时造成中断，VMware vSphere 允许对主机进行集群化和配置以实现高可用性。因主机故障而中断的虚拟机将在集群中的其他主机上短暂重新启动，从而恢复服务。</block>
  <block id="46b35ead34118cb2c50327c71e4aa640" category="list-text">分布式资源调度程序 (DRS)。可以配置 VMware vSphere 集群来平衡其托管的虚拟机的资源需求。存在资源争用的虚拟机可以热迁移到集群中的其他节点，以确保有足够的资源可用。</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="section-title">操作系统</block>
  <block id="ab7854373386a8b1e9ba4f90bfee6e0a" category="paragraph">VMware 上的 Anthos 集群可以根据客户的选择部署到 vSphere 7 和 8 环境中，以帮助匹配其当前的数据中心基础架构。</block>
  <block id="e7a811d106a4076d6c6992a7b97734a0" category="paragraph">下表列出了NetApp及其合作伙伴用于验证解决方案的 vSphere 版本。</block>
  <block id="0c008dad767075dab996c133e44d5d2f" category="cell">数据中心</block>
  <block id="33fe6d8f3148d10c2ff7ce3ff095dd41" category="cell">8.0.1</block>
  <block id="89f7e5d7117ac9eb1ece116273f5f012" category="paragraph">为了完成 Anthos 与NetApp的部署，使其成为经过全面验证的解决方案， NetApp和我们的合作伙伴工程师已经对用于网络和存储的其他数据中心组件进行了测试。</block>
  <block id="b2311a2cf7a04db2bfe860c3fa17635c" category="cell">硬件组件</block>
  <block id="fe02a8fc8838381700e175498b8e1db0" category="cell">Mellanox</block>
  <block id="7b42b4827c459034b51ee8ce9f497ca3" category="cell">交换机（数据网络）</block>
  <block id="d5cbf018e46e897c3774dc4576d35dbe" category="cell">交换机（管理网络）</block>
  <block id="4c6ba3c2ecfdab7b2b5151a4715c51c0" category="cell">AFF存储系统</block>
  <block id="dd4a9a41d8672c9659041812469e1df2" category="paragraph">下表包括在验证环境中部署的软件版本列表。</block>
  <block id="da0d53141f6343167596fe8598964773" category="cell">软件名称</block>
  <block id="eba1f3287bdc33dfa25c084b5e15a4c5" category="cell">9.12.1</block>
  <block id="50ce33a86e6915635518e9752cf0a12f" category="cell">24.02.0</block>
  <block id="a6eee2bc9df13513ff08680b88b5140c" category="paragraph">在NetApp执行的 Anthos Ready 平台验证期间，实验室环境是根据下图构建的，这使我们能够使用各种NetApp ONTAP存储后端测试多种场景。</block>
  <block id="deea7ba388e7104a54678758ad731de7" category="paragraph"><block ref="deea7ba388e7104a54678758ad731de7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35b5078b5953437a59ffd4f77c464800" category="section-title">网络基础设施支持资源</block>
  <block id="13d18f8604b3585f7ab88b87766a8d38" category="paragraph">在部署 Anthos 之前，应具备以下基础设施：</block>
  <block id="9335616a8b7dc0e6f94fd0c6aa720efe" category="list-text">至少有一个 DNS 服务器提供完整的主机名解析，可从带内管理网络和 VM 网络访问。</block>
  <block id="905a394004d9055ec4708e53880cac66" category="list-text">至少一个可从带内管理网络和 VM 网络访问的 NTP 服务器。</block>
  <block id="92b7a761f185f74bf3bf9d2229c67a28" category="list-text">如果集群需要动态扩展，则 DHCP 服务器可按需提供网络地址租约。</block>
  <block id="447cb4a01965e3df01476db3576e0399" category="list-text">（可选）带内管理网络和 VM 网络的出站互联网连接。</block>
  <block id="a181412a291a7d0ae8a71300abf746b8" category="section-title">生产部署的最佳实践</block>
  <block id="0f19aa91cffca51fd061e34dee1e5c79" category="paragraph">本节列出了组织在将此解决方案部署到生产中之前应考虑的几种最佳实践。</block>
  <block id="8256d4d5c73a64213343972bedd38f45" category="section-title">将 Anthos 部署到至少包含三个节点的 ESXi 集群</block>
  <block id="0dc619d5fd0af9a7a1c5ddea5b3e05a4" category="paragraph">虽然可以在少于三个节点的 vSphere 集群中安装 Anthos 以用于演示或评估目的，但不建议将其用于生产工作负载。虽然两个节点允许基本的 HA 和容错功能，但必须修改 Anthos 集群配置以禁用默认主机亲和性，并且 Google Cloud 不支持这种部署方法。</block>
  <block id="9dc31e1598f94b9476a025632cee3e19" category="section-title">配置虚拟机和主机关联性</block>
  <block id="150754dbd257c09eef8557a399e5ebc2" category="paragraph">通过启用虚拟机和主机亲和性，可以将 Anthos 集群节点分布在多个虚拟机管理程序节点上。</block>
  <block id="c23c2371397ad3490af42526283948a4" category="paragraph">亲和性或反亲和性是一种为虚拟机和/或主机集定义规则的方法，用于确定虚拟机是否在同一主机或组中的主机上一起运行，还是在不同的主机上运行。它通过创建由具有一组相同参数和条件的虚拟机和/或主机组成的亲和性组应用于虚拟机。根据亲和性组中的虚拟机是运行在组内的同一主机上还是运行在组内的多个主机上，还是分别运行在不同的主机上，亲和性组的参数可以定义正亲和性或负亲和性。</block>
  <block id="659aed3f7f249a658860ff0d51cdef11" category="paragraph">要配置亲和性组，请参阅下面适合您的 VMWare vSphere 版本的链接。</block>
  <block id="9934283c0bf98610b4be1803b9ad3430" category="inline-link">vSphere 6.7 文档：使用 DRS 关联性规则</block>
  <block id="bfe724d354657c9ac5cef22bd231f66f" category="inline-link">vSphere 7.0 文档：使用 DRS 关联性规则</block>
  <block id="10c2b11d36730909ac14bcf903f9c456" category="paragraph"><block ref="0817a5be4b4f4733045646ef5cffc66c" category="inline-link-rx"></block> 。<block ref="211975e132e07e8f3a0d0d18ff3759e5" category="inline-link-rx"></block> 。</block>
  <block id="67243afe565a819d977d538c55049340" category="admonition">Anthos 在每个单独的<block ref="c6ce65430f0e0c334f6b50da737f2e9b" prefix=" " category="inline-code"></block>文件自动创建节点亲和性规则，可以根据环境中的 ESXi 主机数量启用或禁用这些规则。</block>
  <block id="77bedaf9f53677fe0de2767932e2bea2" category="summary">阅读博客，了解有关将ONTAP存储与NetApp虚拟化解决方案集成的实用指导和最佳实践。</block>
  <block id="443d1fc79f18c579a33932abbb2d0511" category="doc">阅读NetApp专家的容器解决方案博客</block>
  <block id="9b3421f2a55c6246b7355a42185c1709" category="paragraph">阅读博客，了解有关将ONTAP存储与NetApp容器解决方案集成的实用指导和最佳实践。</block>
  <block id="fa666c258157b1bf20d32ed720fd552c" category="section-title">OpenShift 部署和集成</block>
  <block id="5d75f5aaeff1717868c1534e23d2ac15" category="inline-link-macro">使用新认证的Trident Operator 简化 Red Hat OpenShift 上的Trident安装</block>
  <block id="658f38183b275d6a7dc6d6f85ecd4aec" category="list-text"><block ref="658f38183b275d6a7dc6d6f85ecd4aec" category="inline-link-macro-rx"></block></block>
  <block id="ffda8cbb6134698d32ff5eb9d87ff0d6" category="inline-link-macro">解锁无缝 iSCSI 存储集成：iSCSI ROSA 集群上的 FSxN 指南</block>
  <block id="78e9383c7c5d7be519c9e86b67494581" category="list-text"><block ref="78e9383c7c5d7be519c9e86b67494581" category="inline-link-macro-rx"></block></block>
  <block id="f5c70fb78d7035dbe8369675c9ac9836" category="inline-link-macro">使用托管控制平面的Amazon FSx for NetApp ONTAP与 AWS 上的 Red Hat OpenShift 服务 (ROSA)</block>
  <block id="aa536f5451e07bfafb6934dc651e5caf" category="list-text"><block ref="aa536f5451e07bfafb6934dc651e5caf" category="inline-link-macro-rx"></block></block>
  <block id="ba6fd9874b6697cb1aa44d44e6fee41c" category="inline-link-macro">在 Red Hat OpenShift 上安装NetApp Trident – 如何解决 Docker 的“toomanyrequests”问题！</block>
  <block id="ce1f05b584a4b8ad928c91ed745ca8b5" category="list-text"><block ref="ce1f05b584a4b8ad928c91ed745ca8b5" category="inline-link-macro-rx"></block></block>
  <block id="57f6f27ab521e19b38b9f505e2a80f19" category="section-title">数据保护和备份</block>
  <block id="064eb0be7def019cd697cd0139a667a1" category="inline-link-macro">使用Trident 25.02 对 OpenShift 虚拟化虚拟机进行崩溃一致性备份和恢复操作</block>
  <block id="b3a56474a20cda0629a8e8071f9fc00b" category="list-text"><block ref="b3a56474a20cda0629a8e8071f9fc00b" category="inline-link-macro-rx"></block></block>
  <block id="e198344509e0c390b36395d4132af109" category="inline-link-macro">OpenShift 虚拟化中虚拟机数据保护的备份和恢复选项</block>
  <block id="0629e04dc1aa9dadc6e07088562f0358" category="list-text"><block ref="0629e04dc1aa9dadc6e07088562f0358" category="inline-link-macro-rx"></block></block>
  <block id="9cd99356785dc38a15cde43989f0a3a0" category="section-title">虚拟化和虚拟机操作</block>
  <block id="f053e24d98d9926e6b297c472dc10fd5" category="inline-link-macro">使用 ROSA 上的 OpenShift 虚拟化和Amazon FSx for NetApp ONTAP实时迁移虚拟机</block>
  <block id="091581891f06d3078a22d9ce0f74ee8f" category="list-text"><block ref="091581891f06d3078a22d9ce0f74ee8f" category="inline-link-macro-rx"></block></block>
  <block id="7a10fbde6c85ea2871a3dde163078594" category="inline-link-macro">适用于 OpenShift 虚拟化虚拟机的ONTAP ：无中断卷移动操作由您掌控</block>
  <block id="42d1b195b2673129ae12e838bb7b7a14" category="list-text"><block ref="42d1b195b2673129ae12e838bb7b7a14" category="inline-link-macro-rx"></block></block>
  <block id="31f576f08c7fe191ddeb00ecbb49e8d9" category="section-title">存储集成和性能</block>
  <block id="6d3b254fcc0ec65e40af8a4609458626" category="inline-link-macro">使用 NVMe/TCP 在 VMware 上为现代容器化应用程序使用ONTAP存储</block>
  <block id="086448df12463da4ce3f320cbf050a23" category="list-text"><block ref="086448df12463da4ce3f320cbf050a23" category="inline-link-macro-rx"></block></block>
  <block id="6084df8e3d19bdc55b40a7d00057997f" category="inline-link-macro">ONTAP作为 OpenShift 容器平台中集成映像注册表的后端存储</block>
  <block id="dae2dffe7f752e2ece3cb1aefce17a4f" category="list-text"><block ref="dae2dffe7f752e2ece3cb1aefce17a4f" category="inline-link-macro-rx"></block></block>
  <block id="da486bad0d4eece3276578e7d93bcd22" category="inline-link-macro">NetApp ONTAP兼作 Red Hat OpenShift 容器平台中的日志存储</block>
  <block id="5a555ddb9b7bf1753c0f8011c4375e4a" category="list-text"><block ref="5a555ddb9b7bf1753c0f8011c4375e4a" category="inline-link-macro-rx"></block></block>
  <block id="7311f08c36c8889389509660495254bc" category="section-title">Kubernetes 和 VMware 生态系统</block>
  <block id="ec7f98a3714557d87968dc6a898f7912" category="inline-link-macro">使用 VMware Tanzu 和ONTAP加速您的 Kubernetes 之旅</block>
  <block id="32e124b0349f41e06bf1e03f11950665" category="list-text"><block ref="32e124b0349f41e06bf1e03f11950665" category="inline-link-macro-rx"></block></block>
  <block id="6ffc220bcf68cdea1a7ee60630b3770b" category="inline-link-macro">vSphere 上的 Kubernetes（第 1 部分）</block>
  <block id="718b7fcd61673194858446821c8dea31" category="list-text"><block ref="718b7fcd61673194858446821c8dea31" category="inline-link-macro-rx"></block></block>
  <block id="c6960ae743737cb2431e58eb8f3f4c8c" category="inline-link-macro">vSphere 上的 Kubernetes（第 2 部分）</block>
  <block id="6f01eedbaa404894cc11e49fa3f62506" category="list-text"><block ref="6f01eedbaa404894cc11e49fa3f62506" category="inline-link-macro-rx"></block></block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NETAPP、NETAPP 徽标和NetApp商标页面上列出的标志是NetApp, Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">NetApp拥有的专利的最新列表可以在以下位置找到：</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="4a37cfbb226d27fca2db1d9de9dff51e" category="doc">了解有关 Red Hat OpenShift 虚拟化与NetApp存储集成的其他资源</block>
  <block id="2c991ff927be651e007be2a7337379e2" category="paragraph">访问其他资源，这些资源提供有关在各种平台和技术上支持使用ONTAP部署、管理和优化 Red Hat OpenShift Virtualization 的更多信息。</block>
  <block id="b427c728eaaa53d5c94c13cde0411106" category="list-text">Trident文档</block>
  <block id="21b11dbf6ab3c6d36a76f280fe8ec75d" category="list-text">Red Hat OpenShift 文档</block>
  <block id="74201863479cf5c9b89330c920283301" category="inline-link"><block ref="74201863479cf5c9b89330c920283301" category="inline-link-rx"></block></block>
  <block id="3e10ed3875c45f9dc9064324660fc2b1" category="paragraph"><block ref="3e10ed3875c45f9dc9064324660fc2b1" category="inline-link-rx"></block></block>
  <block id="06fd33ae9f869a89e860634ec94b9793" category="list-text">Red Hat OpenStack 平台文档</block>
  <block id="647d438a62673b6a6c9830682f6bc128" category="inline-link"><block ref="647d438a62673b6a6c9830682f6bc128" category="inline-link-rx"></block></block>
  <block id="705a39bc1a12c50103a847633c3f7493" category="paragraph"><block ref="705a39bc1a12c50103a847633c3f7493" category="inline-link-rx"></block></block>
  <block id="8d79e9650a1f62f89d77743225e203c0" category="list-text">Red Hat 虚拟化文档</block>
  <block id="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link"><block ref="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link-rx"></block></block>
  <block id="6d6038842b529e3d97aa9a8a9d81d866" category="paragraph"><block ref="6d6038842b529e3d97aa9a8a9d81d866" category="inline-link-rx"></block></block>
  <block id="4c37a5afd480a0042f69d7628cadd57d" category="summary">NetApp助力 Red Hat OpenShift 上 Kubernetes 的高级集群管理</block>
  <block id="de59be6e44d20d9dd12412571b745c5f" category="doc">应用程序生命周期管理</block>
  <block id="fa19c463235a810b3a93333d6ee51d6c" category="paragraph">要创建一个应用程序并跨一组集群管理它，</block>
  <block id="920db239cf01c8ded4b7f364194ab540" category="list-text">从侧边栏导航到“管理应用程序”，然后单击“创建应用程序”。提供您想要创建的应用程序的详细信息，然后单击“保存”。</block>
  <block id="6b41f909eb299f214abfb15580583456" category="inline-image-macro">创建应用程序</block>
  <block id="3f824abd348b35a7218b63150bd10f90" category="paragraph"><block ref="3f824abd348b35a7218b63150bd10f90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bcb3e5b76f189a87ea350550f86de83f" category="list-text">应用程序组件安装完成后，该应用程序就会出现在列表中。</block>
  <block id="d70fc022d09a33f4044c81cd670a71b6" category="inline-image-macro">应用程序列表</block>
  <block id="10f2eb03b2a15c6897518c6b163e441e" category="paragraph"><block ref="10f2eb03b2a15c6897518c6b163e441e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="672d326704c3be4bebf6c816a48495e7" category="list-text">现在可以从控制台监控和管理该应用程序。</block>
  <block id="d10b633b8bd8d022c66a52d93e0ed6ce" category="doc">集群生命周期管理</block>
  <block id="8b9449bdfc859a900fc4da7c79420145" category="paragraph">要管理不同的 OpenShift 集群，您可以创建它们或将它们导入高级集群管理。</block>
  <block id="0ef06ef8df800cf71fb95c66e0e08f1a" category="list-text">首先导航到自动化基础设施&gt;集群。</block>
  <block id="0becde0fcfda03aec9c722d042326324" category="list-text">要创建新的 OpenShift 集群，请完成以下步骤：</block>
  <block id="e056bb6efa17796fc810edad8410280d" category="list-text">创建提供商连接：导航到提供商连接并单击添加连接，提供与所选提供商类型相对应的所有详细信息，然后单击添加。</block>
  <block id="50dfc508091b37338da8357e63e6a405" category="inline-image-macro">添加提供商连接</block>
  <block id="6950e4aa9f589c469d0be8f75780b994" category="paragraph"><block ref="6950e4aa9f589c469d0be8f75780b994" category="inline-image-macro-rx" type="image"></block></block>
  <block id="401b252566122602a82ff66bc7ed3e6c" category="list-text">要创建新集群，请导航至“集群”，然后单击“添加集群”&gt;“创建集群”。提供集群和相应提供程序的详细信息，然后单击“创建”。</block>
  <block id="2984cab36bd51d5446963e671e808f5d" category="inline-image-macro">添加集群</block>
  <block id="23b8ad964837a66064ae1029abbbe9f0" category="paragraph"><block ref="23b8ad964837a66064ae1029abbbe9f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2da6eeb34cf16de43ab8fa2f939d81c7" category="list-text">集群创建完成后，出现在集群列表中，状态为Ready。</block>
  <block id="e6d9a6b38dd36fd9870260249ba5fc1f" category="list-text">要导入现有集群，请完成以下步骤：</block>
  <block id="f52ae06380cfd00cae7839562f550e87" category="list-text">导航到集群并单击添加集群&gt;导入现有集群。</block>
  <block id="63b7276dd1b569babc28304e786e2041" category="list-text">输入集群名称，点击保存导入并生成代码。显示添加现有集群的命令。</block>
  <block id="be87809a27ab2944f89ccaebd89b7596" category="list-text">单击“复制命令”，在要添加到中心集群的集群上运行该命令。这将启动集群上必要代理的安装，并且此过程完成后，集群将以“就绪”状态出现在集群列表中。</block>
  <block id="9a618414b83afe67c19abcf935be6dbd" category="inline-image-macro">导入现有集群</block>
  <block id="153d72343e42e12e3684942e2cdee878" category="paragraph"><block ref="153d72343e42e12e3684942e2cdee878" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c812d1382d834648706b3bf1e6848135" category="list-text">创建并导入多个集群后，您可以从单个控制台监控和管理它们。</block>
  <block id="86c2cc4630e619e2c08c32f54e844297" category="doc">在多个集群上创建资源</block>
  <block id="bc2397695676d1a63e489d4c80c8cd91" category="paragraph">Kubernetes 的高级集群管理允许用户从控制台同时在一个或多个托管集群上创建资源。例如，如果您在不同的站点拥有 OpenShift 集群，且这些集群由不同的NetApp ONTAP集群支持，并且想要在两个站点配置 PVC，则可以单击顶部栏上的 (+) 号。然后选择要创建 PVC 的集群，粘贴资源 YAML，然后单击创建。</block>
  <block id="24800112d59462f8ea9ff03f5dd456a7" category="inline-image-macro">创建资源</block>
  <block id="7e9a9cb44c804889afaca956d868ee57" category="paragraph"><block ref="7e9a9cb44c804889afaca956d868ee57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1630dbfdd4887ce201ea82c71cde3d11" category="doc">为 Kubernetes 部署高级集群管理</block>
  <block id="fad73d4839dc21dc3d330b3940ed763f" category="paragraph">本节介绍使用NetApp在 Red Hat OpenShift 上对 Kubernetes 进行高级集群管理。</block>
  <block id="39d08ecbb9add7bd87659df206457a73" category="list-text">用于中心集群的 Red Hat OpenShift 集群（高于 4.5 版本）</block>
  <block id="f41043c73a62a435944d8abfb45094cb" category="list-text">用于托管集群的 Red Hat OpenShift 集群（高于 4.4.3 版本）</block>
  <block id="d60c66eb778a488709534045787b6a26" category="list-text">集群管理员访问 Red Hat OpenShift 集群</block>
  <block id="374185e020d06ceed3f020af518a1c14" category="list-text">Red Hat 订阅 Kubernetes 高级集群管理</block>
  <block id="9afcd045ce0197d71ba631e3fbe43095" category="paragraph">高级集群管理是 OpenShift 集群的一个附加组件，因此根据中心和管理集群中使用的功能，对硬件资源有一定的要求和限制。在确定集群大小时需要考虑这些问题。查看文档<block ref="a5d2b81b971715f092f7296621743e22" category="inline-link-rx"></block>了解更多详情。</block>
  <block id="65a62318377ddbc5fe3f73548dc3d677" category="paragraph">或者，如果中心集群具有用于托管基础设施组件的专用节点，并且您只想在这些节点上安装高级集群管理资源，则需要相应地向这些节点添加容忍度和选择器。更多详细信息请参阅文档<block ref="df4d7b25534e8f26e8ab3acc1c646101" category="inline-link-rx"></block>。</block>
  <block id="7c613b296892d4712b9041d3081282f8" category="summary">使用NetApp在 Red Hat OpenShift 上对 Kubernetes 进行高级集群管理。</block>
  <block id="78e1aefe2bbb2518f1156636e761e479" category="paragraph">要在 OpenShift 集群上安装 Kubernetes 高级集群管理，请完成以下步骤：</block>
  <block id="b17056cdbd9ec695d4348e1ad799ace4" category="list-text">选择一个 OpenShift 集群作为中心集群，并使用集群管理员权限登录。</block>
  <block id="bc2ab7a7550cebeb52a08cf830b5ecf6" category="list-text">导航到 Operators &gt; Operators Hub 并搜索 Kubernetes 的高级集群管理。</block>
  <block id="2e5d3941e033e96d5317cc2bbd1da914" category="inline-image-macro">ACM瓷砖</block>
  <block id="9cba2871ff28eb39207a2645fc9d6f1f" category="paragraph"><block ref="9cba2871ff28eb39207a2645fc9d6f1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4ab802b80978ba1c5de3922d546bdb7" category="list-text">选择 Kubernetes 的高级集群管理，然后单击安装。</block>
  <block id="cc5a9dd5971b8369354db684e5dbfe2b" category="inline-image-macro">ACM 瓷砖细节</block>
  <block id="550443e3be425fc14c0daef2e72e9df5" category="paragraph"><block ref="550443e3be425fc14c0daef2e72e9df5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c972585d6241c4f2ed2604bcc8706358" category="list-text">在“安装操作员”屏幕上，提供必要的详细信息（NetApp建议保留默认参数）并单击“安装”。</block>
  <block id="72b342ddabad6a9ec11df82389c40b88" category="inline-image-macro">安装 ACM Operator 磁贴</block>
  <block id="deb0049462c815b6822399ba0a1deddf" category="paragraph"><block ref="deb0049462c815b6822399ba0a1deddf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="11458c333e4903e54ca46f822ba6a3b6" category="list-text">等待操作员安装完成。</block>
  <block id="64524f91c2fdfcd54b4bbcab35392908" category="inline-image-macro">ACM 操作员安装正在进行中</block>
  <block id="96c387ac3caa3d3c2803b0d990480051" category="paragraph"><block ref="96c387ac3caa3d3c2803b0d990480051" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bf3d0678c48be5730f20005e6f88aa1" category="list-text">安装操作员后，单击创建 MultiClusterHub。</block>
  <block id="e0d84ec6a5b8f92909a7a3bef11455c1" category="inline-image-macro">ACM 操作员多集群中心</block>
  <block id="efe77302287c455d079da45b8902e93f" category="paragraph"><block ref="efe77302287c455d079da45b8902e93f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95f29f27e373a9759cf065e1fde23e28" category="list-text">在创建 MultiClusterHub 屏幕上，提供详细信息后单击创建。这将启动多集群集线器的安装。</block>
  <block id="344f0cb43d1b2e7a719bea808fe7c5bf" category="inline-image-macro">创建多集群中心屏幕</block>
  <block id="a3546564dfb5145dcb91fdeefa484d89" category="paragraph"><block ref="a3546564dfb5145dcb91fdeefa484d89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a50aa5e8249109d6f4902945e968ad7d" category="list-text">当 open-cluster-management 命名空间中的所有 pod 都转为 Running 状态，并且操作员转为 Succeeded 状态后，Kubernetes 高级集群管理就安装完成了。</block>
  <block id="851548d1ad843a23609f325e8b54e72d" category="inline-image-macro">ACM 操作员已安装</block>
  <block id="bbf8732a6e771744f256e15b7d613a80" category="paragraph"><block ref="bbf8732a6e771744f256e15b7d613a80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="391dd52c88201d377f1572062e22c43e" category="list-text">完成集线器安装需要一些时间，完成后，多集群集线器将进入运行状态。</block>
  <block id="c7aa79f0c31ac15d728ee47c7e6eaee2" category="inline-image-macro">多集群集线器已准备就绪</block>
  <block id="e3f0a1732a09065231e9bf0a4fa10e6e" category="paragraph"><block ref="e3f0a1732a09065231e9bf0a4fa10e6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eef36825efd5d2d40e4f833635cd19da" category="list-text">它在 open-cluster-management 命名空间中创建一条路由。连接到路由中的URL，访问高级集群管理控制台。</block>
  <block id="f761fad3f1c25e94d5f46ebd9e23a901" category="inline-image-macro">ACM 控制台路由</block>
  <block id="8be16232c92dad9e0dfd70e175da411a" category="paragraph"><block ref="8be16232c92dad9e0dfd70e175da411a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fc5f6755312b7edeef9542bd55ef639" category="doc">治理与风险</block>
  <block id="9d7264067197bc9ff368288f98750fd6" category="paragraph">此功能允许您为不同的集群定义合规策略并确保集群遵守该策略。您可以配置策略来通知或补救任何偏离或违反规则的行为。</block>
  <block id="87f4e127e0ecf99187b35830ca7e78aa" category="list-text">从侧边栏导航至“治理和风险”。</block>
  <block id="0ecc505d3375f8bb3bd959aaaf7e710a" category="list-text">要创建合规性策略，请单击创建策略，输入策略标准的详细信息，然后选择应遵守此策略的集群。如果您想自动纠正违反此策略的行为，请选中“如果支持则强制执行”复选框，然后单击“创建”。</block>
  <block id="f6262e5369e2b989638aaa9d4f333d91" category="inline-image-macro">创建合规性策略</block>
  <block id="563c01ec25937c5d155725b44cb310f8" category="paragraph"><block ref="563c01ec25937c5d155725b44cb310f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a1575621f2b12d5216e6d1c95eed2e6" category="list-text">配置所有必需的策略后，可以从高级集群管理中监控和修复任何策略或集群违规行为。</block>
  <block id="38c080ff2128a92954fb61942ea497c0" category="inline-image-macro">政策监控</block>
  <block id="e3b35cae2cfe8ce9766339e742dd43de" category="paragraph"><block ref="e3b35cae2cfe8ce9766339e742dd43de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31fd0c2c8d388a4cd2c6459234743476" category="doc">可观察性</block>
  <block id="e98511d60f9850de86f096614f447322" category="paragraph">Kubernetes 的高级集群管理提供了一种监控所有集群中的节点、pod、应用程序和工作负载的方法。</block>
  <block id="36aff44ed429ca86d182dc7ee3dfdbb1" category="list-text">导航至观察环境 &gt; 概览。</block>
  <block id="7a6ccefec75a946583cffdd0a8a47e09" category="inline-image-macro">可观察性主页</block>
  <block id="e5e0184c6e68858f80111d781d6db759" category="paragraph"><block ref="e5e0184c6e68858f80111d781d6db759" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c9904a9276a489fc238c999d2ddd633f" category="list-text">所有集群中的所有 pod 和工作负载都根据各种过滤器进行监控和排序。点击Pods即可查看相应数据。</block>
  <block id="4a973ae1a908770e354f949d3c0592f8" category="inline-image-macro">观察 Pod</block>
  <block id="42a8f7ef0e3387f7c0f76f365a7736fa" category="paragraph"><block ref="42a8f7ef0e3387f7c0f76f365a7736fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7cd1c61051d3647bc47d839e0efee222" category="list-text">基于各种数据点对集群中的所有节点进行监控和分析。单击节点可以深入了解相应的详细信息。</block>
  <block id="8a373f777de729c082b5be2d80b7eca6" category="inline-image-macro">观察节点</block>
  <block id="de2d0b768057392661b178ea76e594d7" category="paragraph"><block ref="de2d0b768057392661b178ea76e594d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e7f54a0ebc5cd69209a17181d477e4c" category="list-text">所有集群都根据不同的集群资源和参数进行监控和组织。单击“集群”可查看集群详细信息。</block>
  <block id="2ececa2c251a851a85e976daae558c81" category="inline-image-macro">观察集群</block>
  <block id="acb848430f87ae9ce699ef9e3e380d53" category="paragraph"><block ref="acb848430f87ae9ce699ef9e3e380d53" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb5a90af80107b22fd8d5c8ebe2ed939" category="doc">Kubernetes 的高级集群管理：Red Hat OpenShift 与NetApp - 概述</block>
  <block id="30c15b5a84f4fb26cd25b38dc787b22d" category="paragraph">随着容器化应用程序从开发过渡到生产，许多组织需要多个 Red Hat OpenShift 集群来支持该应用程序的测试和部署。与此同时，组织通常在 OpenShift 集群上托管多个应用程序或工作负载。因此，每个组织最终都会管理一组集群，而 OpenShift 管理员必须面对额外的挑战，即管理和维护跨多个本地数据中心和公共云的一系列环境中的多个集群。为了应对这些挑战，Red Hat 推出了针对 Kubernetes 的高级集群管理。</block>
  <block id="1cf7b9db4d7fe091bd1bbb685e5beea8" category="paragraph">Red Hat Advanced Cluster Management for Kubernetes 使您能够执行以下任务：</block>
  <block id="808c579683377aa7bd89b8e4d76ba220" category="list-text">跨数据中心和公共云创建、导入和管理多个集群</block>
  <block id="7fe0555145a586e3fb769f86902ccc72" category="list-text">从单个控制台部署和管理多个集群上的应用程序或工作负载</block>
  <block id="416434625b0f2158d99a4af37f233805" category="list-text">监控和分析不同集群资源的健康和状态</block>
  <block id="fed6fdd49a1e6adda0ea12a93e74ea2d" category="list-text">监控并强制执行跨多个集群的安全合规性</block>
  <block id="a7516c278242a08b85090e24cbf67218" category="paragraph">Red Hat Advanced Cluster Management for Kubernetes 作为 Red Hat OpenShift 集群的附加组件安装，并使用该集群作为其所有操作的中央控制器。该集群称为中心集群，它为用户公开了一个管理平面以连接到高级集群管理。通过高级集群管理控制台导入或创建的所有其他 OpenShift 集群均由中心集群管理，并称为托管集群。它在托管集群上安装了一个名为 Klusterlet 的代理，将它们连接到中心集群，并满足与集群生命周期管理、应用程序生命周期管理、可观察性和安全合规性相关的不同活动的请求。</block>
  <block id="b1000f23e43dfac19b53c74d7ebe66c8" category="inline-image-macro">ACM 架构</block>
  <block id="06b9b6e6c32b6f413afbdcf2bedf9701" category="paragraph"><block ref="06b9b6e6c32b6f413afbdcf2bedf9701" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a376445fd812a7fa27714e6b11bc6163" category="paragraph">有关详细信息，请参阅文档<block ref="50c0dc50e188cf3a7847d9a813fd829e" category="inline-link-rx"></block>。</block>
  <block id="a003986254b5a6c136733113505348da" category="doc">安装 F5 BIG-IP 负载均衡器</block>
  <block id="048600e045fd4c5afe58ec9d65aa4b19" category="paragraph">F5 BIG-IP 是一种应用交付控制器 (ADC)，它提供广泛的高级生产级流量管理和安全服务，如 L4-L7 负载平衡、SSL/TLS 卸载、DNS、防火墙等。这些服务大大提高了应用程序的可用性、安全性和性能。</block>
  <block id="5c47e8322efb7f77c0aa515fec29477e" category="paragraph">F5 BIG-IP 可以以多种方式部署和使用，可以在专用硬件上、在云端或作为本地虚拟设备。请参阅此处的文档，根据要求探索和部署 F5 BIG-IP。</block>
  <block id="16a275a8b38f9c5211732c331edb7135" category="paragraph">为了将 F5 BIG-IP 服务与 Red Hat OpenShift 有效集成，F5 提供了 BIG-IP 容器入口服务 (CIS)。  CIS 作为控制器容器安装，用于监视 OpenShift API 中的某些自定义资源定义 (CRD) 并管理 F5 BIG-IP 系统配置。  F5 BIG-IP CIS 可以配置为控制 OpenShift 中的服务类型 LoadBalancers 和 Routes。</block>
  <block id="e3ce824a7aff01576faaac58df9e0b18" category="paragraph">此外，为了自动分配 IP 地址来为 LoadBalancer 类型提供服务，您可以利用 F5 IPAM 控制器。  F5 IPAM 控制器作为控制器 pod 安装，它使用 ipamLabel 注释监视 LoadBalancer 服务的 OpenShift API，以从预配置池中分配 IP 地址。</block>
  <block id="3b08b142099d42d5280d7b493288bf63" category="paragraph">本页列出了 F5 BIG-IP CIS 和 IPAM 控制器的安装和配置说明。作为先决条件，您必须部署并获得许可的 F5 BIG-IP 系统。它还必须获得 SDN 服务的许可，该服务默认包含在 BIG-IP VE 基本许可证中。</block>
  <block id="5fb7b483d0c9fa099945579d826691b8" category="admonition">F5 BIG-IP 可以以独立或集群模式部署。为了进行此验证，F5 BIG-IP 以独立模式部署，但出于生产目的，最好使用 BIG-IP 集群以避免单点故障。</block>
  <block id="e7e767d7c0e58b16e57d3ab16150db80" category="cell">技术</block>
  <block id="40ddf58fef213ff0d6433ef322edfe2e" category="cell">软件版本</block>
  <block id="b175d08ac03101cd40f077848d436e1f" category="cell">红帽 OpenShift</block>
  <block id="2454407b9991c6c5f417a2feb8ea7970" category="cell">4.6 EUS，4.7</block>
  <block id="00d0a06cc7c922b3bc62b22524723ff8" category="cell">F5 BIG-IP VE 版本</block>
  <block id="5bd03f916d1e7b0410d0d3b2d12c6366" category="cell">16.1.0</block>
  <block id="c6f7874f49f685ffdf1b5a8aad8875c4" category="cell">F5 容器入口服务</block>
  <block id="21f47a5b35d016c2f0f8f57704079407" category="cell">2.5.1</block>
  <block id="9635118f932e26e24f0ca315d3843379" category="cell">F5 IPAM 控制器</block>
  <block id="5256eb2d6e3cf80e003a290e63843800" category="cell">0.1.4</block>
  <block id="088afeececf092d5a406e0f5022a9638" category="cell">F5 AS3</block>
  <block id="425b0ca2d1d9d5c75555116fcd1614bf" category="cell">3.30.0</block>
  <block id="b9a4064fa117596b59fb18df84df74df" category="inline-link">F5 AS3 GitHub 存储库</block>
  <block id="6463cf716c052865ec9f4716ff0b5d3f" category="list-text">安装 F5 应用服务 3 扩展以允许 BIG-IP 系统接受 JSON 中的配置而不是命令。前往<block ref="0d4e47593b830323684cdec40cb60c71" category="inline-link-rx"></block>，并下载最新的RPM文件。</block>
  <block id="4c0802ebd79a8c6e5ea4aed829f023c9" category="list-text">登录 F5 BIG-IP 系统，导航到 iApps &gt; Package Management LX 并单击 Import。</block>
  <block id="3536ed517a711f49cfe64071db031cf5" category="list-text">单击“选择文件”并选择下载的 AS3 RPM 文件，单击“确定”，然后单击“上传”。</block>
  <block id="2a90f793207a5a0c028d8ccc45e943fd" category="inline-image-macro">iApps 上传</block>
  <block id="a946929c181ae9c31d48220aee8272e1" category="paragraph"><block ref="a946929c181ae9c31d48220aee8272e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="caedd771b59d267eda8f88d329e8784f" category="list-text">确认 AS3 扩展已成功安装。</block>
  <block id="c434efeb83b6dc500ea7893f1ad4236b" category="inline-image-macro">AS3 安装验证</block>
  <block id="27251de43d24b764fa00a0531d1b9a13" category="paragraph"><block ref="27251de43d24b764fa00a0531d1b9a13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97e9e05bfde432cfa7291b1e55a52ba7" category="list-text">接下来配置OpenShift和BIG-IP系统之间通信所需的资源。首先通过在 BIG-IP 系统上为 OpenShift SDN 创建 VXLAN 隧道接口来在 OpenShift 和 BIG-IP 服务器之间创建隧道。导航到网络 &gt; 隧道 &gt; 配置文件，单击创建，然后将父配置文件设置为 vxlan，将泛洪类型设置为多播。输入配置文件的名称并单击“完成”。</block>
  <block id="faaca798da0468a250bf3c3bffc26681" category="inline-image-macro">创建 VXLAN 配置文件</block>
  <block id="155a411b699416d0bc09a5b6ec1570ff" category="paragraph"><block ref="155a411b699416d0bc09a5b6ec1570ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45ae0c96657fdc5a20e83839c2386c1e" category="list-text">导航到网络 &gt; 隧道 &gt; 隧道列表，单击创建，然后输入隧道的名称和本地 IP 地址。选择上一步创建的隧道配置文件，然后单击“完成”。</block>
  <block id="1497a4f92d416d6c80392ec3467ff140" category="inline-image-macro">创建VXLAN隧道</block>
  <block id="762ab9036c7e149843e77e617cc2a3cd" category="paragraph"><block ref="762ab9036c7e149843e77e617cc2a3cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc5e5bc480b39177b8cb8c9c3a2266ae" category="list-text">使用集群管理员权限登录 Red Hat OpenShift 集群。</block>
  <block id="986e63a308b4bebd3f531e38fa5a06c7" category="list-text">在 OpenShift 上为 F5 BIG-IP 服务器创建一个 hostsubnet，将子网从 OpenShift 集群扩展到 F5 BIG-IP 服务器。下载主机子网 YAML 定义。</block>
  <block id="fd4475e12938f5f51ba3f312b42cdd39" category="list-text">编辑主机子网文件并为 OpenShift SDN 添加 BIG-IP VTEP（VXLAN 隧道）IP。</block>
  <block id="2e6d8a8db3c4d4a2227ffa0571be2a86" category="admonition">根据您环境的需要更改 hostIP 和其他详细信息。</block>
  <block id="7f9916ee1bc520d892dfbbb1e06e2732" category="list-text">创建 HostSubnet 资源。</block>
  <block id="7a46b2d02d466dda0cc67b215cb80bff" category="list-text">获取为 F5 BIG-IP 服务器创建的主机子网的集群 IP 子网范围。</block>
  <block id="cba83e8459cc1d6774061a2e425ad8bd" category="list-text">在 OpenShift VXLAN 上创建一个自身 IP，其 IP 位于与 F5 BIG-IP 服务器对应的 OpenShift 主机子网范围内。登录 F5 BIG-IP 系统，导航至网络 &gt; 自有 IP，然后单击创建。输入为 F5 BIG-IP 主机子网创建的集群 IP 子网中的 IP，选择 VXLAN 隧道，然后输入其他详细信息。然后单击“完成”。</block>
  <block id="5c241806c0dd5ebb7030904151cb78ef" category="inline-image-macro">为 VXLAN 创建 Self IP</block>
  <block id="dc9039d125092b54ecbd649e9e830bd8" category="paragraph"><block ref="dc9039d125092b54ecbd649e9e830bd8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d094b7d82871afb601d2f30d416ba8d" category="list-text">在 F5 BIG-IP 系统中创建一个分区，以便与 CIS 一起配置和使用。导航到系统 &gt; 用户 &gt; 分区列表，单击创建，然后输入详细信息。然后单击“完成”。</block>
  <block id="4d81871723233ec21ed69ab80e638779" category="inline-image-macro">创建 BIG-IP 分区</block>
  <block id="8f0e9105b8c57961e36f922c2ac3a061" category="paragraph"><block ref="8f0e9105b8c57961e36f922c2ac3a061" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37397397fa66431e2fa681b97126c399" category="admonition">F5 建议不要对 CIS 管理的分区进行手动配置。</block>
  <block id="81e4a49e9dbe0b55256fe5abf1b94fa4" category="list-text">使用来自 OperatorHub 的操作员安装 F5 BIG-IP CIS。使用 cluster-admin 权限登录 Red Hat OpenShift 集群，并使用 F5 BIG-IP 系统登录凭证创建一个 secret，这是操作员的先决条件。</block>
  <block id="5de4ac005898cabf55523098c40c549b" category="list-text">安装 F5 CIS CRD。</block>
  <block id="0eddace1b16ed738fe1be181481c71b6" category="list-text">导航到 Operators &gt; OperatorHub，搜索关键字 F5，然后单击 F5 Container Ingress Service 磁贴。</block>
  <block id="07543409cb05595e273df71050b9a9c0" category="inline-image-macro">OperatorHub 中的 F5 CIS</block>
  <block id="ccc06b019f840a5718a8d6bf9cb7f748" category="paragraph"><block ref="ccc06b019f840a5718a8d6bf9cb7f748" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c25b2a3d320d6d02584fde4190d05d91" category="list-text">阅读操作员信息并单击安装。</block>
  <block id="60d3353ed1910ad5c7bd352d0c1bea85" category="inline-image-macro">OperatorHub 中的 F5 CIS 信息图块</block>
  <block id="e36eb2a64284b730ddd267d710d01cac" category="paragraph"><block ref="e36eb2a64284b730ddd267d710d01cac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="637a1bc658defc200d903b27828aa8fb" category="list-text">在安装操作员屏幕上，保留所有默认参数，然后单击安装。</block>
  <block id="ccf254d7c8b666c9c127ec12fe14804b" category="inline-image-macro">安装 F5 CIS 操作员</block>
  <block id="cd055069228b323bd015d08bdd31e478" category="paragraph"><block ref="cd055069228b323bd015d08bdd31e478" category="inline-image-macro-rx" type="image"></block></block>
  <block id="636d8318702bc67a1613ceadf7ce9d00" category="list-text">安装操作员需要一段时间。</block>
  <block id="dffa3077bcff43536afd75bd61b11c0c" category="inline-image-macro">F5 CIS Operator 安装进度</block>
  <block id="3319e4fbd94793c3bf10b04526e47f34" category="paragraph"><block ref="3319e4fbd94793c3bf10b04526e47f34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="197a0a4cc4a45ec9a62fe2b7335d8dfc" category="list-text">操作员安装完成后，将显示“安装成功”消息。</block>
  <block id="5bf83e99bfa132430d0b690181334933" category="list-text">导航到 Operators &gt; Installed Operators，单击 F5 Container Ingress Service，然后单击 F5BigIpCtlr 图块下的 Create Instance。</block>
  <block id="a5f584f06c59c2cf4a4a4e8b42d495a2" category="inline-image-macro">创建 F5BigIpCtlr</block>
  <block id="42d66aa33e3f7ac13ce059611a6ef0a0" category="paragraph"><block ref="42d66aa33e3f7ac13ce059611a6ef0a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5ce9a4ef68c16a3ab5d0dd555305872" category="list-text">单击 YAML View，更新必要的参数后粘贴以下内容。</block>
  <block id="2e2beb899f89156ed06287fe6f78e6cf" category="admonition">更新参数<block ref="9117e80b6a6843f23b631387abeed925" prefix=" " category="inline-code"></block>，` openshift_sdn_name`，<block ref="957c32cdfcd5fb9c99f7a4e3311e7768" prefix=" " category="inline-code"></block>和<block ref="1155b6812ea5125b3144173aaaad6205" prefix=" " category="inline-code"></block>在复制内容之前，请先查看以下设置的值。</block>
  <block id="50a17348dc3f981a95001edcc80a428f" category="list-text">粘贴此内容后，单击“创建”。这会在 kube-system 命名空间中安装 CIS pod。</block>
  <block id="72003ce6faa67d172e943ddd74fab63b" category="inline-image-macro">验证 F5 CIS pod</block>
  <block id="566eb0684a6ee134ab0c9a8ac1d77cfd" category="paragraph"><block ref="566eb0684a6ee134ab0c9a8ac1d77cfd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc8632c05e82ccafb395157ccae4f5c3" category="admonition">默认情况下，Red Hat OpenShift 提供了一种通过路由公开服务以实现 L7 负载平衡的方法。内置的 OpenShift 路由器负责宣传和处理这些路由的流量。但是，您也可以配置 F5 CIS 以通过外部 F5 BIG-IP 系统支持路由，该系统可以作为辅助路由器运行，也可以作为自托管 OpenShift 路由器的替代品运行。 CIS 在 BIG-IP 系统中创建一个虚拟服务器，充当 OpenShift 路由的路由器，而 BIG-IP 负责处理广告和流量路由。有关启用此功能的参数的信息，请参阅此处的文档。请注意，这些参数是在 apps/v1 API 中为 OpenShift Deployment 资源定义的。因此，当将这些与 F5BigIpCtlr 资源 cis.f5.com/v1 API 一起使用时，请将参数名称中的连字符 (-) 替换为下划线 (_)。</block>
  <block id="a6e55fc1fe932b26a294a0f2880478aa" category="list-text">传递给 CIS 资源创建的参数包括<block ref="49dcf57b3a065d02c9969c595e32ea50" prefix=" " category="inline-code"></block>和<block ref="5d0d2663dc7f08b0183abaddf17f8307" prefix=" " category="inline-code"></block>。这些参数是启用 CIS 与 IPAM 控制器集成所必需的。通过创建 F5 IPAM 资源验证 CIS 是否已启用 IPAM 集成。</block>
  <block id="84ac0b78989fa6595723d5541b8ec470" category="list-text">创建 F5 IPAM 控制器所需的服务帐户、角色和角色绑定。创建一个 YAML 文件并粘贴以下内容。</block>
  <block id="670c1074ae74616731a63f6b9462b94e" category="list-text">创建资源。</block>
  <block id="b7802bea6dc04d06b63232b6301621bb" category="list-text">创建一个 YAML 文件并粘贴下面提供的 F5 IPAM 部署定义。</block>
  <block id="6a1491ddca525bea3293eca6ea8019d0" category="admonition">更新下面的 spec.template.spec.containers[0].args 中的 ip-range 参数以反映与您的设置相对应的 ipamLabels 和 IP 地址范围。</block>
  <block id="642252b62fe47e95caa77e3b06a7dbaf" category="admonition">ipam标签<block ref="4795fc86aa645b109548974bcffefe07" prefix="[" category="inline-code"></block>和<block ref="0ce75607b46ab2a9cc08eab9ade2a24d" prefix=" " category="inline-code"></block>在下面的示例中] 需要为 LoadBalancer 类型的服务进行注释，以便 IPAM 控制器从定义的范围内检测并分配 IP 地址。</block>
  <block id="8f253132259909c28624117b3476a672" category="list-text">创建 F5 IPAM 控制器部署。</block>
  <block id="43946dccec13f46420eb559911e4c526" category="list-text">验证 F5 IPAM 控制器 pod 是否正在运行。</block>
  <block id="1362b3e7985b4f24d6c2ef4438ee1f0e" category="list-text">创建 F5 IPAM 模式。</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="section-title">验证</block>
  <block id="32172ccfad6e7060b8f5e091e296f09c" category="list-text">创建 LoadBalancer 类型的服务</block>
  <block id="0847be44e618094bc81c848c7d131399" category="list-text">检查 IPAM 控制器是否为其分配了外部 IP。</block>
  <block id="0e51a0606ba7833099aa57bd61c62ba6" category="list-text">创建部署并使用创建的 LoadBalancer 服务。</block>
  <block id="5f905cb56a4d1b364cab7fc57f4de4e5" category="list-text">检查 pod 是否正在运行。</block>
  <block id="51b4d723f0434284233dab97982b185d" category="list-text">检查BIG-IP系统中是否为OpenShift中LoadBalancer类型的服务创建了对应的虚拟服务器。导航到本地流量 &gt; 虚拟服务器 &gt; 虚拟服务器列表。</block>
  <block id="91193cea3335c4666b7dc31ca767030c" category="inline-image-macro">验证相应服务类型 LoadBalancer 的 BIG-IP 虚拟服务器的创建</block>
  <block id="4d008c8f3e509bf0a00ad422757c0ea3" category="paragraph"><block ref="4d008c8f3e509bf0a00ad422757c0ea3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79a2d2fa50d2b47d02c0e9dbdfadc07f" category="doc">安装 MetalLB 负载均衡器：Red Hat OpenShift 与NetApp</block>
  <block id="0b2da9b5fe81e13e88c9a05981a95a9e" category="paragraph">本页列出了 MetalLB 负载均衡器的安装和配置说明。</block>
  <block id="d719c733d0cd8753c048c8c3a025fd51" category="paragraph">MetalLB 是安装在 OpenShift 集群上的自托管网络负载均衡器，允许在不在云提供商上运行的集群中创建类型负载均衡器的 OpenShift 服务。  MetalLB 共同支撑 LoadBalancer 服务的两个主要特性是地址分配和对外通告。</block>
  <block id="28a4ce0a0514d0f6a6596fc7a9c5e725" category="section-title">MetalLB 配置选项</block>
  <block id="04c22d763ca95631f9c8789eb2c6e68f" category="paragraph">根据 MetalLB 如何宣布分配给 OpenShift 集群之外的 LoadBalancer 服务的 IP 地址，它以两种模式运行：</block>
  <block id="92f98c10e5e0c86bcae2e9cb58b700e3" category="list-text">*第 2 层模式。*在此模式下，OpenShift 集群中的一个节点拥有该服务的所有权，并响应该 IP 的 ARP 请求，以使其在 OpenShift 集群外部可访问。由于只有节点通告 IP，因此存在带宽瓶颈和故障转移速度慢的限制。有关详细信息，请参阅文档<block ref="4a1d14cac7ed68a2326a050e0f1fed80" category="inline-link-macro-rx"></block>。</block>
  <block id="13f78a1c753a58b3786e5664e7b01344" category="list-text">*BGP 模式。*在此模式下，OpenShift 集群中的所有节点都与路由器建立 BGP 对等会话，并通告路由以将流量转发到服务 IP。实现此目的的先决条件是将 MetalLB 与该网络中的路由器集成。由于BGP中的哈希机制，当服务的IP到节点映射发生变化时，会受到一定的限制。欲了解更多信息，请参阅文档<block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="5fe238de20fea7c5ec86dde0a98c5841" category="admonition">为了本文档的目的，我们在第 2 层模式下配置 MetalLB。</block>
  <block id="70bd399edc6825961c98dc29c2a49299" category="list-text">下载 MetalLB 资源。</block>
  <block id="d95ae9e4bae10f240e5577110ccbd7e6" category="list-text">编辑文件<block ref="130d214581bb0aa3e8759729c9fbc133" prefix=" " category="inline-code"></block>并删除<block ref="635a57f17cd40dc65b36973c9e14f9d1" prefix=" " category="inline-code"></block>来自控制器部署和扬声器 DaemonSet。</block>
  <block id="39bb715a16a6f4c1ab16bc3ad3654f0b" category="paragraph">*要删除的行：*</block>
  <block id="803519c541b237245faa09039c50dcaa" category="list-text">创建<block ref="48f2018beab0b13a2087fae3aff05306" prefix=" " category="inline-code"></block>命名空间。</block>
  <block id="980aff973ca30f65ec180530f40def06" category="list-text">创建 MetalLB CR。</block>
  <block id="f87be5542b64a7f94a807699fd549479" category="list-text">在配置 MetalLB 扬声器之前，请授予扬声器 DaemonSet 提升的权限，以便它可以执行使负载均衡器工作所需的网络配置。</block>
  <block id="53747915d8e79873876b08edb1ce3671" category="list-text">通过创建配置 MetalLB<block ref="a941f8adb5ae079ebc739cb59407fd30" prefix=" " category="inline-code"></block>在<block ref="48f2018beab0b13a2087fae3aff05306" prefix=" " category="inline-code"></block>命名空间。</block>
  <block id="2b1e829362de1a86eeb131cdc4619908" category="list-text">现在，当创建负载均衡器服务时，MetalLB 会为服务分配一个 externalIP，并通过响应 ARP 请求来通告该 IP 地址。</block>
  <block id="234ce2b9b198f2acf2193cbd06120ff2" category="admonition">如果您希望在 BGP 模式下配置 MetalLB，请跳过上面的第 6 步并按照 MetalLB 文档中的步骤进行操作<block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="8b14fb34f5313442bf2fdc4d80edc389" category="summary">本节专门为想要使用NetApp部署定制 Red Hat OpenShift 的用户探索负载均衡器选项。</block>
  <block id="87beaa6eff6159cd7270b2a4e71c10a4" category="doc">探索负载均衡器选项：Red Hat OpenShift 与NetApp</block>
  <block id="a802e9436bb9bcbfa2b88bb549e28503" category="paragraph">大多数情况下，Red Hat OpenShift 通过路由让应用程序可供外界使用。通过为服务提供外部可访问的主机名来公开服务。  OpenShift 路由器可以使用定义的路由及其服务标识的端点来向外部客户端提供这种命名连接。</block>
  <block id="3a06b5232ca55503083719c6af786f3e" category="paragraph">然而在某些情况下，应用程序需要部署和配置定制的负载均衡器来公开适当的服务。 NetApp Trident Protect 就是一个例子。为了满足这一需求，我们评估了许多自定义负载均衡器选项。本节介绍它们的安装和配置。</block>
  <block id="6914d9014ff3e2cb99cabff26b55a0bc" category="paragraph">以下页面包含有关 Red Hat OpenShift 与NetApp解决方案中验证的负载均衡器选项的更多信息：</block>
  <block id="2b545f7c547a71eaeda9dcb451aea0c5" category="inline-link-macro">MetalLB</block>
  <block id="9adf34e2f63011b66b8b542aa8fcf41f" category="list-text"><block ref="9adf34e2f63011b66b8b542aa8fcf41f" category="inline-link-macro-rx"></block></block>
  <block id="10a93051f49f4080568cecc5ec30cd99" category="inline-link-macro">F5 BIG-IP</block>
  <block id="a8ca51979dec51b759b2c18acba777b3" category="list-text"><block ref="a8ca51979dec51b759b2c18acba777b3" category="inline-link-macro-rx"></block></block>
  <block id="3605e05aa598ff405b5edffc1bf474f1" category="summary">使用NetApp在 Red Hat OpenShift 上配置多租户</block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="doc">架构</block>
  <block id="e838df8e9e1316fb79e26214a591ee38" category="paragraph">尽管NetApp ONTAP支持的 Red Hat OpenShift 和Trident默认不提供工作负载之间的隔离，但它们提供了可用于配置多租户的广泛功能。为了更好地理解在由NetApp ONTAP支持的Trident的 Red Hat OpenShift 集群上设计多租户解决方案，让我们考虑一个具有一组要求的示例并概述围绕它的配置。</block>
  <block id="730d963d9c66f4a5bdd4979297e1b636" category="paragraph">假设一个组织在 Red Hat OpenShift 集群上运行两个工作负载，这是两个不同团队正在开展的两个项目的一部分。这些工作负载的数据驻留在由Trident在NetApp ONTAP NAS 后端动态配置的 PVC 上。该组织需要为这两个工作负载设计一个多租户解决方案，并隔离用于这些项目的资源，以确保维护安全性和性能，主要关注为这些应用程序提供服务的数据。</block>
  <block id="0def896190af33e76b378083e4ded97b" category="paragraph">下图描述了由NetApp ONTAP支持的带有Trident的 Red Hat OpenShift 集群上的多租户解决方案。</block>
  <block id="743a88dbd6def144e417adba2c0cddbb" category="inline-image-macro">Red Hat OpenShift 集群上的多租户功能，采用由NetApp ONTAP支持的Trident</block>
  <block id="1ae79d7066f79d8c3637683058374e9a" category="paragraph"><block ref="1ae79d7066f79d8c3637683058374e9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c438be737391744e2fed6f73c418638" category="section-title">技术要求</block>
  <block id="ff94444190436ee7694d15be2dde0f29" category="list-text">NetApp ONTAP存储集群</block>
  <block id="b645e117fe786bf56128cde2dec3971a" category="list-text">Red Hat OpenShift 集群</block>
  <block id="0d46ef98dfe52c8d01c0c5ace93d8165" category="section-title">Red Hat OpenShift – 集群资源</block>
  <block id="72710b926f57dad99b29203c63f4e3fd" category="paragraph">从 Red Hat OpenShift 集群的角度来看，首先要启动的顶级资源是项目。 OpenShift 项目可以看作是一个集群资源，它将整个 OpenShift 集群划分为多个虚拟集群。因此，项目级别的隔离为配置多租户提供了基础。</block>
  <block id="20e1834bb9396599a6dcf7d743aa1b36" category="paragraph">接下来是在集群中配置 RBAC。最佳做法是让所有开发人员在身份提供者 (IdP) 中将单个项目或工作负载配置到单个用户组中。 Red Hat OpenShift 允许 IdP 集成和用户组同步，从而允许将来自 IdP 的用户和组导入到集群中。这有助于集群管理员将专用于某个项目的集群资源的访问隔离给从事该项目的一个或多个用户组，从而限制对任何集群资源的未经授权的访问。要了解有关 IdP 与 Red Hat OpenShift 集成的更多信息，请参阅文档<block ref="213cff8958909b80a9514e0c8321d8ef" category="inline-link-rx"></block>。</block>
  <block id="6d4e96186b1f4267def393ec42bf2d9e" category="paragraph">隔离作为 Red Hat OpenShift 集群的持久存储提供程序的共享存储非常重要，以确保在每个项目的存储上创建的卷对于主机来说就像是在单独的存储上创建的一样。为此，请在NetApp ONTAP上创建与项目或工作负载数量相同的 SVM（存储虚拟机），并将每个 SVM 专用于一个工作负载。</block>
  <block id="0611f127a7e1e7ef5bbd782030c2e34a" category="paragraph">在NetApp ONTAP上为不同的项目创建不同的 SVM 后，必须将每个 SVM 映射到不同的Trident后端。 Trident上的后端配置驱动持久存储到 OpenShift 集群资源的分配，并且需要映射到 SVM 的详细信息。这至少应该是后端的协议驱动程序。或者，它允许您定义如何在存储上配置卷，并为卷的大小或聚合的使用等设置限制。关于Trident后端定义的详细信息可以参见<block ref="47a77763732c6cebe093a4a4d61aaa5b" category="inline-link-rx"></block>。</block>
  <block id="c4ff2177ae2f8ed9c3e5353068cf2195" category="section-title">Red Hat OpenShift – 存储资源</block>
  <block id="891c9b8b0ce367c5e377a1ec23199619" category="paragraph">配置Trident后端后，下一步是配置 StorageClasses。配置与后端数量相同的存储类，为每个存储类提供仅在一个后端上启动卷的访问权限。我们可以在定义存储类时使用 storagePools 参数将 StorageClass 映射到特定的Trident后端。定义存储类的详细信息可以在这里找到<block ref="1266deb20a7d7c4814b1225e5e572606" category="inline-link-rx"></block>。因此，从 StorageClass 到Trident后端存在一对一映射，该映射指向一个 SVM。这可确保通过分配给该项目的 StorageClass 提出的所有存储声明均由专用于该项目的 SVM 提供服务。</block>
  <block id="76245f392269db8492c3610e325b1963" category="paragraph">由于存储类不是命名空间资源，我们如何确保另一个命名空间或项目中的 pod 对一个项目的存储类的存储声明被拒绝？答案是使用 ResourceQuotas。 ResourceQuotas 是控制每个项目资源总使用量的对象。它可以限制项目中对象可消耗的资源数量和总量。几乎所有项目的资源都可以使用 ResourceQuotas 进行限制，有效使用 ResourceQuotas 可以帮助组织削减因资源过度配置或过度消耗而导致的成本和中断。请参阅文档<block ref="9b2bb9683c8f6144876bed616f252527" category="inline-link-rx"></block>了解更多信息。</block>
  <block id="5402bb91006fe391aea122e11c3607db" category="paragraph">对于这种用例，我们需要限制特定项目中的 pod 从非专用于其项目的存储类中声明存储。为此，我们需要通过设置来限制其他存储类的持久卷声明<block ref="a21be23447e555ea751318f1aded4a38" prefix=" " category="inline-code"></block>为 0。此外，集群管理员必须确保项目中的开发人员无权修改资源配额。</block>
  <block id="ad8905a47eb465223ebe7acf569732b1" category="doc">配置：集群管理任务</block>
  <block id="552eab1d1ea09d0d1733b97dee6609a1" category="paragraph">Red Hat OpenShift 集群管理员执行以下任务：</block>
  <block id="8a4ffd494b5e8af3ac1be2cd9ab254fb" category="list-text">以集群管理员身份登录 Red Hat OpenShift 集群。</block>
  <block id="7ccd4d72e4addf5c27c53bafaeb3fdbd" category="list-text">创建两个项目，分别对应不同的工程。</block>
  <block id="6c98bfb16f2e9bbebd943c1f8592306d" category="list-text">为 project-1 创建开发人员角色。</block>
  <block id="14bd8c5f1032dd20f94d4434365c6530" category="admonition">本节提供的角色定义仅仅是一个示例。必须根据最终用户的要求来定义开发人员的角色。</block>
  <block id="3c73122271c9219b54ca745b732adc28" category="list-text">同样，为 project-2 创建开发人员角色。</block>
  <block id="7428df2e0e503f4cabb43a4667bc1983" category="list-text">所有 OpenShift 和NetApp存储资源通常由存储管理员管理。存储管理员的访问权限由安装Trident时创建的 trident 操作员角色控制。除此之外，存储管理员还需要访问 ResourceQuotas 来控制存储的消耗方式。</block>
  <block id="cf17c458ea3abaad557d7cfc69886dbe" category="list-text">创建一个用于管理集群中所有项目的 ResourceQuotas 的角色，并将其附加到存储管理员。</block>
  <block id="da668ad9f53286056130ad0ab5a54978" category="list-text">确保集群与组织的身份提供者集成，并且用户组与集群组同步。以下示例显示身份提供者已与集群集成并与用户组同步。</block>
  <block id="36e36b60ddb8f46fe0b9b4e8f4dce56f" category="list-text">为存储管理员配置 ClusterRoleBindings。</block>
  <block id="38f22acd9ae9c74099644738d613baaa" category="admonition">对于存储管理员，必须绑定两个角色：trident-operator 和 resource-quotas。</block>
  <block id="ced38b1f1c19446862c601754b82b94c" category="list-text">为开发者创建 RoleBindings，将developer-project-1 角色绑定到 project-1 中对应的组（ocp-project-1）。</block>
  <block id="2aa292f2ff8b13fe141ca55c27bc29c2" category="list-text">同样的，在project-2中为开发者创建RoleBindings，将开发者角色绑定到对应的用户组。</block>
  <block id="254f642527b45bc260048e30704edb39" category="doc">配置</block>
  <block id="2edab6f378191e9c4bdd5225d7830871" category="paragraph">以下是使用NetApp在 Red Hat OpenShift 上配置多租户的先决条件。</block>
  <block id="4e92dab2ab2bbe684f09a2aca58c9e44" category="list-text">NetApp ONTAP集群</block>
  <block id="f675b3d5e1e137870f481a742a3ec0af" category="list-text">集群上安装的Trident</block>
  <block id="1db1a9d97c708824712706fc4267ec25" category="list-text">安装了 tridentctl 和 oc 工具并添加到 $PATH 的管理员工作站</block>
  <block id="7cf4175762acfbabf9178d34f2504b28" category="list-text">ONTAP管理员访问权限</block>
  <block id="10a540d0ed57154e8676c5725af53935" category="list-text">集群管理员访问 OpenShift 集群</block>
  <block id="6340f6ab1111f349228595ebceb8f6db" category="list-text">集群与身份提供者集成</block>
  <block id="9e110c19bb79322a0b76199795550dea" category="list-text">配置身份提供者以有效区分不同团队中的用户</block>
  <block id="44b1200b793638d4a3aebd1bee591e12" category="paragraph">对于任何多租户解决方案，任何用户都不能访问超出所需的集群资源。因此，作为多租户配置的一部分而要配置的整个资源集被划分到集群管理员、存储管理员和每个项目的开发人员之间。</block>
  <block id="1ceba10f8902735a18e8c3bb3e8a3052" category="paragraph">下表概述了不同用户需要执行的不同任务：</block>
  <block id="bbbabdbe1b262f75d99d62880b953be1" category="cell">角色</block>
  <block id="ef615563c8e8ea902c7fcac3cd2c4246" category="cell">Tasks</block>
  <block id="064dceba374668ef0734be5f9e182682" category="cell">*集群管理员*</block>
  <block id="445b72f2cbecd97022bb6636eda3cbc7" category="cell">为不同的应用程序或工作负载创建项目</block>
  <block id="e033ab3bea3b8a20afb5852070df0203" category="cell">为 storage-admin 创建 ClusterRoles 和 RoleBindings</block>
  <block id="293d08622718634a8518b6fcc6376617" category="cell">为开发人员创建角色和角色绑定，分配对特定项目的访问权限</block>
  <block id="3e97e469255cd3686174c371f50961f9" category="cell">[可选] 配置项目以在特定节点上调度 Pod</block>
  <block id="93ffd2b1215bc47cc78b020f89e922ef" category="cell">*存储管理*</block>
  <block id="043ab42cdcbdacc4691c26ee52ed8ccd" category="cell">在NetApp ONTAP上创建 SVM</block>
  <block id="be09a24f118a66330a40633e9d5ebfca" category="cell">创建Trident后端</block>
  <block id="55995e8c220e05b3e75252cccf5752be" category="cell">创建存储类</block>
  <block id="2a5eb41b2d7fd04d01836f89ab790852" category="cell">创建存储资源配额</block>
  <block id="4e00898ecc4e6640083ccff8d85fbe87" category="cell">*开发人员*</block>
  <block id="bfc5fb8ef5464441bc8b3ca7eda2892d" category="cell">验证在指定项目中创建或修补 PVC 或 Pod 的权限</block>
  <block id="9e95c94350b2b7b51176ad958deb1388" category="cell">验证在另一个项目中创建或修补 PVC 或 Pod 的权限</block>
  <block id="8c0b7954d326b4bcf2f42a57ef00eead" category="cell">验证查看或编辑项目、资源配额和存储类的权限</block>
  <block id="c48db988cd283c11f89d4dd85803ec0a" category="doc">使用NetApp在 Red Hat OpenShift 上配置多租户</block>
  <block id="6d72da55d82cdd434045ba5df1a959b6" category="paragraph">许多在容器上运行多个应用程序或工作负载的组织倾向于为每个应用程序或工作负载部署一个 Red Hat OpenShift 集群。这使得他们能够对应用程序或工作负载实施严格隔离，优化性能并减少安全漏洞。但是，为每个应用程序部署单独的 Red Hat OpenShift 集群会带来一系列问题。它增加了必须自行监控和管理每个集群的运营开销，由于不同应用程序的专用资源而增加了成本，并阻碍了有效的可扩展性。</block>
  <block id="332dcd535fa9ce865f462efb80829a35" category="paragraph">为了克服这些问题，可以考虑在单个 Red Hat OpenShift 集群中运行所有应用程序或工作负载。但在这样的架构下，资源隔离和应用安全漏洞是主要挑战之一。一个工作负载中的任何安全漏洞都可能自然蔓延到另一个工作负载，从而扩大影响范围。此外，由于默认情况下没有资源分配策略，因此一个应用程序突然不受控制地利用资源都会影响另一个应用程序的性能。</block>
  <block id="14a9bacc4b197037f54eb0c4c7e1970c" category="paragraph">因此，组织寻求能够兼顾两方面优势的解决方案，例如，允许他们在单个集群中运行所有工作负载，同时又为每个工作负载提供专用集群的优势。</block>
  <block id="73c1b26ace2fc5fca6e6e78c00a61837" category="paragraph">一个有效的解决方案是在 Red Hat OpenShift 上配置多租户。多租户是一种允许多个租户在同一个集群上共存的架构，对资源、安全性等进行适当的隔离。在此上下文中，租户可被视为集群资源的子集，配置为由特定用户组用于专用目的。在 Red Hat OpenShift 集群上配置多租户具有以下优势：</block>
  <block id="cde9f9f8fcae0cdc6624895868803d60" category="list-text">通过共享集群资源来减少资本支出和运营支出</block>
  <block id="943a49720e6c85fa9692af2a5ebd8829" category="list-text">降低运营和管理开销</block>
  <block id="f51a58b3ab19c778652fcff9dd39ca55" category="list-text">保护工作负载免受安全漏洞的交叉污染</block>
  <block id="181cfddfdb055879df4d55323a14c473" category="list-text">保护工作负载免受资源争用导致的意外性能下降</block>
  <block id="2ce277c26af86740eeeebd4cfa94c762" category="paragraph">对于完全实现的多租户 OpenShift 集群，必须为属于不同资源桶的集群资源配置配额和限制：计算、存储、网络、安全等。虽然我们在此解决方案中涵盖了所有资源桶的某些方面，但我们专注于通过在由 NetApp ONTAP 支持的TridentNetApp分配的存储资源上配置多租户来隔离和保护同一 Red Hat OpenShift 集群上多个工作负载所服务或使用的数据的ONTAP实践。</block>
  <block id="ec22e01e7cd5087ef746b3db5852da6e" category="doc">扩展：添加更多项目</block>
  <block id="0e4136a9f4ad3204c07db26d3c28a546" category="paragraph">在多租户配置中，添加具有存储资源的新项目需要进行额外的配置以确保不违反多租户原则。要在多租户集群中添加更多项目，请完成以下步骤：</block>
  <block id="c8acb1fa89b1ec9d78799a2dd4aa8b59" category="list-text">以存储管理员身份登录NetApp ONTAP集群。</block>
  <block id="d0ed0d7b81278233c852e4a0d8aa123b" category="list-text">导航至<block ref="ba7ff8660fabd8daa8e7fbd0c74dd990" prefix=" " category="inline-code"></block>并点击<block ref="ec211f7c20af43e742bf2570c3cb84f9" prefix=" " category="inline-code"></block>。创建一个专用于 project-3 的新 SVM。还要创建一个 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="5790e2b8b367726e78500054d959d6f7" category="inline-image-macro">创建 SVM 进行缩放</block>
  <block id="b3f681e948324bfca6c339bd9660347c" category="paragraph"><block ref="b3f681e948324bfca6c339bd9660347c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0c67e9a89c7ece3169ab5849bb0e411" category="list-text">以集群管理员身份登录 Red Hat OpenShift 集群。</block>
  <block id="c9e86337c7483c8d45e5e535829d2163" category="list-text">创建新项目。</block>
  <block id="1c01b62cc887329b006a88e9f959b5d4" category="list-text">确保在 IdP 上创建了 project-3 的用户组并与 OpenShift 集群同步。</block>
  <block id="46c82384780a492254c43d461363d9ac" category="list-text">为 project-3 创建开发人员角色。</block>
  <block id="21ac9e9bbb2cfc707143311f4601af1c" category="admonition">本节提供的角色定义仅仅是一个示例。必须根据最终用户的要求来定义开发人员的角色。</block>
  <block id="8efa8222e644f71e636f98917439566d" category="list-text">为 project-3 中的开发人员创建 RoleBinding，将 development-project-3 角色绑定到 project-3 中相应的组（ocp-project-3）。</block>
  <block id="e1f01c3341da15c9079bf5996c059811" category="list-text">以存储管理员身份登录 Red Hat OpenShift 集群</block>
  <block id="2ca2d57f42208b6e7e9026b491595f41" category="list-text">创建Trident后端并将其映射到专用于 project-3 的 SVM。  NetApp建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM，而不是使用ONTAP集群管理员。</block>
  <block id="c4dcda95616fac9215b5dac3cde37220" category="admonition">我们在此示例中使用 ontap-nas 驱动程序。根据用例使用适当的驱动程序创建后端。</block>
  <block id="8628ed29313534f54f01e0da36e66ab7" category="admonition">我们假设Trident已安装在 trident 项目中。</block>
  <block id="55da75937cfedfe97c220c1e9d556d84" category="list-text">为 project-3 创建存储类并将其配置为使用专用于 project-3 的后端存储池。</block>
  <block id="6efdcf6ed405066371d23375541816a1" category="list-text">创建 ResourceQuota 来限制 project-3 中的资源从专用于其他项目的存储类中请求存储。</block>
  <block id="1dea1d57247580b530335ec2d484f8a5" category="list-text">修补其他项目中的 ResourceQuotas，以限制这些项目中的资源访问专用于 project-3 的存储类的存储。</block>
  <block id="d008c60ddb28c0bbad1dfabdd77327fc" category="doc">配置：存储管理任务</block>
  <block id="6c0ed744c737f30af364d229639c8288" category="paragraph">存储管理员必须配置以下资源：</block>
  <block id="64244866ddff81ded5e6aaa49055c6aa" category="list-text">以管理员身份登录NetApp ONTAP集群。</block>
  <block id="85ca996063b5ec233e56a20ba93c5f44" category="list-text">导航到存储&gt;存储虚拟机，然后单击添加。通过提供所需的详细信息，创建两个 SVM，一个用于项目 1，另一个用于项目 2。还要创建一个 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="3f8bc17bf8dd138aa2915235f0a9c0d3" category="inline-image-macro">在ONTAP上创建 SVM</block>
  <block id="0b6bdd5822abd876e9985611641304dc" category="paragraph"><block ref="0b6bdd5822abd876e9985611641304dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b436e7799d01413277e05983e509574a" category="list-text">以存储管理员身份登录 Red Hat OpenShift 集群。</block>
  <block id="c9bd46366e9fb78552566f1e7a13633a" category="list-text">为 project-1 创建后端并将其映射到专用于该项目的 SVM。  NetApp建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM，而不是使用ONTAP集群管理员。</block>
  <block id="f934b433773b966e5ebe0c7172decda4" category="admonition">我们在此示例中使用 ontap-nas 驱动程序。根据用例创建后端时使用适当的驱动程序。</block>
  <block id="4a6c648106c1ff38316705bf986de601" category="list-text">类似地为 project-2 创建Trident后端并将其映射到专用于 project-2 的 SVM。</block>
  <block id="9a45d41277a2e8ce29709826a31fb482" category="list-text">接下来，创建存储类。为 project-1 创建存储类，并通过设置 storagePools 参数将其配置为使用专用于 project-1 的后端存储池。</block>
  <block id="4350d40426f8c94f6ca046609969adb2" category="list-text">同样，为 project-2 创建一个存储类并将其配置为使用专用于 project-2 的后端存储池。</block>
  <block id="2ee847ebe129ae778860d6dd2da21cf6" category="list-text">创建 ResourceQuota 来限制 project-1 中的资源从专用于其他项目的存储类中请求存储。</block>
  <block id="c689ae18a0f5e47541dcec4afb6e187a" category="list-text">类似地，创建一个 ResourceQuota 来限制 project-2 中的资源从专用于其他项目的存储类中请求存储。</block>
  <block id="13148717f8faa9037f37d28971dfc219" category="doc">验证</block>
  <block id="286c0d2f200233e63709210881b700c4" category="paragraph">要验证前面步骤中配置的多租户架构，请完成以下步骤：</block>
  <block id="627fd2c5e0310dc7409ea377e5d13045" category="section-title">验证在指定项目中创建 PVC 或 Pod 的权限</block>
  <block id="f4da6475fc7e97756adf2751840e077d" category="list-text">以 ocp-project-1-user、project-1 中的开发人员身份登录。</block>
  <block id="2d7fbbcee3114769610fea6ef6f4cdf0" category="list-text">检查创建新项目的权限。</block>
  <block id="12cdc5f68c3a0ca10544c0a57e866249" category="list-text">使用分配给 project-1 的存储类在 project-1 中创建 PVC。</block>
  <block id="145d2249af633a497182f76e714d1f2e" category="list-text">检查与 PVC 关联的 PV。</block>
  <block id="d424ec829e7a6f56de4d74835b97103a" category="list-text">验证 PV 及其卷是否在NetApp ONTAP上专用于 project-1 的 SVM 中创建。</block>
  <block id="a345b6be662b316a3b3e3cfbc7566b31" category="list-text">在 project-1 中创建一个 pod，并挂载上一步创建的 PVC。</block>
  <block id="7b929f9e235c85c6b73ed2ee867c5514" category="list-text">检查 pod 是否正在运行以及是否安装了卷。</block>
  <block id="8c9885c86a67cc4c47a30d7e8d14badb" category="section-title">验证在另一个项目中创建 PVC 或 Pod 或使用专用于另一个项目的资源的访问权限</block>
  <block id="8e27501b578972bd7b65468deaa482ca" category="list-text">使用分配给 project-2 的存储类在 project-1 中创建 PVC。</block>
  <block id="71bc5a6f1f0141981e0034b388233917" category="list-text">在 project-2 中创建 PVC。</block>
  <block id="1149bf04288dfa82d0e3b713a6e66aa1" category="list-text">确保 PVC<block ref="1ff946dbad16e896f78812f54d491d28" prefix=" " category="inline-code"></block>和<block ref="146dc2badf14b242d7e386acd7f9b2aa" prefix=" " category="inline-code"></block>沒有創造。</block>
  <block id="0d843e91c3b8f62457e19b2d32ecace3" category="list-text">在 project-2 中创建一个 pod。</block>
  <block id="83aa0a39007c30e71adde6fbf8180d9f" category="section-title">验证查看和编辑项目、资源配额和存储类的权限</block>
  <block id="43700888cdcd166f379f95bd1751ae63" category="list-text">检查创建新项目的权限。</block>
  <block id="32579947c29f341292c3ce775140178b" category="list-text">验证查看项目的访问权限。</block>
  <block id="9e97a1398bb4a0499bb69bf1c9e67d6a" category="list-text">检查用户是否可以查看或编辑 project-1 中的 ResourceQuotas。</block>
  <block id="17a658c4329ed475a82d2e02c0406118" category="list-text">验证用户是否有权查看存储类别。</block>
  <block id="aa177e49bfc4cc0182f57218ce6bdd4d" category="list-text">检查访问权限以描述存储类别。</block>
  <block id="4f0456294d6d4699e5b8694995c58fce" category="list-text">验证用户编辑存储类的权限。</block>
  <block id="8921c6e9843ba7487c77f4dce1467111" category="summary">NetApp Element软件提供模块化、可扩展的性能，每个存储节点都为环境提供有保证的容量和吞吐量。  NetApp Element系统可以在单个集群中从 4 个节点扩展到 100 个节点，并提供许多高级存储管理功能。</block>
  <block id="5d77fe4a6bb4c5e88c5c18510b3c4749" category="doc">NetApp Element：Red Hat OpenShift 与NetApp</block>
  <block id="53c583e55a36ad49234df678a2dbcf45" category="paragraph">NetApp Element软件提供模块化、可扩展的性能，每个存储节点都为环境提供有保证的容量和吞吐量。  NetApp Element系统可以在单个集群中从 4 个节点扩展到 100 个节点，并提供许多高级存储管理功能。</block>
  <block id="19c6fa5394ba7047e26a53d94179ebf9" category="paragraph"><block ref="19c6fa5394ba7047e26a53d94179ebf9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27765508a97a89684590658c3465fb70" category="inline-link">NetApp Solidfire 网站</block>
  <block id="d37eaafbb6dfb29673d63ff988ff4f41" category="paragraph">有关NetApp Element存储系统的更多信息，请访问<block ref="0d1d77e6774527457304fa15f73899a1" category="inline-link-rx"></block>。</block>
  <block id="bd4ffcaabbe4a4f83fbfaaa2e34dc8a3" category="section-title">iSCSI 登录重定向和自我修复功能</block>
  <block id="dbafa7c074ef7efc3c778b69c0ad31b5" category="paragraph">NetApp Element软件利用 iSCSI 存储协议，这是在传统 TCP/IP 网络上封装 SCSI 命令的标准方法。当 SCSI 标准发生变化或以太网性能提高时，iSCSI 存储协议将受益，而无需进行任何更改。</block>
  <block id="23e6b910b28346537f5696478fffe779" category="paragraph">尽管所有存储节点都有一个管理 IP 和一个存储 IP，但NetApp Element软件会为集群中的所有存储流量公布一个存储虚拟 IP 地址（SVIP 地址）。作为 iSCSI 登录过程的一部分，存储可以响应目标卷已移动到不同的地址，因此无法继续协商过程。然后，主机会向新地址重新发出登录请求，整个过程不需要主机端重新配置。此过程称为 iSCSI 登录重定向。</block>
  <block id="b8603f3d585261d0005c7c5e51108d19" category="paragraph">iSCSI 登录重定向是NetApp Element软件集群的关键部分。当收到主机登录请求时，节点根据 IOPS 和卷的容量要求决定集群中的哪个成员应该处理流量。卷分布在NetApp Element软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配。在整个阵列中分配给定卷的多个副本。</block>
  <block id="772db62cf9ecb837ed4f0a91a5963492" category="paragraph">通过这种方式，如果节点故障后进行卷重新分配，则除了注销并登录并重定向到新位置之外，对主机连接没有影响。借助 iSCSI 登录重定向， NetApp Element软件集群是一种可自我修复、横向扩展的架构，能够实现无中断升级和运行。</block>
  <block id="5c8e89de2b8e6e2f103d858b59e5aca0" category="section-title">NetApp Element软件集群 QoS</block>
  <block id="16600c3602f9acbaa2286f34135f6bb8" category="paragraph">NetApp Element软件集群允许根据每个卷动态配置 QoS。您可以使用每个卷的 QoS 设置根据您定义的 SLA 来控制存储性能。以下三个可配置参数定义 QoS：</block>
  <block id="d91a826908d0c27cf5d21d2152292ab0" category="list-text">*最低 IOPS。* NetApp Element软件集群为卷提供的最小持续 IOPS 数。为卷配置的最小 IOPS 是卷的保证性能级别。每卷的性能不会低于这个水平。</block>
  <block id="f8cd3dfe225577e230dc2699ebbbfe34" category="list-text">*最大 IOPS。*  NetApp Element软件集群为特定卷提供的最大持续 IOPS 数。</block>
  <block id="827b5871d6ce8f2203a567ef3024f072" category="list-text">*突发 IOPS。*短时间突发场景下允许的最大 IOPS 数。突发持续时间设置是可配置的，默认为 1 分钟。如果卷的运行速度低于最大 IOPS 水平，则会累积突发积分。当性能水平变得非常高并被推动时，卷上允许出现超出最大 IOPS 的短时间突发 IOPS。</block>
  <block id="e95bb6f1e85d1ffe0eb983fd5e0fbde8" category="section-title">多租户</block>
  <block id="086d1eacd91102f734387f0266326344" category="paragraph">安全多租户通过以下功能实现：</block>
  <block id="97bee3e8d0db89b2cd19eba861763e7a" category="list-text">*安全认证。*质询握手身份验证协议 (CHAP) 用于安全卷访问。轻量级目录访问协议 (LDAP) 用于安全访问集群以进行管理和报告。</block>
  <block id="c417adb168446c2bb99969f24fb15dd1" category="list-text">卷访问组 (VAG)。或者，可以使用 VAG 代替身份验证，将任意数量的 iSCSI 启动器特定的 iSCSI 限定名称 (IQN) 映射到一个或多个卷。要访问 VAG 中的卷，启动器的 IQN 必须位于该卷组允许的 IQN 列表中。</block>
  <block id="28328e0db9c18c9ada207997f806124f" category="list-text">租户虚拟局域网 (VLAN)。在网络级别，通过使用 VLAN 实现 iSCSI 启动器和NetApp Element软件集群之间的端到端网络安全。对于为隔离工作负载或租户而创建的任何 VLAN， NetApp Element Software 都会创建一个单独的 iSCSI 目标 SVIP 地址，该地址只能通过特定的 VLAN 访问。</block>
  <block id="5fec85270e969240cc769f429b9c8cdc" category="list-text">*启用 VRF 的 VLAN。*为了进一步支持数据中心的安全性和可扩展性， NetApp Element软件允许您启用任何租户 VLAN 以实现类似 VRF 的功能。此功能增加了以下两个关键功能：</block>
  <block id="fca8436836d48525b8d98babbfd68518" category="list-text">*L3 路由到租户 SVIP 地址。*此功能允许您将 iSCSI 启动器放置在与NetApp Element软件集群不同的网络或 VLAN 上。</block>
  <block id="eaea554ececf5b64515f0833c56b3de4" category="list-text">*重叠或重复的 IP 子网。*此功能使您能够向租户环境添加模板，从而允许每个相应的租户 VLAN 分配来自同一 IP 子网的 IP 地址。此功能对于服务提供商环境中非常有用，因为 IP 空间的规模和保存非常重要。</block>
  <block id="c08531651ee4977d5020da1b84003631" category="section-title">企业存储效率</block>
  <block id="78712bd6b2d8e5531e122b5e849fb842" category="paragraph">NetApp Element软件集群提高了整体存储效率和性能。以下功能以内联方式执行，始终处于开启状态，并且不需要用户手动配置：</block>
  <block id="6893566c26b28e197cebdefdcc6af3ae" category="list-text">*重复数据删除*系统仅存储唯一的 4K 块。任何重复的 4K 块都会自动与已存储的数据版本相关联。数据位于块驱动器上，并使用NetApp Element软件 Helix 数据保护进行镜像。该系统大大减少了容量消耗和系统内的写入操作。</block>
  <block id="2e5dd3a69ccb3f04d7814fc742318204" category="list-text">*压缩。*在数据写入NVRAM之前，压缩是内联执行的。数据被压缩，存储在 4K 块中，并在系统中保持压缩状态。这种压缩显著减少了整个集群的容量消耗、写入操作和带宽消耗。</block>
  <block id="215de8162cb5ac909005881f92812fb0" category="list-text">*精简配置。*此功能可在您需要时提供适量的存储，从而消除因卷过度配置或卷利用不足而导致的容量消耗。</block>
  <block id="95f1b89c8e9c330fcfdc8ec84633bfe6" category="list-text">*螺旋。*单个卷的元数据存储在元数据驱动器上，并复制到辅助元数据驱动器以实现冗余。</block>
  <block id="da9c9b2b4164632e569069fe1e7c53ee" category="admonition">Element 是为自动化而设计的。所有存储功能均可通过 API 获得。这些 API 是 UI 用来控制系统的唯一方法。</block>
  <block id="e4762763c905a271ba1e63609f0e0da0" category="paragraph">这两种系统均由NetApp ONTAP数据管理软件提供支持，这是业界最先进的数据管理软件，具有高可用性、云集成、简化的存储管理功能，可提供您的数据结构所需的企业级速度、效率和安全性。</block>
  <block id="35f7c29efc923e8a7920a0b331095d71" category="section-title">Amazon FSx ONTAP</block>
  <block id="d744ebba12219aac3b1e9ca744e22939" category="paragraph">Amazon FSx ONTAP通过ONTAP流行的数据访问和管理功能在 AWS 云中提供完全托管的共享存储。有关Amazon FSx ONTAP 的更多信息，请单击<block ref="7573663d3852e00b0e56a5dac3594a6a" category="inline-link-rx"></block>。</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="section-title">Azure NetApp Files</block>
  <block id="b2ed084fcecb6db65b12c65588a0a926" category="paragraph">Azure NetApp Files是 Azure 原生的、第一方的、企业级的高性能文件存储服务。它提供卷即服务，您可以为其创建NetApp帐户、容量池和卷。您还可以选择服务和性能级别并管理数据保护。您可以使用熟悉并依赖的相同协议和工具来创建和管理高性能、高可用性和可扩展的文件共享。有关Azure NetApp Files 的更多信息，请单击<block ref="fc5eaf030008b3907c3925b272228bba" category="inline-link-rx"></block>。</block>
  <block id="1215f8190533dfdf63d2224a6d88266f" category="section-title">Google Cloud NetApp Volumes</block>
  <block id="6a529e89f36a18cfaf22ebfd0be19ce9" category="paragraph">Google Cloud NetApp Volumes是一种完全托管的基于云的数据存储服务，可提供高级数据管理功能和高度可扩展的性能。它允许您将基于文件的应用程序移动到 Google Cloud。它内置支持网络文件系统（NFSv3 和 NFSv4.1）和服务器消息块（SMB）协议，因此您无需重新构建应用程序，并可以继续为您的应用程序获取持久存储。有关 Google Cloud NetApp VolumesP 的更多信息，请点击<block ref="9ef49dd5917f54781359b5df82c18923" category="inline-link-rx"></block>。</block>
  <block id="0d1d64b47559f0c28c883e7e790b8363" category="summary">本节专门介绍实际用户在将此解决方案部署到生产中时可能需要执行的自定义，例如创建专用映像注册表或部署自定义负载均衡器实例。</block>
  <block id="becc5334b7f3d2f4f57fc42cd287fd54" category="inline-link-macro">探索负载均衡器选项</block>
  <block id="03915c22e7d8c9b4408637a36d6cf531" category="list-text"><block ref="03915c22e7d8c9b4408637a36d6cf531" category="inline-link-macro-rx"></block></block>
  <block id="261bdcc1d2c24d15c43c5947e69ea9e6" category="inline-link-macro">配置私有镜像仓库</block>
  <block id="4db9fc0f5dec1ff20a4f540d01f6a279" category="list-text"><block ref="4db9fc0f5dec1ff20a4f540d01f6a279" category="inline-link-macro-rx"></block></block>
  <block id="22d9c8b4bb9bf15ccdf545eeafc0726a" category="summary">AWS 上的 Red Hat OpenShift Service 是一个完全托管的 Kubernetes 平台，允许开发人员在 AWS 云中构建和部署应用程序。</block>
  <block id="d2154db2b88b25388e0f4a7a9080bfc9" category="doc">AWS 上的 Red Hat OpenShift 服务</block>
  <block id="766d8f4095b175049f35406578d94edd" category="paragraph">AWS 上的 Red Hat OpenShift 服务 (ROSA) 是一项托管服务，您可以使用它在 AWS 上通过 Red Hat OpenShift 企业 Kubernetes 平台构建、扩展和部署容器化应用程序。  ROSA 简化了将本地 Red Hat OpenShift 工作负载迁移到 AWS 的过程，并提供了与其他 AWS 服务的紧密集成。</block>
  <block id="d483e01f45d71ca0669987bbcc52540e" category="inline-link-macro">AWS 上的 Red Hat OpenShift 服务（AWS 文档）</block>
  <block id="bbb05e22e5510003079ee7cd19c0c6d2" category="inline-link-macro">AWS 上的 Red Hat OpenShift 服务（Red Hat 文档）</block>
  <block id="5ea6f8c087350d475e8efbd9a881ed93" category="paragraph">有关 ROSA 的更多信息，请参阅此处的文档：<block ref="c87c8cdbb7e33ff8fe1cc4ee73c952c9" category="inline-link-macro-rx"></block> 。<block ref="bcb0e22b6c58858701d793bcb18b8c4b" category="inline-link-macro-rx"></block> 。</block>
  <block id="aa9095c5ba77e3549672e5c4fae1fedc" category="doc">裸机上的 OpenShift</block>
  <block id="a62e902f0d244d960eddf2f14d3afa6f" category="paragraph">OpenShift on Bare Metal 可在商用服务器上自动部署 OpenShift 容器平台。</block>
  <block id="0e05c6235b67ae8e5b743c9ca77358fa" category="paragraph">OpenShift on Bare Metal 类似于 OpenShift 的虚拟部署，它可以轻松部署、快速配置和扩展 OpenShift 集群，同时支持尚未准备好容器化的应用程序的虚拟化工作负载。通过在裸机上部署，您不需要除了 OpenShift 环境之外管理主机虚拟机管理程序环境所需的额外开销。通过直接在裸机服务器上部署，您还可以减少主机和 OpenShift 环境之间共享资源的物理开销限制。</block>
  <block id="67a3852a946bc539243cc1e5f8982d03" category="section-title">OpenShift on Bare Metal 提供以下功能：</block>
  <block id="b6c4f27764ca359c19a70c2b1cbc1d97" category="list-text">*IPI 或辅助安装程序部署* 通过在裸机服务器上由安装程序配置基础设施 (IPI) 部署的 OpenShift 集群，客户可以直接在商用服务器上部署高度通用、易于扩展的 OpenShift 环境，而无需管理虚拟机管理程序层。</block>
  <block id="f8ed0733873bb3b372f7a9467a850d93" category="list-text">*紧凑的集群设计* 为了最大限度地减少硬件要求，裸机上的 OpenShift 允许用户部署仅 3 个节点的集群，通过使 OpenShift 控制平面节点也可以充当工作节点和主机容器。</block>
  <block id="6579bfdd2d4dc076bdbb8cbece3b4cc0" category="list-text">*OpenShift 虚拟化* OpenShift 可以使用 OpenShift 虚拟化在容器内运行虚拟机。这种容器原生虚拟化在容器内运行 KVM 虚拟机管理程序，并为 VM 存储附加持久卷。</block>
  <block id="b0500e4f37101d510007bfaf623af7ed" category="list-text">*AI/ML 优化基础设施* 通过将基于 GPU 的工作节点合并到您的 OpenShift 环境并利用 OpenShift Advanced Scheduling，为机器学习应用程序部署 Kubeflow 等应用程序。</block>
  <block id="19c939070c0b6ebbb52e1e0119b15301" category="section-title">网络设计</block>
  <block id="6bc136fcf409560a1029f6f323619bbf" category="paragraph">NetApp解决方案上的 Red Hat OpenShift 使用两个数据交换机以 25Gbps 提供主要数据连接。它还使用两个管理交换机，以 1Gbps 的速度提供存储节点的带内管理连接以及 IPMI 功能的带外管理连接。</block>
  <block id="17fea9675576fc9c72deb9501a5fd16a" category="paragraph">对于 OpenShift 裸机 IPI 部署，您必须创建一个配置节点，即一台必须具有连接到单独网络的网络接口的 Red Hat Enterprise Linux 8 机器。</block>
  <block id="8412476b5a3f9221e4b79f8abf725696" category="list-text">*配置网络* 该网络用于启动裸机节点并安装部署 OpenShift 集群所需的映像和包。</block>
  <block id="e6eb5af4aff65961a7f350b2222a4119" category="list-text">*裸机网络* 该网络用于集群部署后面向公众的通信。</block>
  <block id="7633522f66aaba6bc4bb2c25d299d287" category="paragraph">为了设置配置节点，客户创建桥接接口，允许流量在节点本身和为部署目的而配置的 Bootstrap VM 上正确路由。集群部署完成后，API 和 ingress VIP 地址从 bootstrap 节点迁移到新部署的集群。</block>
  <block id="963d7d04e1f1692a7fc49ae899123dbd" category="paragraph">下图描述了 IPI 部署期间和部署完成后的环境。</block>
  <block id="df03861ebb174b56c9b0df19a6687ad4" category="paragraph"><block ref="df03861ebb174b56c9b0df19a6687ad4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ac6c6948754bef1f31b658d9ec4e16a" category="paragraph"><block ref="7ac6c6948754bef1f31b658d9ec4e16a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1744781b12c15ad3b748bea44d9582b" category="section-title">VLAN 要求</block>
  <block id="c5a0639a1bbc3695e0ebaf4c3affe363" category="paragraph">Red Hat OpenShift 与NetApp解决方案旨在通过使用虚拟局域网 (VLAN) 在逻辑上分离用于不同用途的网络流量。</block>
  <block id="87495e311a3944910e3cc0c7bee3d754" category="cell">VLAN</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="05808f0e86c04c2a062c2e041f9e0827" category="cell">VLAN ID</block>
  <block id="b7dff125c9fce628900142990708436f" category="cell">带外管理网络</block>
  <block id="3d9073c9e531118eb3aff0f20647c86f" category="cell">裸机节点和 IPMI 管理</block>
  <block id="c74d97b01eae257e44aa9d5bade97baf" category="cell">16</block>
  <block id="f53272342c85041784b2d5136e6eaa7d" category="cell">裸机网络</block>
  <block id="44a94f76baabd05ab407f76c946326c8" category="cell">集群可用时，OpenShift 服务的网络</block>
  <block id="fc221309746013ac554571fbd180e1c8" category="cell">181</block>
  <block id="11405696f0e53417a3847f430a7b8ed0" category="cell">配置网络</block>
  <block id="846325c36d78e7582d8bfcab277ca67a" category="cell">通过 IPI 进行 PXE 启动和安装裸机节点的网络</block>
  <block id="dfeb9598fbfb97cc6bbcc0aff2c785d6" category="cell">3485</block>
  <block id="eb5f501445f81cb1f7f4cf290565f9c8" category="admonition">尽管这些网络实际上是由 VLAN 分隔的，但每个物理端口都必须设置为访问模式并分配主 VLAN，因为在 PXE 启动序列期间无法传递 VLAN 标签。</block>
  <block id="3ab0ae61b5256f874297403903fd5afc" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础设施：</block>
  <block id="06a9d12a76441fd395abeba7bf0d7b91" category="list-text">至少有一个 DNS 服务器提供可从带内管理网络和 VM 网络访问的完整主机名解析。</block>
  <block id="35be109b995061abd3392d1b01fd0e9a" category="summary">Red Hat OpenStack 平台提供了一个集成的基础来创建、部署和扩展安全可靠的私有 OpenStack 云。</block>
  <block id="5f6a8f3661e7319797d4eab6792350e6" category="doc">Red Hat OpenStack 平台上的 OpenShift</block>
  <block id="639813d9aa126816c3f9e9de2a45ce17" category="paragraph">OSP 是一种基础设施即服务 (IaaS) 云，由管理计算、存储和网络资源的一系列控制服务实现。该环境使用基于 Web 的界面进行管理，允许管理员和用户控制、配置和自动化 OpenStack 资源。此外，OpenStack 基础设施通过广泛的命令行界面和 API 实现，为管理员和最终用户提供完全自动化功能。</block>
  <block id="dc34aa9761794ceabad79dc29944976e" category="paragraph">OpenStack项目是一个快速发展的社区项目，每六个月提供一次更新版本。最初，Red Hat OpenStack Platform 通过随每个上游版本发布新版本并为每三个版本提供长期支持来跟上此发布周期。最近，随着 OSP 16.0 版本（基于 OpenStack Train）的发布，Red Hat 选择不跟上版本号，而是将新功能反向移植到子版本中。最新版本是 Red Hat OpenStack Platform 16.1，其中包括从 Ussuri 和 Victoria 上游版本移植的高级功能。</block>
  <block id="737c38dd225185612ac8fa148ae9583e" category="inline-link-macro">红帽 OpenStack 平台网站</block>
  <block id="588d940c602fa8b127eead0a7b20f748" category="paragraph">有关 OSP 的更多信息，请参阅<block ref="52023575482d8580431ebeb833211aae" category="inline-link-macro-rx"></block>。</block>
  <block id="e2ab8aafc6151adfa655ffd5d2425e7d" category="section-title">OpenStack服务</block>
  <block id="ffd7a6889e6ea6965969472250235082" category="paragraph">OpenStack 平台服务以容器形式部署，从而将服务彼此隔离并实现轻松升级。 OpenStack 平台使用一组通过 Kolla 构建和管理的容器。服务的部署是通过从 Red Hat Custom Portal 提取容器镜像来执行的。这些服务容器使用 Podman 命令进行管理，并使用 Red Hat OpenStack Director 进行部署、配置和维护。</block>
  <block id="cd9222eaa638072680ee36bdc3fda64c" category="paragraph"><block ref="cd9222eaa638072680ee36bdc3fda64c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2ba7e785c49050f48da9aacc45c2b85" category="cell">服务</block>
  <block id="7adea0d9c77aabccd8bb67ae0a832d59" category="cell">项目名称</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">描述</block>
  <block id="2938c7f7e560ed972f8a4f68e80ff834" category="cell">信息板</block>
  <block id="85fb7708d989f936cb51ef53a8af080f" category="cell">Horizon</block>
  <block id="d5a9efab6df20a9e132b774795775dde" category="cell">用于管理 OpenStack 服务的基于 Web 浏览器的仪表板。</block>
  <block id="c9c5c65fb4af9cf90eb99b3b84424189" category="cell">身份</block>
  <block id="1ce2096c300f78bbb8389ca2603e6dd9" category="cell">Keystone</block>
  <block id="91c68681aadba9c0e8308f7d0b3cc416" category="cell">用于对 OpenStack 服务进行身份验证和授权以及管理用户、项目和角色的集中服务。</block>
  <block id="e7a39f4cb0dd0ffaaffe8fb0319dec67" category="cell">OpenStack 网络连接</block>
  <block id="88fac409baf592beb25e285d8663edcb" category="cell">中子</block>
  <block id="0283e46fd80198d441eb742b88cf96f1" category="cell">提供 OpenStack 服务接口之间的连接。</block>
  <block id="4f0550f066ae72bb8c24fc3f59c323bf" category="cell">块存储</block>
  <block id="a7173cc5cdd0e31df00cd34f058b1d33" category="cell">Cinder</block>
  <block id="597dab3a2b3c74e3c266b2f65ec28619" category="cell">管理虚拟机 (VM) 的持久块存储卷。</block>
  <block id="6e747c4965495f2e26bf17e647aa0083" category="cell">Nova</block>
  <block id="f13c04e9c49274cd31bd8092c8f50304" category="cell">管理和配置在计算节点上运行的虚拟机。</block>
  <block id="be53a0541a6d36f6ecb879fa2c584b08" category="cell">映像</block>
  <block id="10ec3a0506fab7073649337ca7be7979" category="cell">Glance</block>
  <block id="d9ff71ddcb6bbbe8ad48ae8b678369d4" category="cell">用于存储虚拟机镜像、卷快照等资源的注册服务。</block>
  <block id="670aaecb1a526fbed439dad3ec353a96" category="cell">对象存储</block>
  <block id="ae832e9b5bda2699db45f3fa6aa8c556" category="cell">Swift</block>
  <block id="41c380458dfcdc118ef573a2d98c6acb" category="cell">允许用户存储和检索文件和任意数据。</block>
  <block id="aa96a21412def0d916f43b639424f8e4" category="cell">遥测</block>
  <block id="8fb4b5e28f192236eaa9e4972f810dbd" category="cell">云高仪</block>
  <block id="ed622b9c64858cc66a01c58893b5d39d" category="cell">提供云资源使用情况的测量。</block>
  <block id="d9cc1f843ea62c12a3e59afbbdc2f9ce" category="cell">编排</block>
  <block id="7d486371bb65b0633535ceba4189d8ed" category="cell">热</block>
  <block id="abaa6ebae60b74638c54a43f3341db8e" category="cell">基于模板的编排引擎，支持自动创建资源栈。</block>
  <block id="5ddbd3cec63b14995bf6a5823b692de7" category="paragraph">Red Hat OpenShift 与NetApp解决方案使用两个数据交换机以 25Gbps 提供主要数据连接。它还使用两个额外的管理交换机，以 1Gbps 的速度提供存储节点的带内管理连接以及 IPMI 功能的带外管理连接。</block>
  <block id="b81a67bf2ab52e16a62a9c71454c90ee" category="paragraph">Red Hat OpenStack Director 需要 IPMI 功能来使用 Ironic 裸机配置服务部署 Red Hat OpenStack Platform。</block>
  <block id="c546b983b02d8654c5b245147d99dcf0" category="paragraph">Red Hat OpenShift 与NetApp旨在通过使用虚拟局域网 (VLAN) 在逻辑上分离用于不同用途的网络流量。此配置可以扩展以满足客户需求或为特定网络服务提供进一步的隔离。下表列出了在NetApp验证解决方案时实施该解决方案所需的 VLAN。</block>
  <block id="414b4843c124e72b43bccf2948a53a41" category="cell">用于管理 Ironic 的物理节点和 IPMI 服务的网络。</block>
  <block id="567f5ee3e60ecdd5338b39cab0006510" category="cell">存储基础设施</block>
  <block id="e8cbca2d71bd2aeff622a07b4ffad6c2" category="cell">用于控制器节点直接映射卷以支持 Swift 等基础设施服务的网络。</block>
  <block id="757b505cfd34c64c85ca5b5690ee5293" category="cell">201</block>
  <block id="e103375dfc18f23e4fc072903e894fe9" category="cell">储存煤渣</block>
  <block id="0bdfa6389eb47674a02f6049f342785d" category="cell">用于将块卷直接映射并附加到环境中部署的虚拟实例的网络。</block>
  <block id="854d6fae5ee42911677c739ee1734486" category="cell">202</block>
  <block id="772d9a23b79ccb504fa0590644934c3b" category="cell">内部 API</block>
  <block id="e44f5f63400b0975b884dc2980ee3a61" category="cell">用于使用 API 通信、RPC 消息和数据库通信的 OpenStack 服务之间的通信的网络。</block>
  <block id="34ed066df378efacc9b924ec161e7639" category="cell">301</block>
  <block id="6252d0571760e3d285e2e41a2b1e7743" category="cell">Tenant（租户）</block>
  <block id="ea414c629935302b115bf3dabf5f827c" category="cell">Neutron 通过 VXLAN 隧道为每个租户提供自己的网络。网络流量在每个租户网络内是隔离的。每个租户网络都有一个与之关联的 IP 子网，网络命名空间意味着多个租户网络可以使用相同的地址范围而不会引起冲突。</block>
  <block id="577bcc914f9e55d5e4e4f82f9f00e7d4" category="cell">302</block>
  <block id="bfd15aa26ba0ced782240c4a8b7e517e" category="cell">存储管理</block>
  <block id="cdc529b5e11a981e4597195c5f1c53b5" category="cell">OpenStack 对象存储（Swift）使用此网络在参与的副本节点之间同步数据对象。代理服务充当用户请求和底层存储层之间的中介接口。代理接收传入的请求并找到必要的副本以检索请求的数据。</block>
  <block id="11b9842e0a271ff252c1903e7132cd68" category="cell">303</block>
  <block id="5214f1e2490f3878e307fd6f81f9f77f" category="cell">PXE</block>
  <block id="16d856c79e739181f35adfe5b791c650" category="cell">OpenStack Director 提供 PXE 启动作为 Ironic 裸机配置服务的一部分，以协调 OSP Overcloud 的安装。</block>
  <block id="966b6dfb6b0819cc10644bea3115cf20" category="cell">3484</block>
  <block id="b206a1b4ea1097761f78e8876f6da779" category="cell">外部</block>
  <block id="f2feccaa3f5d086f0b16010ff463e369" category="cell">公共可用网络，托管用于图形管理的 OpenStack 仪表板（Horizon），并允许公共 API 调用来管理 OpenStack 服务。</block>
  <block id="7b9993fac4b9a60605aa2884eb40f4a3" category="cell">带内管理网络</block>
  <block id="32223320445c4cf46444e40ebde18b7e" category="cell">提供对系统管理功能（例如 SSH 访问、DNS 流量和网络时间协议 (NTP) 流量）的访问。该网络还充当非控制器节点的网关。</block>
  <block id="ab4f2b5fd96ca65349119909c1eada2d" category="cell">3486</block>
  <block id="0bad9231e1bf61bc343a986739f155c1" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础设施：</block>
  <block id="f2260a90424f1d412334d1b3467abd22" category="list-text">至少一个提供完整主机名解析的 DNS 服务器。</block>
  <block id="d70672769aa84f2a999291a645e67355" category="list-text">至少三个NTP服务器可以为解决方案中的服务器保持时间同步。</block>
  <block id="478a3526bd6097c6b7a330fd6aae410e" category="list-text">（可选）OpenShift 环境的出站互联网连接。</block>
  <block id="9a14258452ea5da50d562e08e5b9291c" category="section-title">将 OpenShift 部署到具有至少三个计算节点的 OSP 私有云</block>
  <block id="493fd05bc58266bcd8394072cbe81748" category="paragraph">本文档中描述的经过验证的架构通过部署三个 OSP 控制节点和两个 OSP 计算节点，提供了适合 HA 操作的最小硬件部署。该架构确保了容错配置，其中两个计算节点都可以启动虚拟实例，并且部署的虚拟机可以在两个虚拟机管理程序之间迁移。</block>
  <block id="ebe803a768c48af52bca59e6ab7df9bf" category="paragraph">由于 Red Hat OpenShift 最初部署了三个主节点，因此双节点配置可能会导致至少两个主节点占用同一个节点，如果该特定节点不可用，则可能导致 OpenShift 中断。因此，Red Hat 的最佳实践是部署至少三个 OSP 计算节点，以便 OpenShift 主机可以均匀分布，并且解决方案可以获得额外的容错程度。</block>
  <block id="7a595c63e0ebc069af3da46e3d1c8fee" category="section-title">配置虚拟机/主机亲和性</block>
  <block id="bbfdc160550acbcdb4791a961a165d5d" category="paragraph">通过启用 VM/主机亲和性，可以将 OpenShift 主机分布在多个虚拟机管理程序节点上。</block>
  <block id="cb346122cae28dfb1fcf0811f46296a2" category="paragraph">亲和性是一种为虚拟机和/或主机集合定义规则的方法，用于确定虚拟机是否在同一主机或组中的主机上一起运行，还是在不同的主机上运行。它通过创建由具有一组相同参数和条件的虚拟机和/或主机组成的亲和性组应用于虚拟机。根据亲和性组中的虚拟机是运行在组内的同一主机上还是运行在组内的多个主机上，还是分别运行在不同的主机上，亲和性组的参数可以定义正亲和性或负亲和性。在 Red Hat OpenStack Platform 中，可以通过创建服务器组和配置过滤器来创建和强制执行主机亲和性和反亲和性规则，以便 Nova 在服务器组中部署的实例部署在不同的计算节点上。</block>
  <block id="9c0af999b760fac2aa82d9d105fa7a7e" category="paragraph">一个服务器组最多可以管理 10 个虚拟实例。可以通过更新 Nova 的默认配额来修改这一点。</block>
  <block id="de5bd213c3df23736df75636241f96de" category="admonition">OSP 服务器组存在特定的硬亲和性/反亲和性限制；如果没有足够的资源部署在单独的节点上或没有足够的资源允许共享节点，则虚拟机将无法启动。</block>
  <block id="8aea038e418642b1735131358c24a866" category="inline-link-macro">如何为 OpenStack 实例配置亲和性和反亲和性？</block>
  <block id="b9b537b6c036ca53664ba24b95cb414b" category="paragraph">要配置关联组，请参阅<block ref="e6d55bbdf0ab41341d925ad7a06c94d5" category="inline-link-macro-rx"></block>。</block>
  <block id="ed3ecd4254cc054c70ddee702d7ed519" category="section-title">使用自定义安装文件进行 OpenShift 部署</block>
  <block id="5e059b05dcf86db414d6b8cdd66bcf0f" category="paragraph">IPI 通过本文档前面讨论的交互式向导使 OpenShift 集群的部署变得简单。但是，您可能需要在集群部署过程中更改一些默认值。</block>
  <block id="47a822101acb11c74a4877a3d0b77093" category="inline-link-macro">Red Hat OpenShift 在 OpenStack 上安装自定义集群</block>
  <block id="112f4e7f30ad9cbc041b99087d3e6500" category="paragraph">在这些情况下，您可以运行向导并执行任务，而无需立即部署集群；相反，它会创建一个配置文件，稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者想要在您的环境中部署多个相同的集群用于其他用途（例如多租户），这将非常有用。有关为 OpenShift 创建自定义安装配置的更多信息，请参阅<block ref="448139de1d1e7e28131a802d8158cd87" category="inline-link-macro-rx"></block>。</block>
  <block id="cb8e8e87ec9c630a0a27910fe29abceb" category="summary">RHV 是一个企业虚拟数据中心平台，运行在 Red Hat Enterprise Linux (RHEL) 上并使用 KVM 虚拟机管理程序。</block>
  <block id="f88eb30a75027b557910958c7306cb4e" category="doc">Red Hat 虚拟化上的 OpenShift</block>
  <block id="932e95da8a59703292a426466e703c7a" category="paragraph">Red Hat Virtualization (RHV) 是一个企业虚拟数据中心平台，运行在 Red Hat Enterprise Linux (RHEL) 上并使用 KVM 虚拟机管理程序。</block>
  <block id="603bc85f6f6f4d9e5095745d9252f1d3" category="inline-link-macro">Red Hat 虚拟化网站</block>
  <block id="24749f872afed111082e4454a0583abd" category="paragraph">有关 RHV 的更多信息，请参阅<block ref="a046c007a57f7ff7a2197f69662fe957" category="inline-link-macro-rx"></block>。</block>
  <block id="7adf04762320f012179ffe68fb0aeb9f" category="paragraph">RHV 提供以下功能：</block>
  <block id="d198e9ca7e59f5313859da21138acb94" category="list-text">*虚拟机和主机的集中管理* RHV 管理器在部署中作为物理机或虚拟机 (VM) 运行，并提供基于 Web 的 GUI，以便从中央界面管理解决方案。</block>
  <block id="a2ae760ef875e32aa0f6e6cea19b7843" category="list-text">*自托管引擎* 为了最大限度地减少硬件要求，RHV 允许将 RHV 管理器 (RHV-M) 作为 VM 部署在运行来宾 VM 的同一主机上。</block>
  <block id="78f6af1e137635a3cea4ef964e21c7c6" category="list-text">*高可用性* 为避免主机故障时造成中断，RHV 允许对虚拟机进行高可用性配置。高可用性虚拟机在集群级别使用弹性策略进行控制。</block>
  <block id="dc4a50395fea041f4ee918e8c015755e" category="list-text">*高可扩展性* 单个 RHV 集群最多可拥有 200 个虚拟机管理程序主机，使其能够支持大量虚拟机托管资源密集型企业级工作负载的需求。</block>
  <block id="3fe956f564bcb16eb1d25ab6afdf9bf7" category="list-text">*增强的安全性* 从 RHV 继承而来，RHV 采用安全虚拟化 (sVirt) 和安全增强 Linux (SELinux) 技术来提高主机和虚拟机的安全性和强化程度。这些功能的主要优势是虚拟机及其相关资源的逻辑隔离。</block>
  <block id="c0a0160ce03d8575db0f84da4706c89b" category="paragraph"><block ref="c0a0160ce03d8575db0f84da4706c89b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd4c83df745cf56330120fb3ac308da2" category="paragraph">NetApp解决方案上的 Red Hat OpenShift 使用两个数据交换机以 25Gbps 提供主要数据连接。它还使用两个额外的管理交换机，以 1Gbps 的速度提供存储节点的带内管理连接以及 IPMI 功能的带外管理。 OCP使用RHV上的虚拟机逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的安排和用途，并概述部署解决方案的先决条件。</block>
  <block id="2d7e48e226974692ed3f522a2baef6db" category="paragraph">RHV 上的 Red Hat OpenShift 旨在通过使用虚拟局域网 (VLAN) 在逻辑上分离用于不同目的的网络流量。此配置可以扩展以满足客户需求或为特定网络服务提供进一步的隔离。下表列出了在NetApp验证解决方案时实施该解决方案所需的 VLAN。</block>
  <block id="3c8c5d8387f173924ffeb2bf88084dba" category="cell">物理节点和IPMI的管理</block>
  <block id="c61d980d5248923d65a5dfe7f8818011" category="cell">虚拟机网络</block>
  <block id="f33bd5bca507f2b59fc0a43383ade71b" category="cell">虚拟访客网络访问</block>
  <block id="36a1694bce9815b7e38a9dad05ad42e0" category="cell">1172</block>
  <block id="c347686b0750301dfca053b321126bcc" category="cell">RHV-H 节点、RHV-Manager 和 ovirtmgmt 网络的管理</block>
  <block id="21c5bba1dd6aed9ab48c2b34c1a0adde" category="cell">3343</block>
  <block id="cd3718e8610b820344c9a0284fe84f90" category="cell">存储网络</block>
  <block id="11967d5f57969ea4713204eace8fbf4e" category="cell">NetApp Element iSCSI 的存储网络</block>
  <block id="3083202a936b7d0ef8b680d7ae73fa1a" category="cell">3344</block>
  <block id="3de18ffc25309bd0755d8543a30ded78" category="cell">移民网络</block>
  <block id="c87f7de78a1912f53050e58df90e1445" category="cell">虚拟客户迁移网络</block>
  <block id="38a77aa456fc813af07bb428f2363c8d" category="cell">3345</block>
  <block id="7e4be32047fe5b09a23fd956cd4e82f0" category="section-title">将 OpenShift 部署到至少三个节点的 RHV 集群</block>
  <block id="de4e964e7be880b328384cfedd5873d9" category="paragraph">本文档中描述的经过验证的架构通过部署两个 RHV-H 虚拟机管理程序节点并确保容错配置（其中两个主机都可以管理托管引擎并且部署的虚拟机可以在两个虚拟机管理程序之间迁移）提供了适合 HA 操作的最小硬件部署。</block>
  <block id="4a3fe6077a529bcbe033bbb7d13027d6" category="paragraph">由于 Red Hat OpenShift 最初部署有三个主节点，因此在双节点配置中可以确保至少两个主节点占用同一个节点，如果该特定节点不可用，则可能导致 OpenShift 中断。因此，Red Hat 的最佳实践是将至少三个 RHV-H 虚拟机管理程序节点作为解决方案的一部分进行部署，以便 OpenShift 主机可以均匀分布，并且解决方案可以获得额外的容错程度。</block>
  <block id="b98f17dd49fc6d1c2a9b58922fae2686" category="paragraph">您可以通过启用 VM/主机亲和性将 OpenShift 主机分布在多个虚拟机管理程序节点上。</block>
  <block id="df1b58247681ba5f974a572d530dbdf9" category="paragraph">亲和性是一种为虚拟机和/或主机集合定义规则的方法，用于确定虚拟机是否在同一主机或组中的主机上一起运行，还是在不同的主机上运行。它通过创建由具有一组相同参数和条件的虚拟机和/或主机组成的亲和性组应用于虚拟机。根据亲和性组中的虚拟机是运行在组内的同一主机上还是运行在组内的多个主机上，还是分别运行在不同的主机上，亲和性组的参数可以定义正亲和性或负亲和性。</block>
  <block id="02d7502b2b132a675665088322fde9b0" category="paragraph">参数定义的条件可以是硬执行，也可以是软执行。硬执行确保亲和性组中的虚拟机始终严格遵循正亲和性或负亲和性，而不考虑任何外部条件。软执行确保为亲和性组中的虚拟机设置更高的优先级，以便在可行的情况下遵循正或负亲和性。在本文档描述的两个或三个虚拟机管理程序配置中，软亲和性是推荐的设置。在较大的集群中，硬亲和性可以正确分配 OpenShift 节点。</block>
  <block id="5c00bc5cb1bdae240d18551e77806abd" category="inline-link-macro">红帽 6.11。亲和性群组文档</block>
  <block id="1eb1f8a0b7a23bf292377ca6141c9764" category="paragraph">要配置关联组，请参阅<block ref="71c7e3da1d9a2a54a294147a4cd2de31" category="inline-link-macro-rx"></block>。</block>
  <block id="2b083bcbbb2d2208e64c13cb183af44f" category="paragraph">IPI 通过本文档前面讨论的交互式向导使 OpenShift 集群的部署变得简单。但是，作为集群部署的一部分，可能需要更改一些默认值。</block>
  <block id="1050f3dc9e3ee559789e3b25f2e4f77e" category="inline-link-macro">Red Hat OpenShift 在 RHV 上安装具有自定义的集群</block>
  <block id="cf0ddf5e6e47a8c8022acdc665895746" category="paragraph">在这些情况下，您可以运行并执行向导，而无需立即部署集群。而是创建一个配置文件，以便以后可以部署集群。如果您想要更改任何 IPI 默认值，或者想要在您的环境中部署多个相同的集群用于其他用途（例如多租户），这将非常有用。有关为 OpenShift 创建自定义安装配置的更多信息，请参阅<block ref="25daed5af84e217ef9044fffc5e957eb" category="inline-link-macro-rx"></block>。</block>
  <block id="2772c11e552b243e60a34490c4174ff9" category="doc">VMware vSphere 上的 OpenShift</block>
  <block id="f51df3c7eb6fd29ff4a45c600d597cdc" category="paragraph">有关 VMware vSphere 的更多信息，请参见<block ref="274345b8e0a166805c0e4fb3d51affbd" category="inline-link-macro-rx"></block>。</block>
  <block id="ca7c883830a501eece7802d17466780e" category="list-text">*VMware vCenter Server* VMware vCenter Server 从单个控制台统一管理所有主机和虚拟机，并汇总集群、主机和虚拟机的性能监控。</block>
  <block id="b5833c22ec8627273b0415df731c3ce7" category="list-text">*VMware vSphere vMotion* VMware vCenter 允许您以无中断的方式根据请求在集群中的节点之间热迁移虚拟机。</block>
  <block id="634e669a6bf01bf0ef2b676eae7beb33" category="list-text">*vSphere 高可用性* 为避免主机发生故障时造成中断，VMware vSphere 允许对主机进行集群化并配置为高可用性。因主机故障而中断的虚拟机将在集群中的其他主机上短暂重新启动，从而恢复服务。</block>
  <block id="435136c715673552d02d1fd739606dfc" category="list-text">*分布式资源调度程序 (DRS)* 可以配置 VMware vSphere 集群以平衡其托管的虚拟机的资源需求。存在资源争用的虚拟机可以热迁移到集群中的其他节点，以确保有足够的资源可用。</block>
  <block id="a1c41e824fefb9fbdee9f72a9f61643f" category="paragraph"><block ref="a1c41e824fefb9fbdee9f72a9f61643f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c6371faa8d72dee8337811921707a4b" category="paragraph">NetApp解决方案上的 Red Hat OpenShift 使用两个数据交换机以 25Gbps 提供主要数据连接。它还使用两个额外的管理交换机，以 1Gbps 的速度提供存储节点的带内管理连接以及 IPMI 功能的带外管理连接。 OCP 使用 VMware vSphere 上的 VM 逻辑网络进行集群管理。本节描述了解决方案中使用的每个虚拟网络段的安排和用途，并概述了部署解决方案的先决条件。</block>
  <block id="e75b582a8823d532f6022b43ac209538" category="paragraph">VMware vSphere 上的 Red Hat OpenShift 旨在通过使用虚拟局域网 (VLAN) 在逻辑上分离用于不同目的的网络流量。此配置可以扩展以满足客户需求或为特定网络服务提供进一步的隔离。下表列出了在NetApp验证解决方案时实施该解决方案所需的 VLAN。</block>
  <block id="c846a1f843522d592b784a66368abed3" category="cell">ONTAP NFS 的存储网络</block>
  <block id="6cdd60ea0045eb7a6ec44c54d29ed402" category="cell">184</block>
  <block id="5e6094f6f2176409f469ee445fcf3f50" category="cell">ONTAP iSCSI 的存储网络</block>
  <block id="eecca5b6365d9607ee5a9d336962c534" category="cell">185</block>
  <block id="45cf0331a91fdc3679a78fdd8f7c60a7" category="cell">ESXi 节点、VCenter Server、 ONTAP Select的管理</block>
  <block id="e8e0dd181e4ee545195120626098bfba" category="cell">3480</block>
  <block id="3fb04953d95a94367bb133f862402bce" category="cell">3481</block>
  <block id="b7fede84c2be02ccb9c77107956560eb" category="cell">3482</block>
  <block id="bd690c49b77b8274786240fa94d9d880" category="section-title">将 OpenShift 部署到至少三个节点的 ESXi 集群</block>
  <block id="3500f2194985ef1b586c649fbe519d8d" category="paragraph">本文档中描述的经过验证的架构通过部署两个 ESXi 虚拟机管理程序节点并通过启用 VMware vSphere HA 和 VMware vMotion 确保容错配置，提供了适合 HA 操作的最低硬件部署。此配置允许已部署的虚拟机在两个虚拟机管理程序之间迁移，并在一个主机不可用时重新启动。</block>
  <block id="e79fa01ec6b411cfda4f8baad9f95cb0" category="paragraph">由于 Red Hat OpenShift 最初部署有三个主节点，因此在某些情况下，双节点配置中至少有两个主节点可以占用同一个节点，如果该特定节点不可用，则可能导致 OpenShift 中断。因此，Red Hat 的最佳实践是必须部署至少三个 ESXi 虚拟机管理程序节点，以便 OpenShift 主机可以均匀分布，从而提供额外的容错程度。</block>
  <block id="f5428382aa8b44d7ef6ca71195afc8ca" category="paragraph">通过启用 VM 和主机亲和性，可以确保 OpenShift 主机分布在多个虚拟机管理程序节点上。</block>
  <block id="caa4cd40407d5fbb60417567f99dc12b" category="paragraph">要配置关联组，请参阅<block ref="5eec17a83b1cdbe2155f458e6c616d5f" category="inline-link-macro-rx"></block>。</block>
  <block id="7b65abec68958867d7dd5f43b3b06e08" category="inline-link-macro">Red Hat OpenShift 在 vSphere 上安装具有自定义设置的集群</block>
  <block id="60d232b4b7425bdadb1962222b2c23ab" category="paragraph">在这些情况下，您可以运行向导并执行任务而不立即部署集群，而是向导会创建一个配置文件，稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者想要在您的环境中部署多个相同的集群用于其他用途（例如多租户），这将非常有用。有关为 OpenShift 创建自定义安装配置的更多信息，请参阅<block ref="425558ab055ee08d7eb4486f3ceb6631" category="inline-link-macro-rx"></block>。</block>
  <block id="81e1ccd46eb4fc86f01bc70f61ea35e0" category="summary">Red Hat OpenShift 容器平台将开发和 IT 运营整合在一个平台上，以便在本地和混合云基础架构上一致地构建、部署和管理应用程序。  Red Hat OpenShift 基于开源创新和行业标准构建，包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS，后者是专为基于容器的工作负载设计的领先企业 Linux 发行版。</block>
  <block id="f122078c68f20c36897fec8a7c4a23e8" category="doc">OpenShift 概述</block>
  <block id="9c310f5e2dbb4c09c24ff6793a8ce4e2" category="paragraph">Red Hat OpenShift 容器平台将开发和 IT 运营整合在一个平台上，以便在本地和混合云基础架构上一致地构建、部署和管理应用程序。  Red Hat OpenShift 基于开源创新和行业标准构建，包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS，后者是专为基于容器的工作负载而设计的全球领先的企业 Linux 发行版。  OpenShift 是云原生计算基金会 (CNCF) 认证 Kubernetes 计划的一部分，提供容器工作负载的可移植性和互操作性。</block>
  <block id="b2b7104a419a54dcb2763bddc6a0a47c" category="section-title">Red Hat OpenShift 提供以下功能：</block>
  <block id="76ac5e7329e42786f73e51a65d2e7493" category="list-text">*自助服务配置* 开发人员可以使用他们最常用的工具快速轻松地按需创建应用程序，同时操作保留对整个环境的完全控制。</block>
  <block id="22b5b37aed7d2cfc95cfe160732caff9" category="list-text">*持久存储* 通过提供对持久存储的支持，OpenShift Container Platform 允许您同时运行有状态应用程序和云原生无状态应用程序。</block>
  <block id="2791382361fbd296cd1db54fa7343362" category="list-text">*持续集成和持续开发 (CI/CD)* 该源代码平台可大规模管理构建和部署映像。</block>
  <block id="ebe44bbbf82d4d56407d7bd7d116334b" category="list-text">*开源标准* 这些标准除了其他开源技术外，还结合了开放容器计划 (OCI) 和 Kubernetes 用于容器编排。您不会受到特定供应商的技术或业务路线图的限制。</block>
  <block id="57b5e515a4be5d218b2f251533c94c15" category="list-text">*CI/CD 管道* OpenShift 为 CI/CD 管道提供开箱即用的支持，以便开发团队可以自动化应用程序交付过程的每个步骤，并确保在对应用程序的代码或配置所做的每个更改上执行它。</block>
  <block id="910a2a0b5f3f5d1e49c5a0d1e0dc2138" category="list-text">*基于角色的访问控制 (RBAC)* 此功能提供团队和用户跟踪，以帮助组织大型开发人员群体。</block>
  <block id="b93adb654910a18d3a7ab4aa9939ce46" category="list-text">*自动构建和部署* OpenShift 为开发人员提供了构建容器化应用程序的选项，或者让平台从应用程序源代码甚至二进制文件构建容器。然后，该平台根据为应用程序定义的特性自动在整个基础设施中部署这些应用程序。例如，为了符合第三方许可证，应该分配多少资源以及在基础设施的什么位置部署它们。</block>
  <block id="0e214dd7b6db6f54026d60bd23570448" category="list-text">*一致的环境* OpenShift 确保为开发人员提供的环境以及应用程序整个生命周期的环境都是一致的，从操作系统到库、运行时版本（例如 Java 运行时），甚至正在使用的应用程序运行时（例如 tomcat），以消除源自不一致环境的风险。</block>
  <block id="3324921ce520b5c2abe0d2521e8b040e" category="list-text">*配置管理* 平台内置配置和敏感数据管理，以确保无论使用哪种技术构建应用程序或部署在哪种环境中，都为应用程序提供一致且与环境无关的应用程序配置。</block>
  <block id="2d11325a996ec8e35070707ab180ca6c" category="list-text">*应用程序日志和指标。*快速反馈是应用程序开发的一个重要方面。  OpenShift 集成监控和日志管理向开发人员提供即时指标，以便他们研究应用程序在变化中的行为，并能够在应用程序生命周期中尽早解决问题。</block>
  <block id="93507554a1bd5b356e1ecf2a5fb0bd55" category="list-text">*安全和容器目录* OpenShift 提供多租户功能，并使用安全增强型 Linux (SELinux)、CGroups 和安全计算模式 (seccomp) 等已建立的安全性来隔离和保护容器，从而保护用户免受有害代码执行的侵害。它还通过 TLS 证书为各个子系统提供加密，并提供对 Red Hat 认证容器（access.redhat.com/containers）的访问，这些容器经过扫描和分级，特别强调安全性，以便为最终用户提供经过认证、值得信赖和安全的应用程序容器。</block>
  <block id="ed30b5cf2bd807c1a940ff2564402dec" category="paragraph"><block ref="ed30b5cf2bd807c1a940ff2564402dec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe8c2f8039053e077a0ca678496b72aa" category="section-title">Red Hat OpenShift 的部署方法</block>
  <block id="9c2dd02f13d452b4422ac6c864933f01" category="paragraph">从 Red Hat OpenShift 4 开始，OpenShift 的部署方法包括使用用户配置基础设施 (UPI) 进行高度定制的部署的手动部署或使用安装程序配置基础设施 (IPI) 进行全自动部署。</block>
  <block id="6e45cce163df251494c8f01f0567f19c" category="paragraph">在大多数情况下，IPI 安装方法是首选方法，因为它允许为开发、测试和生产环境快速部署 OpenShift 集群。</block>
  <block id="ec55e5ffb2376dada4b2eb066c1fd9fd" category="section-title">Red Hat OpenShift 的 IPI 安装</block>
  <block id="a91a379e59fea6610134af1efa3dfe87" category="paragraph">OpenShift 的安装程序配置基础设施 (IPI) 部署涉及以下高级步骤：</block>
  <block id="d1befa03c79ca0b84ecc488dea96bc68" category="inline-link-macro">网站</block>
  <block id="e2fb3873f5444b3e2992591c137a7885" category="list-text">访问 Red Hat OpenShift<block ref="07d9e126d73368020dd109a73fa50f95" category="inline-link-macro-rx"></block>并使用您的 SSO 凭据登录。</block>
  <block id="66f8ff89bd2c9146cb3273d416c60fd2" category="list-text">选择您想要部署 Red Hat OpenShift 的环境。</block>
  <block id="16c98b3a2a53266c0fdbf68850eadfbc" category="paragraph"><block ref="16c98b3a2a53266c0fdbf68850eadfbc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5806bcee67fc8f13f0255068a186e42" category="list-text">在下一个屏幕上下载安装程序、唯一的拉取密钥和用于管理的 CLI 工具。</block>
  <block id="1d761031264b6e6deafa834577fad17c" category="paragraph"><block ref="1d761031264b6e6deafa834577fad17c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7586dbf5f3ac1a66383f6c201a17a341" category="inline-link-macro">安装说明</block>
  <block id="c7daf823271052cb8912656769e85130" category="list-text">关注<block ref="031f6892cefd9bd35a861ba4dda1d58c" category="inline-link-macro-rx"></block>由 Red Hat 提供，可部署到您选择的环境中。</block>
  <block id="220887aee59c37fa79fc366cba7dad4e" category="section-title">NetApp验证的 OpenShift 部署</block>
  <block id="d711fd24836980dd490f3c01dd3ee8de" category="paragraph">NetApp已在其实验室中使用安装程序配置基础架构 (IPI) 部署方法在以下每个数据中心环境中测试并验证了 Red Hat OpenShift 的部署：</block>
  <block id="5e6f3eb001d2c545db70619fea0a2136" category="list-text"><block ref="5e6f3eb001d2c545db70619fea0a2136" category="inline-link-macro-rx"></block></block>
  <block id="eecf112940bd2bc6a696459ef0be85c0" category="list-text"><block ref="eecf112940bd2bc6a696459ef0be85c0" category="inline-link-macro-rx"></block></block>
  <block id="5c18994e5a2e562fdefd56909cd7138d" category="list-text"><block ref="5c18994e5a2e562fdefd56909cd7138d" category="inline-link-macro-rx"></block></block>
  <block id="40f0760ba1ff291f49fcf9baf83e1458" category="list-text"><block ref="40f0760ba1ff291f49fcf9baf83e1458" category="inline-link-macro-rx"></block></block>
  <block id="ff749ece19ac134ace1669d645f2b265" category="summary">本节致力于创建和配置由Trident提供的持久存储支持的私有镜像注册表。</block>
  <block id="8252479af4b1df9b77ceaf67fa8cd07d" category="doc">创建私有镜像仓库</block>
  <block id="9c864113b9e4202e111b818a53d4f506" category="inline-link">Quay.io</block>
  <block id="4b4141875f954447d204e6f73d93e2a0" category="inline-link">DockerHub</block>
  <block id="508888fd9f92f35e5edd97bd8083e289" category="paragraph">对于大多数 Red Hat OpenShift 部署，使用公共注册表<block ref="b9eeebbe4a68a648d570ea2173e5ef99" category="inline-link-rx"></block>或者<block ref="0252a6b70cc5017fa1445a78532155b6" category="inline-link-rx"></block>满足大多数客户的需求。然而，有时客户可能希望托管他们自己的私人或定制图像。</block>
  <block id="2bfd28946c23d8294bff3401d6004efd" category="paragraph">此过程记录了如何创建由Trident和NetApp ONTAP提供的持久卷支持的私有映像注册表。</block>
  <block id="5c6f1bdf00eb6d50d411c8fb4ed03e60" category="admonition">Trident Protect 需要一个注册表来托管Astra容器所需的图像。以下部分介绍在 Red Hat OpenShift 集群上设置私有注册表以及推送支持安装Trident Protect 所需的映像的步骤。</block>
  <block id="3434f6853d017037506e47f83a18c3eb" category="section-title">创建私有镜像仓库</block>
  <block id="8b2aacc194c3dc4c36ce93a57e31685c" category="list-text">从当前默认存储类中删除默认注释，并将 Trident 支持的存储类注释为 OpenShift 集群的默认存储类。</block>
  <block id="9b1c6f527a1a481b925397807f319e71" category="list-text">通过在以下位置输入以下存储参数来编辑 imageregistry 操作符<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>部分。</block>
  <block id="9ef71cd5ccaeb28206cd64b1d184019c" category="list-text">在<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>用于创建具有自定义主机名的 OpenShift 路由的部分。保存并退出。</block>
  <block id="e0b23bc469102cf89472e5734da92a23" category="admonition">当您想要为路由指定自定义主机名时，可以使用上述路由配置。如果您希望 OpenShift 创建具有默认主机名的路由，则可以将以下参数添加到<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>部分：<block ref="b09e8357c45c55a2c3ca685c9742fa6e" prefix=" " category="inline-code"></block> 。</block>
  <block id="625bd6ae5e3ac822b187b90d50edb553" category="sidebar-title">自定义 TLS 证书</block>
  <block id="08e414328e39f86009287c06a5f23d23" category="paragraph">当您使用自定义主机名进行路由时，默认情况下，它会使用 OpenShift Ingress 操作员的默认 TLS 配置。但是，您可以向路由添加自定义 TLS 配置。为此，请完成以下步骤。</block>
  <block id="182eefb879e064799e4aacaefbd9c65d" category="list-text">使用路由的 TLS 证书和密钥创建一个秘密。</block>
  <block id="47f7f890b5c1bcb52ae163771dbf35b0" category="list-text">编辑 imageregistry 操作符，添加以下参数<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>部分。</block>
  <block id="9199ff34349c38138ad0275e447e6588" category="list-text">再次编辑imageregistry Operator，将Operator的管理状态改为<block ref="80c202b1c3fd395a7bfe4d846c914bc3" prefix=" " category="inline-code"></block>状态。保存并退出。</block>
  <block id="2bc42a1a9a963d9a3ff2118466e5db07" category="list-text">如果满足所有先决条件，则会为私有镜像注册表创建 PVC、pod 和服务。几分钟后，注册表就会启动。</block>
  <block id="1f3713e339193dd15865ca74785eaa2c" category="list-text">如果您正在为入口操作员 OpenShift 注册表路由使用默认 TLS 证书，则可以使用以下命令获取 TLS 证书。</block>
  <block id="295132dd97e1047a7c09e6a48054c469" category="list-text">为了允许 OpenShift 节点访问并从注册表中提取图像，请将证书添加到 OpenShift 节点上的 docker 客户端。在<block ref="34dd8d8a3478a983eb249305316984b0" prefix=" " category="inline-code"></block>命名空间使用 TLS 证书并将其修补到集群映像配置以使证书受信任。</block>
  <block id="98f3e484001465a59149c551e8d88cf0" category="list-text">OpenShift 内部注册表由身份验证控制。所有OpenShift用户都可以访问OpenShift注册表，但登录用户可以执行的操作取决于用户权限。</block>
  <block id="561d4c8140016564eee98ecbc20f9add" category="list-text">要允许用户或一组用户从注册表中提取图像，必须为用户分配 registry-viewer 角色。</block>
  <block id="88167e36ea0f872788407d0e01fc1382" category="list-text">要允许用户或用户组写入或推送图像，必须为用户分配注册表编辑器角色。</block>
  <block id="5ba9e8f3c64be4c82249856cac87a071" category="list-text">为了让 OpenShift 节点访问注册表并推送或拉取图像，您需要配置一个拉取密钥。</block>
  <block id="86e93d266c168d718105c402f43fc91e" category="list-text">然后可以将这个拉取机密修补到服务帐户或在相应的 pod 定义中引用。</block>
  <block id="fe2033a9e377624583baa802ffd9ce6d" category="list-text">要将其修补到服务帐户，请运行以下命令。</block>
  <block id="59bd1dbdd3278e23e67bcabffbc4d55a" category="list-text">要在 pod 定义中引用 pull secret，请将以下参数添加到<block ref="b979c2934ac0b4ba3f08dabfdd1b2299" prefix=" " category="inline-code"></block>部分。</block>
  <block id="c0c3b4069e9a2e249507f67a6a2a3b07" category="list-text">要从 OpenShift 节点以外的工作站推送或拉取图像，请完成以下步骤。</block>
  <block id="18f8bf05a7a278e63d921de74d2a5966" category="list-text">将 TLS 证书添加到 docker 客户端。</block>
  <block id="312eaa3acf94b813cfe857f63a602724" category="list-text">使用 oc login 命令登录 OpenShift。</block>
  <block id="cb4744e00672fbf6eba33b1b86d23ae0" category="list-text">使用 OpenShift 用户凭据通过 podman/docker 命令登录注册表。</block>
  <block id="abe31bcfb59f2265c2fb97dde407366c" category="open-title">podman</block>
  <block id="53557215e4d209eda16495dbe5f7c505" category="paragraph">+ 注意：如果您使用<block ref="e8ab325768ed90db02e4c6f72419e835" prefix=" " category="inline-code"></block>用户登录私有注册中心，然后使用令牌而不是密码。</block>
  <block id="05b6053c41a2130afd6fc3b158bda4e6" category="open-title">码头工人</block>
  <block id="aa20d170f1ff336ec9079cf6dd1ccee3" category="list-text">推送或拉取图像。</block>
  <block id="01af0b1d2aec34820cc9569ad16903b2" category="summary">借助NetApp ONTAP在 AWS 上提供 Red Hat OpenShift 服务</block>
  <block id="8b92084315475b78ffdf89205153dbcc" category="paragraph">本文档将概述如何将NetApp ONTAP与 AWS 上的 Red Hat OpenShift 服务 (ROSA) 结合使用。</block>
  <block id="11ee25da1c53e35aedb2b64af82e35f5" category="section-title">创建卷快照</block>
  <block id="b3980ef9ebe2498773b00abbf7346228" category="paragraph">**1.创建应用程序卷的快照** 在本节中，我们将展示如何创建与应用程序关联的卷的 trident 快照。这将是应用程序数据的时间点副本。如果应用程序数据丢失，我们可以从该时间点的副本恢复数据。注意：此快照与ONTAP中的原始卷存储在同一个聚合中（本地或云端）。因此，如果ONTAP存储聚合丢失，我们就无法从其快照中恢复应用程序数据。</block>
  <block id="09be04d446e70cfb6ff2df63024654b6" category="paragraph">**一个。创建 VolumeSnapshotClass 将以下清单保存在名为volume-snapshot-class.yaml的文件中</block>
  <block id="55594c435fa9e8bb616b0be43befd745" category="paragraph">使用上述清单创建快照。</block>
  <block id="1557cdba542c2fa13ddbfe40a0b129fd" category="inline-image-macro">快照类</block>
  <block id="0ead74279ea2f2f5dc61018f9a9188fa" category="paragraph"><block ref="0ead74279ea2f2f5dc61018f9a9188fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f6a196914d4ab31fea78ac5a85e4d19" category="paragraph">**b.接下来，创建一个快照**通过创建 VolumeSnapshot 来创建现有 PVC 的快照，以获取 Postgresql 数据的时间点副本。这会创建一个几乎不占用文件系统后端空间的 FSx 快照。将以下清单保存在名为volume-snapshot.yaml的文件中：</block>
  <block id="a8491dba42c82c44a171bc46f5404dc8" category="paragraph">**c.创建卷快照并确认已创建**</block>
  <block id="826181e7b216ae6bdc80ce324330edf8" category="paragraph">删除数据库模拟数据丢失（数据丢失可能由于多种原因发生，这里我们只是通过删除数据库来模拟）</block>
  <block id="b5eaaa5f694a7f8ec5e907af460647fe" category="inline-image-macro">卷快照</block>
  <block id="8beba7afed22a52e156ea89f2d825761" category="paragraph"><block ref="8beba7afed22a52e156ea89f2d825761" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e765a5eeba2d96abf46cf9d172acc2da" category="paragraph">**d.删除数据库以模拟数据丢失（数据丢失可能由于多种原因而发生，这里我们只是通过删除数据库来模拟）**</block>
  <block id="648f1fe4e83eb8d1e10ceddd054a16af" category="inline-image-macro">数据库连接</block>
  <block id="a945297f31767f9fdc7a00038ce5621e" category="paragraph"><block ref="a945297f31767f9fdc7a00038ce5621e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06f050f984168d39dc83dd0579b1c89c" category="inline-image-macro">删除数据库</block>
  <block id="1f21dc6ff624760074d792823a39fa0a" category="paragraph"><block ref="1f21dc6ff624760074d792823a39fa0a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be9e1a30da76a525e62fbb18bdd4178e" category="section-title">从卷快照还原</block>
  <block id="5c0cf9db5c3b84c42974da72d0a24a5f" category="paragraph">**1.从快照恢复** 在本节中，我们将展示如何从应用程序卷的 trident 快照恢复应用程序。</block>
  <block id="348acf9f787e4f52c23fe741030e7288" category="paragraph">**一个。从快照创建卷克隆**</block>
  <block id="1330e5f73c84b286e0473e750b920f10" category="paragraph">要将卷恢复到以前的状态，您必须根据所拍摄快照中的数据创建一个新的 PVC。为此，请将以下清单保存在名为 pvc-clone.yaml 的文件中</block>
  <block id="5e69cd248a9e8f98cc6d8afbb30d08e6" category="paragraph">使用上述清单，通过使用快照作为源创建 PVC 来创建卷的克隆。应用清单并确保创建克隆。</block>
  <block id="2c188e0477897d45f212584dfc7fdae0" category="inline-image-macro">从快照克隆 postgresql</block>
  <block id="f605c1e028d7877829279ce8d10c6898" category="paragraph"><block ref="f605c1e028d7877829279ce8d10c6898" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90350dfdb6c3d9487986fa9f99f95e09" category="paragraph">**b.删除原始的 postgresql 安装**</block>
  <block id="cda89a46d8022e9609d4859cc871eb53" category="inline-image-macro">postgresql应用程序删除</block>
  <block id="4e65b97155c35d13bb6eec9d4b8dfdca" category="paragraph"><block ref="4e65b97155c35d13bb6eec9d4b8dfdca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e1124bbe05812664f1bb53318f98adc" category="paragraph">**c.使用新的克隆 PVC 创建新的 postgresql 应用程序**</block>
  <block id="124776275b10a0ba40e3bd6274be7c83" category="inline-image-macro">postgresql全新安装</block>
  <block id="f1cbbcfb76d9b0649939d47dc6ac2cf3" category="paragraph"><block ref="f1cbbcfb76d9b0649939d47dc6ac2cf3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4a08c488f3333f3a820df54221df8a6" category="paragraph">**d.验证应用程序 pod 处于运行状态**</block>
  <block id="85973890993d0900631b8b22fa1cf8b5" category="paragraph"><block ref="85973890993d0900631b8b22fa1cf8b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="474252dd1c23c5b69905d58ce770745b" category="paragraph">**e.验证 Pod 是否使用克隆作为其 PVC**</block>
  <block id="dfc862a6a8f1caa11721f754efafe529" category="inline-image-macro">postgresql新安装描述</block>
  <block id="2a404262de3cef6d06024820d286dc72" category="paragraph"><block ref="2a404262de3cef6d06024820d286dc72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1e80ae72b073cfe7fd0d0405c745398" category="inline-image-macro">新的 pvc 是克隆</block>
  <block id="37a7b20081bfaed9cdfab54835aded85" category="paragraph"><block ref="37a7b20081bfaed9cdfab54835aded85" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43d7503c85f74702bc734d9d432fb0e1" category="paragraph">f) 要验证数据库是否已按预期恢复，请返回容器控制台并显示现有数据库</block>
  <block id="2f73f0311fa1d86b40de0c1c739f7abd" category="inline-image-macro">数据库已恢复</block>
  <block id="bb1d7cda904f317bdcfd71af4bac0957" category="paragraph"><block ref="bb1d7cda904f317bdcfd71af4bac0957" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a5ad64d595144c185c9cf2065162dec3" category="section-title">演示视频</block>
  <block id="26f71a935ef27829e35a6323d94b8bad" category="video-title">使用托管控制平面在 AWS 上将Amazon FSx for NetApp ONTAP与 Red Hat OpenShift 服务结合使用</block>
  <block id="5098c5ca08edf447dfba921ac6c41a25" category="paragraph">可以找到更多关于 Red Hat OpenShift 和 OpenShift 解决方案的视频<block ref="7006d3b77ce0dcb153b683809f4deece" category="inline-link-macro-rx"></block>。</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">概述</block>
  <block id="4311d08133833f9e97125dcef97c9fdc" category="paragraph">在本节中，我们将展示如何利用 FSx for ONTAP作为在 ROSA 上运行的应用程序的持久存储层。它将展示在 ROSA 集群上安装NetApp Trident CSI 驱动程序、为ONTAP文件系统配置 FSx 以及部署示例有状态应用程序。它还将显示备份和恢复应用程序数据的策略。通过此集成解决方案，您可以建立一个可轻松跨可用区扩展的共享存储框架，从而简化使用Trident CSI 驱动程序扩展、保护和恢复数据的过程。</block>
  <block id="c6368ae044df0f7bb26ed60afda5c591" category="inline-link-macro">AWS 账户</block>
  <block id="3a2b88b991502efccf922110610f9582" category="list-text"><block ref="27fc574b8ea5cd6312c40c8aa826b8e2" category="inline-link-macro-rx"></block></block>
  <block id="4d5fc243e74307805026926c423823b4" category="inline-link-macro">Red Hat 帐户</block>
  <block id="ead0695440dd103ed925a9fde225faf7" category="list-text"><block ref="ead0695440dd103ed925a9fde225faf7" category="inline-link-macro-rx"></block></block>
  <block id="5909d6a8cb5fdba182746c8c82b7f87b" category="inline-link-macro">具有适当的权限</block>
  <block id="82d51bb9563654dafcbc94464af7ffa1" category="list-text">IAM 用户<block ref="6a9168d69dda19b401934afd113ebc28" category="inline-link-macro-rx"></block>创建并访问ROSA集群</block>
  <block id="7820fdb5d8b3ebe0c69c86cf8bd2d0cf" category="inline-link-macro">AWS CLI</block>
  <block id="98301d59c6cad91a32be2e4205f6bb39" category="list-text"><block ref="98301d59c6cad91a32be2e4205f6bb39" category="inline-link-macro-rx"></block></block>
  <block id="a419a367cad390ff246057d1781b2530" category="inline-link-macro">ROSA CLI</block>
  <block id="e08f074ff23721e4a104f551d21fa4c3" category="list-text"><block ref="e08f074ff23721e4a104f551d21fa4c3" category="inline-link-macro-rx"></block></block>
  <block id="3df52b454b23400395f3356b8e39f05d" category="inline-link-macro">OpenShift 命令行界面</block>
  <block id="ade19ee4fd758bf4bf5ead653037461e" category="list-text"><block ref="f63ae7e9726ce546709ed5687d99d6e3" category="inline-link-macro-rx"></block>（oc）</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link-macro">文档</block>
  <block id="6169772de4c1376699dd5519ef849a1d" category="list-text">Helm 3<block ref="7422955daa7906b55a49c2790d5040a0" category="inline-link-macro-rx"></block></block>
  <block id="ac0bdc2a13da98cd87cc9846732afede" category="inline-link-macro">HCP ROSA 集群</block>
  <block id="5b29dcfe92cc64cc5df9701a1011b09d" category="list-text"><block ref="5b29dcfe92cc64cc5df9701a1011b09d" category="inline-link-macro-rx"></block></block>
  <block id="6cfc44b2c2ec15fe190acbc4646b6c22" category="inline-link-macro">访问 Red Hat OpenShift Web 控制台</block>
  <block id="336243bc7fb89cbfadf1a2d16a596a78" category="list-text"><block ref="336243bc7fb89cbfadf1a2d16a596a78" category="inline-link-macro-rx"></block></block>
  <block id="ee0c1dfaba7c469f23fd557ebb77995c" category="paragraph">该图显示了部署在多个 AZ 中的 ROSA 集群。 ROSA集群的主节点、基础设施节点位于Red Hat的VPC中，而工作节点位于客户账户中的VPC中。我们将在同一个 VPC 内创建一个 FSx for ONTAP文件系统，并在 ROSA 集群中安装Trident驱动程序，以允许该 VPC 的所有子网连接到该文件系统。</block>
  <block id="132ff3554e6f87fc7ae3dce747a6a1d9" category="inline-image-macro">罗莎建筑</block>
  <block id="71d3bb805217b02e81f223639e55e358" category="paragraph"><block ref="71d3bb805217b02e81f223639e55e358" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6641666d7bc2748bab0ac80cdec3a2a3" category="section-title">初始设置</block>
  <block id="c5af70bdc5c6efbd8cd10d6598b895ab" category="paragraph">**1.为NetApp ONTAP配置 FSx**</block>
  <block id="b85c584b61dc3b605081a708aa8705be" category="paragraph">在与 ROSA 集群相同的 VPC 中为NetApp ONTAP创建多可用区 FSx。可通过多种方法实现此操作。提供了使用 CloudFormation Stack 创建 FSxN 的详细信息</block>
  <block id="2cba622edc6d4968795eea73c5900a75" category="paragraph">**a.克隆 GitHub 存储库**</block>
  <block id="126de7a1e3e33e458f253bf96f890fdf" category="paragraph">**b.运行 CloudFormation 堆栈** 通过将参数值替换为您自己的值来运行以下命令：</block>
  <block id="3a9672194e38cf7334b7055576422bcc" category="paragraph">其中： region-name：与部署 ROSA 集群的区域相同 subnet1_ID：FSxN 的首选子网的 id subnet2_ID：FSxN 的备用子网的 id VPC_ID：部署 ROSA 集群的 VPC 的 id routetable1_ID、routetable2_ID：与上面选择的子网关联的路由表的 id your_allowed_CIDR：FSx for ONTAP安全组入口规则允许的 CIDR 范围，用于控制访问。您可以使用 0.0.0.0/0 或任何适当的 CIDR 来允许所有流量访问 FSx for ONTAP的特定端口。定义管理员密码：登录 FSxN 的密码 定义 SVM 密码：登录将要创建的 SVM 的密码。</block>
  <block id="a6ae7f0ee55faf7b97b2cbc5872a93d0" category="paragraph">使用Amazon FSx控制台验证您的文件系统和存储虚拟机 (SVM) 是否已创建，如下所示：</block>
  <block id="543716f57f2bf1a62603c1429f89e44c" category="inline-image-macro">FSxN 创建</block>
  <block id="073b640bb67b9059fbe0d2145d478aa6" category="paragraph"><block ref="073b640bb67b9059fbe0d2145d478aa6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eec1855fb68e23f0287d8f59d5edf663" category="paragraph">**2.为 ROSA 集群安装并配置Trident CSI 驱动程序**</block>
  <block id="94da387dbf8e17919540911ea6205752" category="paragraph">**b.安装Trident**</block>
  <block id="5eb1ead7ec87a4346203b9b8cb12ab3c" category="paragraph">ROSA 集群工作节点预先配置了 nfs 工具，使您能够使用 NAS 协议进行存储配置和访问。</block>
  <block id="f04d046e9cad09d82c9be581d1ae1fe9" category="paragraph">如果您想使用 iSCSI，则需要为 iSCSI 准备工作节点。从Trident 25.02 版本开始，您可以轻松准备 ROSA 集群（或任何 OpenShift 集群）的工作节点以在 FSxN 存储上执行 iSCSI 操作。有两种简单的方法可以安装Trident 25.02（或更高版本），以自动为 iSCSI 准备工作节点。 1. 使用 tridentctl 工具从命令行使用 node-prep-flag。2.使用来自操作员中心的 Red Hat 认证的Trident操作员并对其进行自定义。  3.使用 Helm。</block>
  <block id="3b061feeaf044b14f22fd4354d79afa7" category="admonition">使用上述任何一种方法而不启用节点准备将允许您仅使用 NAS 协议在 FSxN 上配置存储。</block>
  <block id="07fbf7b1273a602b2229671f818216fa" category="paragraph">**方法一：使用 tridentctl 工具**</block>
  <block id="6d1fdd4584e069726e5ebeb241b77d14" category="inline-link-macro">此处的文档</block>
  <block id="69e1842b48b70d86890f9f50dcce7d91" category="paragraph">使用 node-prep 标志并安装Trident ，如图所示。在发出安装命令之前，您应该已经下载了安装程序包。请参阅<block ref="5695630188d786784930a38ef71042a1" category="inline-link-macro-rx"></block> 。</block>
  <block id="f3689db8513ce18a4c66c5b31f16e49b" category="paragraph">**方法 2：使用 Red Hat 认证的Trident Operator 并进行自定义** 从 OperatorHub 中找到 Red Hat 认证的Trident Operator 并安装它。</block>
  <block id="003f48c28a3b357b801ea863343fda51" category="inline-image-macro">操作员中心内的操作员</block>
  <block id="ac2f9d714248337ab7171f93e7865389" category="paragraph"><block ref="ac2f9d714248337ab7171f93e7865389" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7579c43cc636c72f9a519ec8568803b6" category="inline-image-macro">安装操作员 1</block>
  <block id="3fda7053514ef7da788808811c3ff983" category="paragraph"><block ref="3fda7053514ef7da788808811c3ff983" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01d3e74f8acafd86528e465b4e5d2b1f" category="inline-image-macro">安装操作员 2</block>
  <block id="492d2082d92d5cd0c3e9e645838ecbc0" category="paragraph"><block ref="492d2082d92d5cd0c3e9e645838ecbc0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ff79bc23e404a5a22df45a02dcebd11e" category="inline-image-macro">操作员安装</block>
  <block id="af60b006d2159121472e259b5116d152" category="paragraph"><block ref="af60b006d2159121472e259b5116d152" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1fd12f7b251af1d44feb3dd418d94820" category="paragraph">接下来，创建Trident Orchestrator 实例。使用 YAML 视图设置任何自定义值或在安装期间启用 iscsi 节点准备。</block>
  <block id="03a1abdc6d3af346b2afeca49ea90eaa" category="inline-image-macro">协调器创建</block>
  <block id="1f862bd9a62f6cf05c4007f3a09539ee" category="paragraph"><block ref="1f862bd9a62f6cf05c4007f3a09539ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8978eef87dc8f7572eedff6e2bd5c2a9" category="inline-image-macro">启用 NodePrep</block>
  <block id="beaafa13a78bb1454ce9d121a69c597e" category="paragraph"><block ref="beaafa13a78bb1454ce9d121a69c597e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1b18286ecd267568f0113dbef9b4d16" category="inline-image-macro">已安装 Orchestrator</block>
  <block id="fa7da0402cd81afbc44e492864f343d3" category="paragraph"><block ref="fa7da0402cd81afbc44e492864f343d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06188d1b14559c7901e64b986bb75929" category="inline-image-macro">安装Trident</block>
  <block id="6d06278c3da710e307cd0f161f4c0594" category="paragraph"><block ref="6d06278c3da710e307cd0f161f4c0594" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b1a41ba24dc9429264e7db57e757ee55" category="paragraph">使用上述任何一种方法安装Trident都将通过启动 iscsid 和 multipathd 服务并在 /etc/multipath.conf 文件中设置以下内容，为 iSCSI 准备 ROSA 集群工作节点</block>
  <block id="fc90c887c8728c69121e5e2436cd9f6a" category="inline-image-macro">iscsid 活跃</block>
  <block id="03fdb4612a8d8373e4dabda87c00d9dc" category="paragraph"><block ref="03fdb4612a8d8373e4dabda87c00d9dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc0ff41f6ffa4ed9b929c0cb67ae52c3" category="inline-image-macro">多路径激活</block>
  <block id="54ee16e07ddfba545d8643a9b28744b5" category="paragraph"><block ref="54ee16e07ddfba545d8643a9b28744b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7552381be5e7f0e3a0f82d85e0140723" category="inline-image-macro">multipath.conf 文件</block>
  <block id="c9706f66eb14af9dd9a7225c9fc62e9a" category="paragraph"><block ref="c9706f66eb14af9dd9a7225c9fc62e9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6645d37e9de7750f4279b2867540007" category="paragraph">**c.验证所有Trident pod 是否处于运行状态**</block>
  <block id="79ef2187f1254031122a8446b04ab77f" category="inline-image-macro">Trident吊舱运行</block>
  <block id="ad93df3ea6ac808e784ae10b0e0a1a81" category="paragraph"><block ref="ad93df3ea6ac808e784ae10b0e0a1a81" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4070068ca9257738c0c1590dd5659b7" category="paragraph">**3.配置Trident CSI 后端以使用 FSx for ONTAP (ONTAP NAS)**</block>
  <block id="412b252fa44d1a73e3e7bf22113f99a2" category="inline-link-macro">ontap-nas驱动程序</block>
  <block id="5cda38c877ffa8a612ce7b7763e4390d" category="paragraph">Trident后端配置告诉Trident如何与存储系统（在本例中为 FSx for ONTAP）通信。为了创建后端，我们将提供要连接的存储虚拟机的凭据，以及集群管理和 NFS 数据接口。我们将使用<block ref="14edcd5c25c37eab7c332a6849f58247" category="inline-link-macro-rx"></block>在 FSx 文件系统中配置存储卷。</block>
  <block id="a06d8ea13f77dede2e54121fcba24d5f" category="paragraph">**一个。首先，使用以下 yaml** 为 SVM 凭证创建密钥</block>
  <block id="368bea625fb1d17f4fb605b1adf6c105" category="admonition">您还可以从 AWS Secrets Manager 检索为 FSxN 创建的 SVM 密码，如下所示。</block>
  <block id="56ac301906b14ab3a1d90e48d5bf0099" category="inline-image-macro">AWS 机密管理器</block>
  <block id="840f406bc33ccaf7112de6db8d42639b" category="paragraph"><block ref="840f406bc33ccaf7112de6db8d42639b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0201b97b95896114d8c8a530cd34324" category="inline-image-macro">检索秘密</block>
  <block id="13624b37c15993f43833f52bf3949e3c" category="paragraph"><block ref="13624b37c15993f43833f52bf3949e3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c77dd8a86a3aa1229d7fb226ed698ff" category="paragraph">**b.接下来，使用以下命令将 SVM 凭证的密钥添加到 ROSA 集群**</block>
  <block id="f342ed808a344dca8cd316645b28a269" category="paragraph">您可以使用以下命令验证该秘密是否已添加到 trident 命名空间中</block>
  <block id="c49bda1320107c50590e5da2e8bcc6b0" category="inline-image-macro">秘密应用</block>
  <block id="fe7736e2b80c8a5e7921962d7e45e9cd" category="paragraph"><block ref="fe7736e2b80c8a5e7921962d7e45e9cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="de0e33591485aa9503121693ac6d187d" category="paragraph">**c.接下来，创建后端对象**为此，请进入克隆的 Git 存储库的 **fsx** 目录。打开文件 backend-ontap-nas.yaml。替换以下内容：将 **managementLIF** 替换为管理 DNS 名称，将 **dataLIF** 替换为Amazon FSx SVM 的 NFS DNS 名称，将 **svm** 替换为 SVM 名称。使用以下命令创建后端对象。</block>
  <block id="35919ebc3f38de293f75964141c70d38" category="paragraph">使用以下命令创建后端对象。</block>
  <block id="3061d849e31cb07387a1d37666690092" category="admonition">您可以从Amazon FSx控制台获取管理 DNS 名称、NFS DNS 名称和 SVM 名称，如下面的屏幕截图所示</block>
  <block id="918673e8fb38fdb35a598c5edcc41c6b" category="inline-image-macro">获得生活</block>
  <block id="d3fbd0f4e568d661e7d0bf11c5dd77d5" category="paragraph"><block ref="d3fbd0f4e568d661e7d0bf11c5dd77d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="617dd2f4c60a9008ec760eb0fddb8e95" category="paragraph">**d.现在，运行以下命令来验证后端对象是否已创建，并且阶段显示为绑定且状态为成功**</block>
  <block id="2a88ee6aa0aa6aec1e1996086289d857" category="inline-image-macro">创建后端</block>
  <block id="e68d001e824ad78e342f3582683814fc" category="paragraph"><block ref="e68d001e824ad78e342f3582683814fc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4979a948fa2170accb8d9438300b96a" category="paragraph">**4.创建存储类** 现在已经配置了Trident后端，您可以创建一个 Kubernetes 存储类来使用该后端。存储类是集群可用的资源对象。它描述并分类了您可以为应用程序请求的存储类型。</block>
  <block id="1f18852d1e76226d0d4e171d80141cce" category="paragraph">**一个。查看 fsx 文件夹中的文件 storage-class-csi-nas.yaml。**</block>
  <block id="84952793b5afdcea8ab63448535d6b8e" category="paragraph">**b.在 ROSA 集群中创建存储类并验证 trident-csi 存储类是否已创建。**</block>
  <block id="40d2fe88b435e73e3dbc83b404ff1b0b" category="paragraph"><block ref="40d2fe88b435e73e3dbc83b404ff1b0b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1b3d4a374bc6e11af0ea040aa8a1a80" category="paragraph">这完成了Trident CSI 驱动程序的安装及其与 FSx for ONTAP文件系统的连接。现在，您可以使用 FSx for ONTAP上的文件卷在 ROSA 上部署示例 Postgresql 有状态应用程序。</block>
  <block id="0636e7d1057cc2a3e8d988583c421785" category="paragraph">**c.验证没有使用 trident-csi 存储类创建的 PVC 和 PV。**</block>
  <block id="3e54fdb1a47731eff210cfcc69714e5c" category="inline-image-macro">不使用Trident 的PVC</block>
  <block id="0a84b167c70df61cbeed6faf35196bb5" category="paragraph"><block ref="0a84b167c70df61cbeed6faf35196bb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="391518b1a16f4dd644fc4579501565e0" category="paragraph">**d.验证应用程序是否可以使用Trident CSI 创建 PV。**</block>
  <block id="830972d7ddeb03c795b08a148225a2d6" category="paragraph">使用 **fsx** 文件夹中提供的 pvc-trident.yaml 文件创建 PVC。</block>
  <block id="d970fd0b3c991f4bbe44a6587210066b" category="inline-image-macro">使用Trident创建测试 PVC</block>
  <block id="57e19d8c3fd1957ddaad3a86b16d7064" category="paragraph"><block ref="57e19d8c3fd1957ddaad3a86b16d7064" category="inline-image-macro-rx" type="image"></block></block>
  <block id="41852c6999cb66fc6ee8adc857d41154" category="admonition">要使用 iSCSI，您应该已经在工作节点上启用了 iSCSI（如前所示），并且需要创建 iSCSI 后端和存储类。以下是一些示例 yaml 文件。</block>
  <block id="7a581ed3c7639c1ada55033248414f22" category="paragraph">**5.部署示例 Postgresql 有状态应用程序**</block>
  <block id="6f8eddbdd9b105751799f66a50875bc6" category="paragraph">**一个。使用 helm 安装 postgresql**</block>
  <block id="259fd35b5f9a43731297f8a140d1b21b" category="inline-image-macro">安装 postgresql</block>
  <block id="fe93ad99824686a419fd89ad88b85621" category="paragraph"><block ref="fe93ad99824686a419fd89ad88b85621" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31cfab33a14cc72e5a344d295f4549ef" category="paragraph">**b.验证应用程序 pod 是否正在运行，以及是否为该应用程序创建了 PVC 和 PV。**</block>
  <block id="39403b6f7280bb5cec1e975702a82cf5" category="inline-image-macro">postgresql pods</block>
  <block id="1856ebdd54733bcfbf1943dec099798b" category="paragraph"><block ref="1856ebdd54733bcfbf1943dec099798b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f198211ed231d5aa514aba22cafd2f7d" category="inline-image-macro">postgresql pvc</block>
  <block id="20018dc0db2c6cceb0a271c957fbf7ed" category="paragraph"><block ref="20018dc0db2c6cceb0a271c957fbf7ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d86849da5990d2b606eb41488c7eab5" category="inline-image-macro">postgresql pv</block>
  <block id="763e3ab25b2c9db0017f2081965387ae" category="paragraph"><block ref="763e3ab25b2c9db0017f2081965387ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6930e0118fbec85d7f8d0e9d6fcfac15" category="paragraph">**c.部署 Postgresql 客户端**</block>
  <block id="0dad5f08af561e853cc9dd8bde3951b9" category="paragraph">**使用以下命令获取已安装的 postgresql 服务器的密码。**</block>
  <block id="37916fdf1075b74251bed74535d3a080" category="paragraph">**使用以下命令运行 postgresql 客户端并使用密码连接到服务器**</block>
  <block id="5804396b7d4ecfdaae8ec2641975adf0" category="inline-image-macro">postgresql客户端</block>
  <block id="334413543e8d842918cab1c6dd0f3fbf" category="paragraph"><block ref="334413543e8d842918cab1c6dd0f3fbf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f465c438a10c54cb4a533ec5ddad8184" category="paragraph">**d.创建一个数据库和一个表。为表创建一个模式，并在表中插入 2 行数据。**</block>
  <block id="0a91e6d1ca35b9e277506ee61a3d5b02" category="inline-image-macro">postgresql 表、模式、行</block>
  <block id="4f8a864f9eba2322e44b9cc26e1f92a7" category="paragraph"><block ref="4f8a864f9eba2322e44b9cc26e1f92a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b888e639b3fe90bebf5a60ad61a3222" category="inline-image-macro">postgresql 第1行</block>
  <block id="92e86bdf8f47fdbbd9a9e904209087f8" category="paragraph"><block ref="92e86bdf8f47fdbbd9a9e904209087f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0a4b08f3c42a0e5f1dffde08d089781" category="inline-image-macro">postgresql 行2</block>
  <block id="745a9c8442f96e8a1041caac1b56044b" category="paragraph"><block ref="745a9c8442f96e8a1041caac1b56044b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b6eb32efa1f9b0356b2aaa4f3387649" category="summary">本参考文档提供了 Red Hat OpenShift 解决方案的部署验证，该解决方案通过安装程序配置基础架构 (IPI) 在多个不同的数据中心环境中部署，并由NetApp验证。它还详细介绍了如何利用Trident存储编排器管理持久存储，从而实现与NetApp存储系统的存储集成。最后，我们探索并记录了大量解决方案验证和实际用例。</block>
  <block id="a0e01d06503f271c1de7acc0acd01733" category="doc">NVA-1160：Red Hat OpenShift 与NetApp</block>
  <block id="3f4b17e041e63192875c654812122484" category="paragraph">NetApp 的Alan Cowles 和 Nikhil M Kulkarni</block>
  <block id="4711a0fd2fa3c3625080f399e5261ecd" category="paragraph">Red Hat OpenShift 与NetApp解决方案的架构旨在通过以下用例为客户提供卓越的价值：</block>
  <block id="44815e873492015d6a8ab6362de8da6c" category="list-text">易于部署和管理使用 IPI（安装程序配置基础架构）在裸机、Red Hat OpenStack 平台、Red Hat 虚拟化和 VMware vSphere 上部署的 Red Hat OpenShift。</block>
  <block id="03bb323d052d033ea0b5b2cab17f1219" category="list-text">将企业容器和虚拟化工作负载的功能与 Red Hat OpenShift 结合起来，在 OSP、RHV 或 vSphere 上虚拟部署，或者在带有 OpenShift Virtualization 的裸机上部署。</block>
  <block id="5398fd75a8bd7a6e753462420c9c0aa7" category="list-text">真实世界的配置和用例突出显示了 Red Hat OpenShift 与NetApp存储和Trident（ Kubernetes 的开源存储编排器）一起使用时的功能。</block>
  <block id="8ca11bfd783c730b04c0c77fc7574406" category="list-text">能够同时运行虚拟化和容器化工作负载</block>
  <block id="0111977afdb7fa380f806edbe8438163" category="list-text">能够根据工作负载需求独立扩展基础设施</block>
  <block id="42c487483a8feee3cc0365881a4cc265" category="paragraph">NetApp的 Red Hat OpenShift 承认这些挑战，并提出了一种解决方案，通过在客户选择的数据中心环境中实施 RedHat OpenShift IPI 的全自动部署来帮助解决每个问题。</block>
  <block id="d3d8eb53a347d6ffc9fb157d9ac8398b" category="paragraph">Red Hat OpenShift 与NetApp解决方案由以下主要组件组成：</block>
  <block id="fd89bb4228981d3b22187eb451421cd6" category="section-title">红帽 OpenShift 容器平台</block>
  <block id="70240bc0debcb080aa08dbd9e7b9a525" category="paragraph">欲了解更多信息，请访问 OpenShift 网站<block ref="35d5a627a33ce17e4bd125258d59fbc4" category="inline-link-rx"></block>。</block>
  <block id="02af9749588c0e25a52f0551041473b1" category="paragraph">Trident是一个开源且完全支持的容器和 Kubernetes 发行版（包括 Red Hat OpenShift）存储编排器。</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="cell">存储</block>
  <block id="8b2b7bab9251640fb5c8caa0b8a8ff98" category="cell">9.8、9.9.1、9.12.1</block>
  <block id="601712ded7a71b0842984ad41b6aad39" category="cell">12.3</block>
  <block id="765bb3744268ca0de607208bfdc8a37a" category="cell">存储编排</block>
  <block id="9f1cef20c22f2c879e7f62586b151463" category="cell">22.01.0、23.04、23.07、23.10、24.02</block>
  <block id="d7ac58512991ed45f3abecbfbb9cddf1" category="cell">容器编排</block>
  <block id="19b5452422900052aa9895c31e3bb9bd" category="cell">4.6 EUS，4.7，4.8，4.10，4.11，4.12，4.13，4.14</block>
  <block id="e3024b13494086daa1b9813a799ba41a" category="cell">数据中心虚拟化</block>
  <block id="38890f5544003fcf40576b9458f3e3ce" category="cell">7.0、8.0.2</block>
  <block id="472d13eb415cd6107aeef3a1ae6cd705" category="summary">NetApp提供了许多产品来帮助我们的客户在基于容器的环境中协调和管理持久数据，例如 Red Hat OpenShift。</block>
  <block id="dd99886a26d3b0bfc6c607830f9e7019" category="doc">了解NetApp Trident与 Red Hat OpenShift 的集成</block>
  <block id="54283b72e941e950513b99a2293f70b8" category="paragraph">了解NetApp Trident保护，该保护已通过 OpenShift 虚拟化解决方案的应用程序和持久存储管理验证。</block>
  <block id="c4c4d8eb1a938d23dbd4e3561819fbf1" category="paragraph">Trident是由NetApp维护的开源存储配置器和编排器， NetApp Trident保护可帮助您在基于容器的环境（例如 Red Hat OpenShift）中编排和管理持久数据。</block>
  <block id="900bda04002ffdec7966ea3d7d98194b" category="paragraph"><block ref="900bda04002ffdec7966ea3d7d98194b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd351007d4a671a321b6881f730d0dc3" category="paragraph">以下页面包含有关NetApp产品的更多信息，这些产品已在 Red Hat OpenShift with NetApp解决方案中经过应用程序和持久存储管理验证：</block>
  <block id="38a66e64d72c4bab859830a3603ac8eb" category="list-text"><block ref="38a66e64d72c4bab859830a3603ac8eb" category="inline-link-macro-rx"></block></block>
  <block id="593761100422aee4bdc18b693f31d86b" category="inline-link-macro">Trident保护文档</block>
  <block id="678a9deea346abba1fb1c0458355563f" category="list-text"><block ref="678a9deea346abba1fb1c0458355563f" category="inline-link-macro-rx"></block></block>
  <block id="e38be1dc20a2b358b917b60fe2677b39" category="doc">NetApp Element iSCSI 配置</block>
  <block id="dc5fa659e0452a77d6006f5b72f8b334" category="paragraph">要实现Trident与NetApp Element存储系统的集成，您必须创建一个后端，以便使用 iSCSI 协议与存储系统进行通信。</block>
  <block id="05ca7295321cb9b417a251e75557c6c5" category="list-text">下载的安装档案中提供了示例后端文件<block ref="75e4a0ceb294a9d74374c938e4e8ddc8" prefix=" " category="inline-code"></block>文件夹层次结构。对于服务于 iSCSI 的NetApp Element系统，复制<block ref="7989420add0b5baae954e866987ef264" prefix=" " category="inline-code"></block>文件到您的工作目录并编辑该文件。</block>
  <block id="27ef1192cd037c8978195be045fa054e" category="list-text">编辑用户、密码和 MVIP 值<block ref="b7ae24ea48e61624a7e4078daa60bd78" prefix=" " category="inline-code"></block>线。</block>
  <block id="d1b7418d19df7144a98dfde725db068c" category="list-text">编辑<block ref="dcda39e13b00bf6bd40a507e1833a6f5" prefix=" " category="inline-code"></block>价值。</block>
  <block id="dd7f72325e6f60ea7163b071e4d5e2cc" category="list-text">有了这个后端文件，运行以下命令来创建您的第一个后端。</block>
  <block id="b73d05719d0ea2964c963f6f83a34d3d" category="admonition">有一个可选字段称为<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>这是在这个文件中定义的。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（XFS、ext4 等），或者可以删除它以允许 OpenShift 决定使用哪种文件系统。</block>
  <block id="7183f006fd74d941c838f003380f3f46" category="list-text">运行<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>命令来创建存储类。</block>
  <block id="02eb9c3824b0b8eae9723daa7a2912d1" category="list-text">通过发出<block ref="fb024832e51eb5f6da9113a745f1eb59" prefix=" " category="inline-code"></block>命令。创建可能需要一些时间，具体取决于所创建的备份卷的大小，因此您可以在创建完成时观察该过程。</block>
  <block id="3ae96676432caea17595a22525bd9660" category="admonition">有一个可选字段称为<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>这是在这个文件中定义的。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（XFS、ext4 等）或删除以允许 OpenShift 决定使用哪种文件系统。</block>
  <block id="92637d8d513510f7c1f5bfac6e1cce9b" category="summary">要实现Trident与NetApp ONTAP存储系统的集成，您必须创建一个能够与存储系统通信的后端。</block>
  <block id="81736240a8dded7baeec2c203b1eb6d5" category="paragraph">Trident是一个开源且完全受支持的容器和 Kubernetes 发行版（包括 Red Hat OpenShift）存储编排器。  Trident可与整个NetApp存储产品组合配合使用，包括NetApp ONTAP和 Element 存储系统，并且还支持 NFS 和 iSCSI 连接。  Trident允许最终用户从其NetApp存储系统配置和管理存储，而无需存储管理员的干预，从而加速 DevOps 工作流程。</block>
  <block id="60f45090e62b24e31c59f9c7dc58c655" category="paragraph">Trident的开发周期很快，和 Kubernetes 一样，每年发布四次。</block>
  <block id="b2169686f146425f673c85dda25027f8" category="paragraph">已测试过哪个版本的Trident以及可以找到哪个 Kubernetes 发行版的支持矩阵<block ref="34562000b9988739736848a0014e5230" category="inline-link-rx"></block>。</block>
  <block id="38461cd3f4ed507e77fed6009d4cca3e" category="inline-link-macro">Trident产品文档</block>
  <block id="8becdc5dafaea9a42a00541b5232c9ec" category="paragraph">请参阅<block ref="c9828f1cebf8b202dc4a588c02a65aac" category="inline-link-macro-rx"></block>有关安装和配置的详细信息。</block>
  <block id="e1c8e443ef4456b5817cd51fd4b2ee21" category="section-title">下载Trident</block>
  <block id="f95d0437e813349fa018b7f0e68e9a7d" category="paragraph">要在已部署的用户集群上安装Trident并配置持久卷，请完成以下步骤：</block>
  <block id="5e2edd55fd0252c36cb87a4ce11d6e74" category="list-text">将安装档案下载到管理工作站并提取内容。当前版本的Trident可以下载<block ref="3ee34cf4d0ca59ba61404ff20cc8cec4" category="inline-link-rx"></block>。</block>
  <block id="422269f9bb560b76869cbd586b8370d5" category="list-text">从下载的软件包中提取Trident安装。</block>
  <block id="52d012c119e8e080d08f6a1592f8f9ec" category="section-title">使用 Helm 安装Trident Operator</block>
  <block id="645e283a7a985805ce0d9bb25f595243" category="list-text">首先设置用户集群的<block ref="deabc6332aa53495b56c51d2e3eca54f" prefix=" " category="inline-code"></block>文件作为环境变量，这样您就不必引用它，因为Trident没有选项来传递此文件。</block>
  <block id="449774824d889f1d6ebc0bbcc4920493" category="list-text">运行 Helm 命令从 helm 目录中的 tarball 安装Trident操作符，同时在用户集群中创建 trident 命名空间。</block>
  <block id="64e437a845e5de3c8e50925ebdfce295" category="list-text">您可以通过检查命名空间中运行的 pod 或使用 tridentctl 二进制文件检查已安装的版本来验证Trident是否已成功安装。</block>
  <block id="3ce67d5de6974f67e0048e6fdbf89498" category="admonition">在某些情况下，客户环境可能需要定制Trident部署。在这些情况下，还可以手动安装Trident操作符并更新包含的清单以定制部署。</block>
  <block id="8bd534d3b6bc8d2541df052e053ed65d" category="section-title">手动安装Trident Operator</block>
  <block id="cbf12fa3027f198c72da11f748b09ad1" category="list-text">首先，设置用户集群的<block ref="deabc6332aa53495b56c51d2e3eca54f" prefix=" " category="inline-code"></block>文件作为环境变量，这样您就不必引用它，因为Trident没有选项来传递此文件。</block>
  <block id="5d710ec7d521df428edd75c1885ee89b" category="list-text">这<block ref="c84ef67352bb6783ff2881f9f2821c2a" prefix=" " category="inline-code"></block>目录包含定义所有必需资源的清单。使用适当的清单，创建<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>自定义资源定义。</block>
  <block id="0ac11186fb38b2e9d4acd38d03f61b5c" category="list-text">如果不存在，请使用提供的清单在集群中创建一个Trident命名空间。</block>
  <block id="004c51fe71b5c654f88a31270ec6c8e9" category="list-text">创建Trident操作员部署所需的资源，例如<block ref="5c24ffd6438853b537bd99b3fccd3340" prefix=" " category="inline-code"></block>对于操作员来说，<block ref="d7d354d0f9d0780e168c895c92a32c24" prefix=" " category="inline-code"></block>和<block ref="e866afd8290d5c73cda6260e04e6eef0" prefix=" " category="inline-code"></block>到<block ref="5c24ffd6438853b537bd99b3fccd3340" prefix=" " category="inline-code"></block>，一个专门的<block ref="316707d12484dd3afede08839dee49bc" prefix=" " category="inline-code"></block>或操作员本身。</block>
  <block id="3d00f4c634c80f7ad592e1e41f6190fa" category="list-text">部署操作员后，您可以使用以下命令检查操作员的状态：</block>
  <block id="b34dd67c198ad4cf0088bd29c7ef4658" category="list-text">部署操作员后，我们现在可以使用它来安装Trident。这需要创建一个<block ref="ae61bf6af1a7406b62c72a4bef1ab62d" prefix=" " category="inline-code"></block>。</block>
  <block id="e32d70a13ba1767d9a373fe9a0535531" category="section-title">准备工作节点以进行存储</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="section-title">NFS</block>
  <block id="4b4d60be85b0c53c72ae4b8a05deacef" category="paragraph">大多数 Kubernetes 发行版都附带默认安装的用于挂载 NFS 后端的软件包和实用程序，包括 Red Hat OpenShift。</block>
  <block id="89c771069f269704306d4ca7b118cc7d" category="paragraph">但是，对于 NFSv3，没有在客户端和服务器之间协商并发的机制。因此，必须手动将客户端 sunrpc 插槽表条目的最大数量与服务器上支持的值同步，以确保 NFS 连接的最佳性能，而无需服务器减小连接的窗口大小。</block>
  <block id="9c2d7353683234845149cb6710dc11f8" category="paragraph">对于ONTAP，支持的 sunrpc 插槽表条目的最大数量为 128，即ONTAP一次可以处理 128 个并发 NFS 请求。但是，默认情况下，Red Hat CoreOS/Red Hat Enterprise Linux 每个连接最多有 65,536 个 sunrpc 插槽表条目。我们需要将此值设置为 128，这可以使用 OpenShift 中的 Machine Config Operator (MCO) 来完成。</block>
  <block id="88cd6afaae477b942c9ab5d396e43cfb" category="paragraph">要修改 OpenShift 工作节点中的最大 sunrpc 插槽表条目数，请完成以下步骤：</block>
  <block id="7b8e6ef8272a81ebcc108ee3fcf4eac8" category="list-text">登录 OCP 网络控制台并导航至 Compute &gt; Machine Configs。单击创建机器配置。复制并粘贴 YAML 文件，然后单击“创建”。</block>
  <block id="e7a7478f209d8b5dcaf38a593ce749b3" category="list-text">创建 MCO 后，需要在所有工作节点上应用配置并逐个重新启动。整个过程大约需要20到30分钟。使用以下命令验证机器配置是否已应用<block ref="1b2628e311828c98f0307b49309b67ee" prefix=" " category="inline-code"></block>并确保工人的机器配置池已更新。</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="section-title">iSCSI</block>
  <block id="693642fbb464db49c22715a536e99c3f" category="paragraph">要准备工作节点以允许通过 iSCSI 协议映射块存储卷，您必须安装必要的软件包来支持该功能。</block>
  <block id="cccb85b5e6a9a19187087f71254d1fb2" category="paragraph">在 Red Hat OpenShift 中，这是通过在部署集群后将 MCO（机器配置操作员）应用于集群来处理的。</block>
  <block id="068d2023b916134a0573aaad841124e4" category="paragraph">要配置工作节点以运行 iSCSI 服务，请完成以下步骤：</block>
  <block id="c25282bfd8c140d1f79c25362637f744" category="paragraph">不使用多路径时：</block>
  <block id="541c76e8762c84e3e0488f91c8062e08" category="paragraph">使用多路径时：</block>
  <block id="d9f036d3b9f84b626f8a777480066cab" category="list-text">配置创建后，大约需要 20 到 30 分钟将配置应用到工作节点并重新加载它们。使用以下命令验证机器配置是否已应用<block ref="1b2628e311828c98f0307b49309b67ee" prefix=" " category="inline-code"></block>并确保工人的机器配置池已更新。您还可以登录工作节点来确认 iscsid 服务正在运行（如果使用多路径，则 multipathd 服务正在运行）。</block>
  <block id="6e16409ed6038c106c7fa1dfbfb9da0f" category="admonition">还可以通过运行以下命令来确认 MachineConfig 已成功应用且服务已按预期启动<block ref="5c237bbde25a8cf47cdca465191a6c1d" prefix=" " category="inline-code"></block>带有适当标志的命令。</block>
  <block id="b09d268106fd9cbfffd1dc848382a150" category="section-title">创建存储系统后端</block>
  <block id="7446a4d317fe341cdd6730f4f855e457" category="paragraph">完成Trident Operator 安装后，您必须为正在使用的特定NetApp存储平台配置后端。按照下面的链接继续设置和配置Trident。</block>
  <block id="615767b52353571ac174e22f1a984aa3" category="inline-link-macro">NetApp ONTAP NFS</block>
  <block id="1b794fc78293a8889c11095120e67f57" category="list-text"><block ref="1b794fc78293a8889c11095120e67f57" category="inline-link-macro-rx"></block></block>
  <block id="c93e7ef2934826b1393251e9f7d9e331" category="inline-link-macro">NetApp ONTAP iSCSI</block>
  <block id="4faa271e943611ed64a2234b66837008" category="list-text"><block ref="4faa271e943611ed64a2234b66837008" category="inline-link-macro-rx"></block></block>
  <block id="d0e0904111acb167badbf5f196ad1205" category="inline-link-macro">NetApp Element iSCSI</block>
  <block id="686ca4813230d348cbdb8a206d97d043" category="list-text"><block ref="686ca4813230d348cbdb8a206d97d043" category="inline-link-macro-rx"></block></block>
  <block id="1191c85631a935ab269322999330546b" category="doc">使用Trident Protect 为容器应用和虚拟机提供数据保护</block>
  <block id="7c99164314b2cf8a73c17279eaccfc7b" category="paragraph">该解决方案展示了如何使用Trident Protect 对容器和虚拟机执行数据保护操作。</block>
  <block id="62a324e3ba7eee76fbaa20cdc8eb741d" category="list-text">有关在 OpenShift Container 平台中为容器应用程序创建快照和备份以及从中恢复的详细信息，请参阅<block ref="e0e2cfcdc6ab531229c62cad93f941d2" category="inline-link-macro-rx"></block>。</block>
  <block id="b4ee1a672c20b5bc7a97af7bdc1a2b4f" category="list-text">有关在 OpenShift Container 平台上部署的 OpenShift Virtualization 中创建和恢复虚拟机备份的详细信息，请参阅<block ref="33cd3071c79f9f90e5d317d7c3ee6940" category="inline-link-macro-rx"></block>。</block>
  <block id="3a724344bfc1b086a678d66814f20dd7" category="summary">本节提供使用 Jenkins 部署持续集成和持续交付或部署管道的步骤，以验证解决方案的运行。</block>
  <block id="b830a759b7bbee23da50f11979fb8f27" category="doc">使用持久存储部署 Jenkins CI/CD 管道：Red Hat OpenShift 与NetApp</block>
  <block id="ff587ce314d6f90660779e9d75cafe53" category="paragraph">本节提供使用 Jenkins 部署持续集成/持续交付或部署 (CI/CD) 管道以验证解决方案运行的步骤。</block>
  <block id="9eb8af4dd2c3557a24b914601b6ae465" category="section-title">创建Jenkins部署所需的资源</block>
  <block id="93b3852e5c67975dd33b1769b24a4a85" category="paragraph">要创建部署 Jenkins 应用程序所需的资源，请完成以下步骤：</block>
  <block id="9fd493573e73cb0e5e55e97306249596" category="list-text">创建一个名为 Jenkins 的新项目。</block>
  <block id="8007dd5ea548a9597a6fd0d0837cf904" category="paragraph"><block ref="8007dd5ea548a9597a6fd0d0837cf904" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d256abce3dbdfed83e337956e42f60f" category="list-text">在这个例子中，我们部署了具有持久存储的 Jenkins。为了支持 Jenkins 构建，请创建 PVC。导航到存储 &gt; 持久卷声明，然后单击创建持久卷声明。选择刚刚创建的存储类，确保持久卷声明名称为jenkins，选择合适的大小和访问模式，然后单击创建。</block>
  <block id="e5d5518aa4ae9a3e5207fe245d35147b" category="paragraph"><block ref="e5d5518aa4ae9a3e5207fe245d35147b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9272f40a21ca3dad814c4e3886b40776" category="section-title">使用持久存储部署 Jenkins</block>
  <block id="939a7b51bfb262627185af768c3c1024" category="paragraph">要使用持久存储部署 Jenkins，请完成以下步骤：</block>
  <block id="d31d340fd6b135cac2cfac7b04a34c10" category="list-text">在左上角，将角色从管理员更改为开发人员。单击 +添加并选择来自目录。在按关键字过滤栏中，搜索 jenkins。选择具有持久存储的 Jenkins 服务。</block>
  <block id="a1a1bd76420a8c683be6dccdb404f07e" category="paragraph"><block ref="a1a1bd76420a8c683be6dccdb404f07e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6baa4bd25992de2d17278ade0d3090ad" category="list-text">点击<block ref="42dcbbaa226af66223d0680206ea8547" prefix=" " category="inline-code"></block>。</block>
  <block id="fe6fbabc1e025fca5155c581760a956c" category="paragraph"><block ref="fe6fbabc1e025fca5155c581760a956c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7b4a6da6ab2733552de61d67b38a39e" category="list-text">默认情况下，会填充 Jenkins 应用程序的详细信息。根据您的需求，修改参数并单击“创建”。此过程创建了在 OpenShift 上支持 Jenkins 所需的所有资源。</block>
  <block id="cfd19feb2a18d2cf0379c59a1d59ee6c" category="paragraph"><block ref="cfd19feb2a18d2cf0379c59a1d59ee6c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb86f2dea9912af1bb1677c9cf33e619" category="list-text">Jenkins pod 大约需要 10 到 12 分钟才能进入就绪状态。</block>
  <block id="aca4c194891259971d42b8e40824c60f" category="paragraph"><block ref="aca4c194891259971d42b8e40824c60f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da33835bff86a0b0c8be6c67dcf677bb" category="list-text">实例化 Pod 后，导航至“网络”&gt;“路由”。要打开 Jenkins 网页，请单击为 jenkins 路由提供的 URL。</block>
  <block id="8bf5ffa50f8001acbf2c5c8de7fb1a38" category="paragraph"><block ref="8bf5ffa50f8001acbf2c5c8de7fb1a38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d59d1324dea050a2c0ffc376de411aa0" category="list-text">由于在创建 Jenkins 应用程序时使用了 OpenShift OAuth，因此请单击使用 OpenShift 登录。</block>
  <block id="2136aeeb0aeb36fefd84f6ba7b527ed7" category="paragraph"><block ref="2136aeeb0aeb36fefd84f6ba7b527ed7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="70a742210f3e3599821b3a11b682144c" category="list-text">授权 Jenkins 服务帐户访问 OpenShift 用户。</block>
  <block id="5bb584ba03a4447f210abaaa6fc3421d" category="paragraph"><block ref="5bb584ba03a4447f210abaaa6fc3421d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b07934b6023389a7e3e183b45e3b7448" category="list-text">将显示 Jenkins 欢迎页面。因为我们使用的是 Maven 构建，所以请先完成 Maven 安装。导航到“管理 Jenkins”&gt;“全局工具配置”，然后在“Maven”子标题中单击“添加 Maven”。输入您选择的名称并确保选择了“自动安装”选项。单击“Save”。</block>
  <block id="ba97815cd1398364c5d732df404570f4" category="paragraph"><block ref="ba97815cd1398364c5d732df404570f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fd32305bf380bf893ef2407eae75f5d" category="list-text">您现在可以创建一个管道来演示 CI/CD 工作流程。在主页上，单击左侧菜单中的“创建新作业”或“新项目”。</block>
  <block id="5ec90d2545035ac497202eb7ae3434fc" category="paragraph"><block ref="5ec90d2545035ac497202eb7ae3434fc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b6fc174a3fad5c396413febe1d4ba50" category="list-text">在创建项目页面上，输入您选择的名称，选择管道，然后单击确定。</block>
  <block id="c4dec2852d55117421867d65e456a7ad" category="paragraph"><block ref="c4dec2852d55117421867d65e456a7ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd55d787cacfb25983e0a24b58ba6d48" category="list-text">选择管道选项卡。从尝试示例管道下拉菜单中，选择 Github + Maven。代码会自动填充。单击“Save”。</block>
  <block id="86ec92271960dd23f1614721c07bc989" category="paragraph"><block ref="86ec92271960dd23f1614721c07bc989" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0191ad3b841f8db403ec4749d571eb4b" category="list-text">单击“立即构建”以通过准备、构建和测试阶段触发开发。完成整个构建过程并显示构建结果可能需要几分钟。</block>
  <block id="d469f4aef2bd2d92449c1ae5dd63a196" category="paragraph"><block ref="d469f4aef2bd2d92449c1ae5dd63a196" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b04b355d9fc6a2e23965649ebdd0aa31" category="list-text">每当代码发生任何变化时，都可以重建管道来修补新版本的软件，从而实现持续集成和持续交付。单击“最近更改”可跟踪自上一版本以来的更改。</block>
  <block id="440d5f7885e3509845c5c7594e97c253" category="paragraph"><block ref="440d5f7885e3509845c5c7594e97c253" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eeaa3ef2816f113fd1978b036eefc4a4" category="doc">解决方案验证和用例：Red Hat OpenShift 与NetApp</block>
  <block id="9e766e668731b912ea84be747f0d6b4b" category="paragraph">本页提供的示例是 Red Hat OpenShift 与NetApp的解决方案验证和用例。</block>
  <block id="6f60a8e202d6d4f297230695ffa9c1a6" category="inline-link-macro">使用持久存储部署 Jenkins CI/CD 管道</block>
  <block id="89f2747d937bded57a2c1e838e594245" category="list-text"><block ref="89f2747d937bded57a2c1e838e594245" category="inline-link-macro-rx"></block></block>
  <block id="e85b6a5686bf01c916e1c3b442e8db44" category="inline-link-macro">使用NetApp在 Red Hat OpenShift 上配置多租户</block>
  <block id="9f029585631b58c48d4feb22dd3adcfc" category="list-text"><block ref="9f029585631b58c48d4feb22dd3adcfc" category="inline-link-macro-rx"></block></block>
  <block id="65cd53ff19e601ea00bf9688be4dd86a" category="inline-link-macro">搭载NetApp ONTAP 的Red Hat OpenShift 虚拟化</block>
  <block id="db5c644103ff390dadcec3094fd498e8" category="list-text"><block ref="db5c644103ff390dadcec3094fd498e8" category="inline-link-macro-rx"></block></block>
  <block id="87ed6881ea79ec2ef5ad87983c7493be" category="list-text"><block ref="87ed6881ea79ec2ef5ad87983c7493be" category="inline-link-macro-rx"></block></block>
  <block id="7a9d54f11a08f06fafb146a95a28fcae" category="doc">使用第三方工具对容器应用程序和虚拟机进行数据保护</block>
  <block id="a78517d99e4cf029d76c3e543b762f94" category="paragraph">该解决方案展示了如何使用与 Red Hat OpenShift Container 平台中的 OADP 操作员集成的 Velero 对容器和虚拟机执行数据保护操作。</block>
  <block id="f7da192deb097319c1dea250e677bc33" category="list-text">有关在 OpenShift Container 平台中创建和恢复容器应用程序备份的详细信息，请参阅<block ref="d255861b913ae322076bc5eef85ea279" category="inline-link-macro-rx"></block>。</block>
  <block id="8264d7dad2a4ce20d002e352b2c274b2" category="list-text">有关在 OpenShift Container 平台上部署的 OpenShift Virtualization 中创建和恢复虚拟机备份的详细信息，请参阅<block ref="6df0f4cfdc0e8a7995e4abc22155ea26" category="inline-link-macro-rx"></block>。</block>
  <block id="5f87e8fbf603b28eb84592d8e64980c6" category="doc">附加信息：VMware Tanzu 与NetApp</block>
  <block id="0221d1074d249c254f0679e761454a05" category="inline-link"><block ref="0221d1074d249c254f0679e761454a05" category="inline-link-rx"></block></block>
  <block id="40454fb96e27a719bd7a751c4ec47d16" category="paragraph"><block ref="40454fb96e27a719bd7a751c4ec47d16" category="inline-link-rx"></block></block>
  <block id="5eae6f5974c9d4195ebe0cf8b607647e" category="list-text">Ansible 文档</block>
  <block id="015674032a5c43c779a74ee9e3dbfc94" category="inline-link"><block ref="015674032a5c43c779a74ee9e3dbfc94" category="inline-link-rx"></block></block>
  <block id="f13ae695d1de0b91201bca0cd4e87c69" category="paragraph"><block ref="f13ae695d1de0b91201bca0cd4e87c69" category="inline-link-rx"></block></block>
  <block id="a6f4f5f0d313fa8894e4ad13a09339c0" category="list-text">VMware Tanzu 文档</block>
  <block id="57a35ee57ca4eb666386f668ebc74599" category="inline-link"><block ref="57a35ee57ca4eb666386f668ebc74599" category="inline-link-rx"></block></block>
  <block id="35d5768f9d0ee829a3e2cae0cba15216" category="paragraph"><block ref="35d5768f9d0ee829a3e2cae0cba15216" category="inline-link-rx"></block></block>
  <block id="2839dd9e9e31ca41ba6399c0a64d3333" category="list-text">VMware Tanzu Kubernetes 网格文档</block>
  <block id="94ecd750f91f6d1908b92ec42eb37398" category="inline-link"><block ref="94ecd750f91f6d1908b92ec42eb37398" category="inline-link-rx"></block></block>
  <block id="f0a59887fc9e8ee88512ff6312c13efa" category="paragraph"><block ref="f0a59887fc9e8ee88512ff6312c13efa" category="inline-link-rx"></block></block>
  <block id="9cf21c31f745a435ac892addf1fd1a3f" category="list-text">VMware Tanzu Kubernetes Grid 服务文档</block>
  <block id="98978b88e05533d45b79613d9ee6f26d" category="inline-link"><block ref="98978b88e05533d45b79613d9ee6f26d" category="inline-link-rx"></block></block>
  <block id="56c4cea9b33fd23cf082d00ca92d5a46" category="paragraph"><block ref="56c4cea9b33fd23cf082d00ca92d5a46" category="inline-link-rx"></block></block>
  <block id="c23715ed7437fed1084a24cebb89e63c" category="list-text">VMware Tanzu Kubernetes Grid 集成版文档</block>
  <block id="fd2560680b89b39b1b988587bf383fb4" category="inline-link"><block ref="fd2560680b89b39b1b988587bf383fb4" category="inline-link-rx"></block></block>
  <block id="f4b2873e621660e86074a62e5a6c5eac" category="paragraph"><block ref="f4b2873e621660e86074a62e5a6c5eac" category="inline-link-rx"></block></block>
  <block id="27b823150d6296b03e5a542d82068878" category="summary">NetApp拥有多个符合Trident和Trident Protect 标准的存储平台，可以为容器化应用程序配置、保护和管理数据，从而有助于定义和最大化 DevOps 吞吐量。</block>
  <block id="b43c4021858544ebd3a492d082a7f349" category="doc">NetApp存储系统概述</block>
  <block id="3c50983d75446d4767f84157e3724456" category="list-text"><block ref="3c50983d75446d4767f84157e3724456" category="inline-link-macro-rx"></block></block>
  <block id="72a943bda30daac28d5a7097897df424" category="summary">NetApp提供了多种产品来帮助我们的客户在基于容器的环境中协调和管理持久数据。</block>
  <block id="5851271128193658704cec246f4fd21c" category="doc">NetApp存储集成概述</block>
  <block id="ffa91b110b1ac17acee3a393a5fb06d3" category="list-text"><block ref="ffa91b110b1ac17acee3a393a5fb06d3" category="inline-link-macro-rx"></block></block>
  <block id="318a4bce7f9fca07a60ed82408fbcd29" category="doc">VMware Tanzu Kubernetes Grid (TKG) 概述</block>
  <block id="11e5f8209ef45e9884518caf7b5bc68d" category="paragraph">VMware Tanzu Kubernetes Grid（也称为 TKG）允许您在混合云或公共云环境中部署 Tanzu Kubernetes 集群。 TKG 作为管理集群安装，它本身就是一个 Kubernetes 集群，用于部署和操作 Tanzu Kubernetes 集群。这些 Tanzu Kubernetes 集群是部署实际工作负载的工作负载 Kubernetes 集群。</block>
  <block id="9a67a32e17609515d2fc11383d1a7b59" category="paragraph">Tanzu Kubernetes Grid 建立在一些有前景的上游社区项目之上，并提供由 VMware 开发、营销和支持的 Kubernetes 平台。除了 Kubernetes 发行版之外，Tanzu Kubernetes Grid 还提供了额外的附加组件，这些附加组件是必需的生产级服务，例如注册表、负载平衡、身份验证等。带有管理集群的 VMware TKG 广泛用于 vSphere 6.7 环境，尽管它受支持，但不建议在 vSphere 7 环境中部署，因为 TKGS 具有与 vSphere 7 的原生集成功能。</block>
  <block id="4e6c29e9760f3e53993a64a5f6c63aaa" category="inline-image-macro">带有管理集群的 VMware Tanzu Kubernetes Grid</block>
  <block id="a1d96262ddcd3f0010db4d3551b9a9a7" category="paragraph"><block ref="a1d96262ddcd3f0010db4d3551b9a9a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec30336a82729146050b0931adab64f2" category="paragraph">有关 Tanzu Kubernetes Grid 的更多信息，请参阅文档<block ref="f4dbc56b610d9f5cd603e1a13bb6dedf" category="inline-link-macro-rx"></block>。</block>
  <block id="86fcbed2a7f5b8edced11b10bd1e4266" category="paragraph">根据 Tanzu Kubernetes Grid 是安装在 vSphere 集群本地还是云环境中，按照安装指南准备和部署 Tanzu Kubernetes Grid<block ref="492c3fae38681e036fd18bedc1bf8ae5" category="inline-link-macro-rx"></block> 。</block>
  <block id="c1f07986544fbf96897f8099577b0e72" category="paragraph">安装 Tanzu Kubernetes Grid 的管理集群后，请按照文档中的说明根据需要部署用户集群或工作负载集群<block ref="7d3f6d9f879d392af501006eacd0d221" category="inline-link-macro-rx"></block>。 VMware TKG 管理集群需要提供 SSH 密钥才能安装和运行 Tanzu Kubernetes 集群。此密钥可用于使用以下方式登录集群节点：<block ref="5ef871b8f1f696f9bb22de1dff45a81c" prefix=" " category="inline-code"></block>用户。</block>
  <block id="7654a00ca744e9bf01021439190e3119" category="doc">VMware Tanzu Kubernetes Grid 集成版 (TKGI) 概述</block>
  <block id="644bd75ee9c13f7d8778e4638d9eb2b2" category="paragraph">VMware Tanzu Kubernetes Grid Integrated (TKGI) Edition（以前称为 VMware Enterprise PKS）是一个基于 Kubernetes 的独立容器编排平台，具有生命周期管理、集群健康监控、高级网络、容器注册表等功能。  TKGI 使用由 BOSH 和 Ops Manager 组成的 TKGI 控制平面来配置和管理 Kubernetes 集群。</block>
  <block id="a84b33dfae5a2fdc1618084442bc3df0" category="paragraph">TKGI 可以在本地 vSphere 或 OpenStack 环境中安装和运行，也可以在其各自的 IaaS 产品上的任何主要公共云中安装和运行。此外，TKGI 与 NSX-T 和 Harbour 的集成为企业工作负载提供了更广泛的用例。要了解有关 TKGI 及其功能的更多信息，请访问文档<block ref="0b1e387b87be5caa8371b58b8e02b1f8" category="inline-link-macro-rx"></block>。</block>
  <block id="a1c1bb4994628000cfe61563bf4ff4f5" category="inline-image-macro">VMware Tanzu Kubernetes Grid集成版</block>
  <block id="68f1110a2f412f8a1c01933e098a71a9" category="paragraph"><block ref="68f1110a2f412f8a1c01933e098a71a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26f1f37ed65557967fe3a789aa75c364" category="paragraph">TKGI 根据不同的用例和设计以多种配置安装在各种平台上。按照指南操作<block ref="54093918574a441541c9219fc9d087f1" category="inline-link-macro-rx"></block>安装和配置 TKGI 及其先决条件。  TKGI 使用 Bosh VM 作为 Tanzu Kubernetes 集群的节点，这些集群运行不可变的配置映像，并且 Bosh VM 上的任何手动更改在重启后都不会保留。</block>
  <block id="58959a34911d9e88e191f3453ddc81f0" category="paragraph">重要说明：</block>
  <block id="d7fc6fcd5f3c3c3fca9edded9bf380e1" category="list-text">NetApp Trident需要特权容器访问。因此，在 TKGI 安装期间，请确保在配置 Tanzu Kubernetes 集群节点计划的步骤中选中“启用特权容器”复选框。</block>
  <block id="651650f759262b05cb38b56003e55784" category="inline-image-macro">TKGI 中的特权容器</block>
  <block id="7824738884575ac194e210c4f896e3d6" category="paragraph"><block ref="7824738884575ac194e210c4f896e3d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="956d281862a0ec3c4bb386cd28bf959c" category="list-text">NetApp建议将所有生产环境部署在多个主部署中以实现容错，并选择工作节点的配置来满足预期工作负载的要求。因此，建议的 TKGI 集群计划将由至少三个主服务器和三个从服务器组成，并配备至少四个 vCPU 和 12GB RAM，以应对高强度的工作负载。</block>
  <block id="aa7b3dace1453f21689852e3b066f673" category="summary">VMware Tanzu Kubernetes Grid Service（也称为 vSphere with Tanzu）允许您在 vSphere 中本地创建和操作 Tanzu Kubernetes 集群，还允许您直接在 ESXi 主机上运行一些较小的工作负载。</block>
  <block id="b71ad38bc3fd2c1a10efc2b09270e430" category="doc">VMware Tanzu Kubernetes Grid Service (TKGS) 概述</block>
  <block id="9f0bacdd758242392df6d215d34d9b8e" category="paragraph">VMware Tanzu Kubernetes Grid Service（也称为 vSphere with Tanzu）允许您在 vSphere 中本地创建和操作 Tanzu Kubernetes 集群，还允许您直接在 ESXi 主机上运行一些较小的工作负载。它允许您将 vSphere 转变为在虚拟机管理程序层上本地运行容器化工作负载的平台。 Tanzu Kubernetes Grid Service 启用后会在 vSphere 上部署一个主管集群，用于部署和操作工作负载所需的集群。它与 vSphere 7 原生集成，并利用许多可靠的 vSphere 功能（如 vCenter SSO、内容库、vSphere 网络、vSphere 存储、vSphere HA 和 DRS 以及 vSphere 安全性），以实现更无缝的 Kubernetes 体验。</block>
  <block id="6b25ac3e69375bd4a52dbffeb5c9cb14" category="paragraph">vSphere with Tanzu 为混合应用程序环境提供了一个单一平台，您可以在容器或虚拟机中运行应用程序组件，从而为开发人员、DevOps 工程师和 vSphere 管理员提供更好的可视性和易操作性。  VMware TKGS 仅支持 vSphere 7 环境，并且是 Tanzu Kubernetes 运营产品组合中唯一允许您直接在 ESXi 主机上运行 pod 的产品。</block>
  <block id="0e1d3327747a52bdd78d80247d5b6500" category="inline-image-macro">VMware Tanzu Kubernetes 服务</block>
  <block id="299e2971cae9a1238bc7240bdf9ea09d" category="paragraph"><block ref="299e2971cae9a1238bc7240bdf9ea09d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e1adc41159b779c5ef1a0c9c934a673" category="paragraph">有关 Tanzu Kubernetes Grid Service 的更多信息，请关注文档<block ref="0cdaad1423fdb034ad0ee788d57a7a82" category="inline-link-macro-rx"></block>。</block>
  <block id="2a304a1348456ccd2234cd71a81bd338" category="inline-link">链接</block>
  <block id="767b04965a47baa63782400d36a0c62e" category="paragraph">关于功能集、网络等，有很多架构方面的考虑。根据所选的架构，Tanzu Kubernetes Grid Service 的先决条件和部署过程会有所不同。要在您的环境中部署和配置 Tanzu Kubernetes Grid Service，请遵循指南<block ref="5e5ad4985bdb8ab17883db4008c7c4a2" category="inline-link-macro-rx"></block>。此外，要登录通过 TKGS 部署的 Tanzu Kubernetes 集群节点，请按照此处列出的步骤操作<block ref="7db41b551ba1165c4dfa4cf2d8a36e55" category="inline-link-rx"></block>。</block>
  <block id="46d890e88b951c5a84a444aad08079ae" category="paragraph">NetApp建议将所有生产环境部署在多个主部署中，以实现容错，并选择工作节点的配置来满足预期工作负载的要求。因此，针对高度密集型工作负载，建议的 VM 类至少具有 4 个 vCPU 和 12GB RAM。</block>
  <block id="e8a4d3a2e07c429150e133b7fedebd64" category="paragraph">在命名空间中创建 Tanzu Kubernetes 集群时，具有<block ref="72122ce96bfec66e2396d2e25225d70a" prefix=" " category="inline-code"></block>或者<block ref="de95b43bceeb4b998aed4aed5cef1ae7" prefix=" " category="inline-code"></block>权限可以使用用户帐户直接在任何命名空间中创建 pod。这是因为用户<block ref="72122ce96bfec66e2396d2e25225d70a" prefix=" " category="inline-code"></block>或者<block ref="de95b43bceeb4b998aed4aed5cef1ae7" prefix=" " category="inline-code"></block>权限被分配给集群管理员角色。但是，在任何命名空间中创建部署、守护进程集、有状态集或其他内容时，必须为相应的服务帐户分配具有所需权限的角色。这是必需的，因为部署或守护进程集利用服务帐户来部署 pod。</block>
  <block id="dc4ab077311e2aad5b5af968844fc5fe" category="paragraph">请参阅以下 ClusterRoleBinding 示例，将集群管理员角色分配给集群中的所有服务帐户：</block>
  <block id="86022ceb615d9e55bbb881f1750442ba" category="summary">Trident是一个开源且完全支持的容器和 Kubernetes 发行版（包括 VMware Tanzu）存储编排器。</block>
  <block id="cbe339e53da479584b62fcdaed7006c1" category="doc">Trident概述</block>
  <block id="ebe5598ec22d01fe25c02071b488309b" category="section-title">使用 Helm 部署Trident Operator</block>
  <block id="b224057a8a5927f9c3b42fbe5acc5595" category="list-text">添加NetApp Trident helm 存储库。</block>
  <block id="836237f5ff429cb9283688cdfaa56c76" category="list-text">更新 helm 存储库。</block>
  <block id="875c7439b686e253522033c63d909efe" category="list-text">为Trident的安装创建一个新的命名空间。</block>
  <block id="c00c62a4d5defadacd6ec68c29db73e0" category="list-text">使用 DockerHub 凭证创建一个密钥来下载Trident镜像。</block>
  <block id="567477e67a80c269658c001414030b07" category="list-text">对于由 TKGS（带有 Tanzu 的 vSphere）或具有管理集群部署的 TKG 管理的用户或工作负载集群，请完成以下步骤来安装Trident：</block>
  <block id="d409e9c69dd2082fd0ed8a86d87258e8" category="list-text">确保登录的用户有在 trident 命名空间中创建服务账户的权限，并且 trident 命名空间中的服务账户有创建 pod 的权限。</block>
  <block id="397ae57f2a6cbd8444c419c896f19886" category="list-text">运行以下 helm 命令在创建的命名空间中安装Trident操作符。</block>
  <block id="eef6352658410e2218bd7027ae8ff351" category="list-text">对于由 TKGI 部署管理的用户或工作负载集群，运行以下 helm 命令在创建的命名空间中安装Trident操作员。</block>
  <block id="12d34565a0d56eff4f8d3f99b138e11a" category="list-text">验证Trident pod 是否已启动并正在运行。</block>
  <block id="90c737937862ee43d6c8a603f57c584c" category="paragraph">完成Trident Operator 安装后，您必须为正在使用的特定NetApp存储平台配置后端。按照下面的链接继续设置和配置Trident。</block>
  <block id="22a4588280cd86e71d0de823755babb8" category="list-text"><block ref="22a4588280cd86e71d0de823755babb8" category="inline-link-macro-rx"></block></block>
  <block id="dc80aa628678aebc84174e0a8fa38b0f" category="list-text"><block ref="dc80aa628678aebc84174e0a8fa38b0f" category="inline-link-macro-rx"></block></block>
  <block id="02e89171828ae641092f5f7cc1c95cbf" category="summary">VMware Tanzu 是一套产品组合，可帮助企业实现其应用程序及其运行的基础架构的现代化。  VMware Tanzu 的全栈功能将开发和 IT 运营团队整合到一个平台上，以便在本地和混合云环境中一致地实现应用程序和基础架构的现代化，从而持续向生产提供更好的软件。</block>
  <block id="969f4a20d38cf3096e1659b96da1b729" category="doc">VMware Tanzu 概述</block>
  <block id="c395793804bd9dfa82ff727781faf3c5" category="inline-image-macro">VMware Tanzu 产品组合</block>
  <block id="867ff2b59e0cd49601ca069c3402cad9" category="paragraph"><block ref="867ff2b59e0cd49601ca069c3402cad9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3614585a8ed284306a5eadc9e31585b8" category="paragraph">要详细了解 Tanzu 产品组合中的不同产品及其功能，请访问文档<block ref="e9fed892b98a6bbccfc15bfe67c5aa96" category="inline-link-macro-rx"></block>。</block>
  <block id="1f0b2272162c619b2340940500e393a7" category="paragraph">关于 Tanzu 的 Kubernetes 操作目录，VMware 为 Tanzu Kubernetes Grid 提供了多种实现，所有这些实现都在各种平台上配置和管理 Tanzu Kubernetes 集群的生命周期。  Tanzu Kubernetes 集群是一个成熟的 Kubernetes 发行版，由 VMware 构建和支持。</block>
  <block id="caaf1eb22b79381e3d4a2b2b9a7d1698" category="paragraph">NetApp已在其实验室中测试并验证了 VMware Tanzu 产品组合中以下产品的部署和互操作性：</block>
  <block id="5849f8d5cb1d66cb095da163e533dea7" category="inline-link-macro">VMware Tanzu Kubernetes 网格 (TKG)</block>
  <block id="f3268c157270b8d05ce7e208f2957c97" category="list-text"><block ref="f3268c157270b8d05ce7e208f2957c97" category="inline-link-macro-rx"></block></block>
  <block id="c840af216b38aff44cc5ba246da60e17" category="inline-link-macro">VMware Tanzu Kubernetes 网格服务 (TKGS)</block>
  <block id="f79ac5bf38fec66c0f916428aef5020d" category="list-text"><block ref="f79ac5bf38fec66c0f916428aef5020d" category="inline-link-macro-rx"></block></block>
  <block id="d6a1da4b26eb2ae838f5db5e80c44aee" category="inline-link-macro">VMware Tanzu Kubernetes Grid 集成 (TKGI)</block>
  <block id="9b654dd5c66eec24f6de8c57f8e0b5b3" category="list-text"><block ref="9b654dd5c66eec24f6de8c57f8e0b5b3" category="inline-link-macro-rx"></block></block>
  <block id="516a32af5ad38dd3b9ca9c156da39add" category="inline-link-macro">带有 Tanzu 的 VMware vSphere（vSphere Pod）</block>
  <block id="815dba1e9412705129e94ecfc5dc1617" category="list-text"><block ref="815dba1e9412705129e94ecfc5dc1617" category="inline-link-macro-rx"></block></block>
  <block id="f78d920d9d248820ddf7a3acdd9a34c0" category="doc">VMware vSphere with Tanzu 概述</block>
  <block id="25e19f6e213533d24e711ce5e6738fa9" category="paragraph">VMware vSphere with Tanzu（也称为 vSphere Pod）允许您将 VMware vSphere 环境中的 ESXi 虚拟机管理程序节点用作裸机 Kubernetes 环境中的工作节点。</block>
  <block id="bac31e763c1b2955be0a10de0a4d8012" category="inline-image-macro">VMware vSphere 与 Kubernetes</block>
  <block id="55cadfad96a5fb8de4a2eb4e72243fcf" category="paragraph"><block ref="55cadfad96a5fb8de4a2eb4e72243fcf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2e55cf1007600b25e0708bfe26a41f3" category="paragraph">带有 Tanzu 的 VMware vSphere 环境与本机 TKGS 集群一样在工作负载管理下启用。</block>
  <block id="c2556907e1f90b93c9c43e198113de8b" category="paragraph">创建虚拟化的 Supervisor Cluster 为 Kubernetes 提供高可用的控制平面，并为每个应用程序创建单独的命名空间，确保用户的资源隔离。</block>
  <block id="9ff6aa8ffa487db2f0aebe3967972d77" category="inline-image-macro">主管集群</block>
  <block id="1761bcd39bf9fa8ecdfd58e91b9037e3" category="paragraph"><block ref="1761bcd39bf9fa8ecdfd58e91b9037e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e2885b693a2045e931fda4aeb8bf28f" category="paragraph">启用 VMware vSphere with Tanzu 后，每个 ESXi 主机都安装并配置了 Spherelet 应用程序。这使得每个节点能够充当 Kubernetes 部署中的工作程序并管理部署在每个节点上的 pod。</block>
  <block id="b3ba0fe968ce39dcfc6fe8cc0f1b02da" category="inline-image-macro">命名空间</block>
  <block id="15a1e1d49a1faf02dac4c8897f8c5550" category="paragraph"><block ref="15a1e1d49a1faf02dac4c8897f8c5550" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c44d7c5351501c027261c0480a658d6d" category="paragraph">目前，VMware vSphere with Tanzu 和 vSphere Pods 仅支持本地 vSphere CSI 驱动程序。其工作原理是让管理员在 vSphere 客户端中创建存储策略，从当前可用作 vSphere 数据存储的存储目标中进行选择。这些策略用于为容器化应用程序创建持久卷。</block>
  <block id="c5367fd2a82638dd6433d7e57924a2ca" category="admonition">虽然目前不支持直接连接到外部ONTAP和 Element 存储阵列的NetApp Trident CSI 驱动程序，但这些NetApp存储系统通常用于支持 vSphere 环境的主存储，并且可以以这种方式使用NetApp高级数据管理和存储效率工具。</block>
  <block id="70aaffec040bcf9e5cf77c0ccabb8f11" category="paragraph">如果您想了解有关 VMware vSphere with Tanzu 的更多信息，请参阅文档<block ref="0cdaad1423fdb034ad0ee788d57a7a82" category="inline-link-macro-rx"></block>。</block>
  <block id="07f15dfb0f84a062c67184adcee67a8b" category="summary">本参考文档提供了不同版本的 VMware Tanzu Kubernetes 解决方案的部署验证，这些解决方案经 NetApp 验证，可以作为 Tanzu Kubernetes Grid (TKG)、Tanzu Kubernetes Grid Service (TKGS) 或 Tanzu Kubernetes Grid Integrated (TKGI) 部署在NetApp不同的数据中心环境中。</block>
  <block id="bec8bc9f783c7d01005b7e64d1ad1785" category="doc">NVA-1166：VMware Tanzu 与NetApp合作</block>
  <block id="9d9ae4f8dc85767d5d0c3f276a875e82" category="paragraph">本参考文档提供了不同版本的 VMware Tanzu Kubernetes 解决方案的部署验证，这些解决方案经 NetApp 验证，可以作为 Tanzu Kubernetes Grid (TKG)、Tanzu Kubernetes Grid Service (TKGS) 或 Tanzu Kubernetes Grid Integrated (TKGI) 部署在NetApp不同的数据中心环境中。它还描述了与NetApp存储系统和Trident存储编排器的存储集成，用于管理持久存储，以及Trident Protect 用于使用该持久存储备份和克隆有状态应用程序。最后，该文档提供了解决方案集成和验证的视频演示。</block>
  <block id="c0a14f456cfcfac669f2cf374f60561b" category="paragraph">VMware Tanzu 与NetApp解决方案的架构旨在通过以下用例为客户提供卓越的价值：</block>
  <block id="8cc1d80dbdd5d6d142f0173d8c8f2261" category="list-text">易于部署和管理部署在 VMware vSphere 上并与NetApp存储系统集成的 VMware Tanzu Kubernetes Grid 产品。</block>
  <block id="8796988ff3c4f065733c3b887d886609" category="list-text">企业容器和虚拟化工作负载与 VMware Tanzu Kubernetes Grid 产品的综合实力。</block>
  <block id="596baabed2617a4fc2b73cb88716cc97" category="list-text">真实的配置和用例突出显示了 VMware Tanzu 与NetApp存储和NetApp Trident产品套件一起使用时的功能。</block>
  <block id="1c038507164c812de63a2e51d6ec1ddb" category="list-text">使用Trident Protect 对部署在 VMware Tanzu Kubernetes Grid 集群上且数据驻留在NetApp存储系统上的容器化工作负载进行应用程序一致性保护或迁移。</block>
  <block id="29375f7cc2c5eece7fdd9c99f40eb3f8" category="list-text">能够在混合云模型中部署，容器可以在本地数据中心和云中运行。</block>
  <block id="ddea0381617b5a4b43a0a98a440c6658" category="paragraph">VMware Tanzu 与NetApp共同承认这些挑战，并提出了一种解决方案，通过在客户选择的混合云环境中部署 VMware Tanzu Kubernetes 产品来帮助解决每个问题。</block>
  <block id="c57f369df48137f738543c0e5012006c" category="paragraph">VMware Tanzu 与NetApp解决方案由以下主要组件组成：</block>
  <block id="67d7b0b61202e57bcae8cda82f02e2b3" category="section-title">VMware Tanzu Kubernetes 平台</block>
  <block id="55ad4cb8f0feecb71e184ef92cff1f70" category="paragraph">VMware Tanzu 具有多种版本， NetApp的解决方案工程团队已在我们的实验室中对其进行了验证。每个 Tanzu 版本都与NetApp存储产品组合成功集成，并且每个版本都可以帮助满足特定的基础设施需求。以下重点介绍了本文档中描述的 Tanzu 每个版本的功能和产品。</block>
  <block id="f377bdd54f0f567b139a5913567466f1" category="paragraph">*VMware Tanzu Kubernetes 网格 (TKG)*</block>
  <block id="45915535ce313f81567f3b3c41571fe9" category="list-text">在 VMware vSphere 环境中部署的标准上游 Kubernetes 环境。</block>
  <block id="32fcd5c42dc47b5cc021d74a489dee4f" category="list-text">以前称为 Essential PKS（来自 Heptio 收购，2019 年 2 月）。</block>
  <block id="16196833d09cc8d52a1ef3790b4e15d3" category="list-text">TKG 部署了单独的管理集群实例，以支持 vSphere 6.7U3 及更高版本。</block>
  <block id="08f2ff1c0826ffc53a185010cce7dac7" category="list-text">TKG 部署也可以通过 AWS 或 Azure 部署在云中。</block>
  <block id="15aa7eec2d32a1ba74b5cea8af5241ec" category="list-text">允许使用 Windows 或 Linux 工作节点（Ubuntu/Photon）。</block>
  <block id="89a8813ef0f3f2c1a9b0f20dab87e2a2" category="list-text">NSX-T、HA Proxy、AVI 网络或负载均衡器可用于控制平面。</block>
  <block id="2ad16c86af27df82ae725dfd15176212" category="list-text">TKG 支持应用程序/数据平面的 MetalLB。</block>
  <block id="bc4ebc6a20b126e1810986e5737ff887" category="list-text">可以使用 vSphere CSI 以及第三方 CSI，如NetApp Trident。</block>
  <block id="7a3368d887604b1812f8f796b668f0e7" category="paragraph">*VMware Tanzu Kubernetes 网格服务 (TKGS)*</block>
  <block id="27077307fac1683851c72a97ba11c62e" category="list-text">TKGS 仅在 vSphere 7.0U1 及更高版本上与主管集群和工作负载集群一起部署。</block>
  <block id="3ee27cde76894c76ad60736ecbca78da" category="list-text">TKGS 支持应用程序/数据平面的 MetalLB。</block>
  <block id="443c9bd7eeb4bc3d39f67cc555b4aab2" category="list-text">通过 Tanzu 提供对 vSphere Pods 的支持，允许 Pod 直接在环境中启用的 ESXi 主机上运行。</block>
  <block id="8da30835717bc9e00a9ea2b89d75d943" category="paragraph">VMWare Tanzu Kubernetes Grid 集成 (TKGI)</block>
  <block id="f4ef19f9ee886fa602632ef3f35019ad" category="list-text">以前称为 Enterprise PKS（来自 Heptio 收购，2019 年 2 月）。</block>
  <block id="28789df26df63aa440b3aded601e67a6" category="list-text">可以使用 NSX-T、HA Proxy 或 Avi。您还可以提供自己的负载均衡器。</block>
  <block id="2b681f710a75cd56332534e50fe625ff" category="list-text">从 vSphere 6.7U3 开始受支持，以及 AWS、Azure 和 GCP。</block>
  <block id="f09eefe449cf027cce033ceb064c2fae" category="list-text">通过向导进行设置，以便于部署。</block>
  <block id="78c9a89b579a1005676bf4b1a4b3aad7" category="list-text">在由 BOSH 管理的受控不可变虚拟机中运行 Tanzu。</block>
  <block id="9836f3d455b09e5a5216629884a86272" category="list-text">可以使用 vSphere CSI 以及第三方 CSI，如NetApp Trident （适用某些条件）。</block>
  <block id="22bd1c4adfe1c3f7d3dc00763a7a8d40" category="paragraph">带有 Tanzu 的 vSphere（vSphere Pod）</block>
  <block id="4f50bac068dbe84c04d257f75bb42142" category="list-text">vSphere 原生 pod 在基于光子的薄层中运行，并具有规定的虚拟硬件，以实现完全隔离。</block>
  <block id="c8cefb07aba3cc260670993281c9bef5" category="list-text">需要 NSX-T，但允许额外的功能支持，例如 Harbor 映像注册表。</block>
  <block id="b603aa094817eb0510887a841cc71df8" category="list-text">在 vSphere 7.0U1 及更高版本中使用 TKGS 等虚拟 Supervisor 集群进行部署和管理。直接在 ESXi 节点上运行 pod。</block>
  <block id="cf3b96589f75768a855cebe2679e5b8b" category="list-text">完全集成 vSphere，通过 vSphere 管理实现最高的可见性和控制。</block>
  <block id="3b050b735b1eb713cc1b3816851e3060" category="list-text">基于 CRX 的隔离舱可实现最高级别的安全性。</block>
  <block id="e7004adb0d2f74954305a1023249e642" category="list-text">仅支持 vSphere CSI 进行持久存储。不支持第三方存储协调器。</block>
  <block id="ebf1056dd3448ca85af4607c7c9984b3" category="paragraph">Trident是一个开源的、完全支持的存储编排器，适用于容器和 Kubernetes 发行版，包括 VMware Tanzu。</block>
  <block id="67c6ecbcd91c613e8659b3f0c4b01510" category="cell">9.9.1</block>
  <block id="63355c54bd7e8ff73915da41610ec6f7" category="cell">22.04.0</block>
  <block id="a56837df79ae6671b6b511c330431135" category="cell">VMware Tanzu Kubernetes 网格</block>
  <block id="a3e69dd4d9f892aab0dcbf0a5dd246e2" category="cell">1.4+</block>
  <block id="22053fd2d26d3a313aea03b09e9a776c" category="cell">VMware Tanzu Kubernetes 网格服务</block>
  <block id="c99c6e88d4de8db879b1b5ec64d1f7ed" category="cell">0.0.15 [vSphere 命名空间]</block>
  <block id="8eb1302ead60c09b6d757b2b7ab84040" category="cell">1.22.6 [主管集群 Kubernetes]</block>
  <block id="caf617dd6edf29fd289caff7469ea66b" category="cell">VMware Tanzu Kubernetes Grid集成</block>
  <block id="1d5bc9367c9565bbe31cc00aa1f870a4" category="cell">1.13.3</block>
  <block id="23d300c91b3d48f94c1e7f5953ad3e5e" category="cell">7.0U3</block>
  <block id="5d9dd4ee62c5446f01e895cd118d98dd" category="cell">VMware NSX-T 数据中心</block>
  <block id="7bc09c21b8fa1161768459982f0ec89e" category="cell">网络和安全</block>
  <block id="b1179856b0372cb8777975cb658548ac" category="cell">3.1.3</block>
  <block id="cc540661734771d2e0272e8b4ef5c228" category="cell">VMware NSX 高级负载均衡器</block>
  <block id="50382c1137e78c7c038faabadb85d9fd" category="cell">负载均衡器</block>
  <block id="d08680d7e9b745c4d4b81a2d6df7a012" category="cell">20.1.3</block>
  <block id="96b5419ab713b49685af4d923930ce22" category="summary">要通过 iSCSI 将NetApp ONTAP存储系统与 VMware Tanzu Kubernetes 集群集成以实现持久卷，第一步是通过登录每个节点并配置 iSCSI 实用程序或软件包来挂载 iSCSI 卷，从而准备节点。</block>
  <block id="da883967924519350a1c423bd85906dd" category="paragraph">要通过 iSCSI 将NetApp ONTAP存储系统与 VMware Tanzu Kubernetes 集群集成以实现持久卷，第一步是通过登录每个节点并配置 iSCSI 实用程序或软件包来挂载 iSCSI 卷，从而准备节点。为此，请按照本<block ref="fb2092145032d18c9376d95ca453f9a7" category="inline-link-macro-rx"></block>。</block>
  <block id="50c35de69200a8b9e4be302372e74851" category="admonition">NetApp不建议对 VMware Tanzu Kubernetes 集群的 NAT 部署使用此过程。</block>
  <block id="bfc5022105ee1678e96b6f9991116647" category="admonition">TKGI 使用 Bosh VM 作为运行不可变配置映像的 Tanzu Kubernetes 集群的节点，并且 Bosh VM 上 iSCSI 包的任何手动更改在重新启动后都不会保留。因此， NetApp建议使用 NFS 卷作为由 TKGI 部署和运营的 Tanzu Kubernetes 集群的持久存储。</block>
  <block id="16e4431f428a4ec8abdfbee6ec2c2889" category="paragraph">在集群节点准备好 iSCSI 卷后，您必须创建一个能够与存储系统通信的后端。我们在此解决方案中配置了一个基本的后端，但是，如果您正在寻找更多自定义选项，请访问文档<block ref="f151238ff3a8d488c82b6303d676eaa3" category="inline-link-macro-rx"></block>。</block>
  <block id="aaa6c6e969e6e978f9a8bce54e31b5f7" category="section-title">在ONTAP中创建 SVM</block>
  <block id="31cd969d7cf1970993d449ccccaeddfe" category="paragraph">要在ONTAP中创建 SVM，请完成以下步骤：</block>
  <block id="b1c04b7e96694453a1307ecc81208ae5" category="list-text">登录ONTAP系统管理器，导航到“存储”&gt;“存储虚拟机”，然后单击“添加”。</block>
  <block id="70d94c82da2765251783d499556773b7" category="list-text">输入 SVM 的名称，启用 iSCSI 协议，然后提供数据 LIF 的详细信息。</block>
  <block id="9305b9f7555d613129963713b0c214e6" category="inline-image-macro">iSCSI SVM 数据 LIF</block>
  <block id="3a0dcb6f7ae7e98cd4c0dc0377d379db" category="paragraph"><block ref="3a0dcb6f7ae7e98cd4c0dc0377d379db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9edece6d4cf48c209a5fe7da61f0ecb" category="list-text">输入 SVM 管理帐户的详细信息，然后单击“保存”。</block>
  <block id="2b44a7a64e9a3efc0b4e423d6339aaa7" category="inline-image-macro">iSCSI SVM 管理</block>
  <block id="3a282c7f23ef48021ba2d883b8be673b" category="paragraph"><block ref="3a282c7f23ef48021ba2d883b8be673b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f61c0f70e825557a7be7fe0ac432bdf7" category="list-text">要将聚合分配给 SVM，请导航到“存储”&gt;“存储虚拟机”，单击新创建的 SVM 旁边的省略号，然后单击“编辑”。选中“限制卷创建到首选本地层”复选框，并将所需的聚合附加到该复选框。</block>
  <block id="85c5adc69f6da0ebb2ebf365c4211508" category="inline-image-macro">SVM聚合分配</block>
  <block id="0eb036df6e8abe29710a3e752388b0be" category="paragraph"><block ref="0eb036df6e8abe29710a3e752388b0be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03c8ff4111bb9cfc032f786c9bd7c6e8" category="section-title">创建后端和存储类</block>
  <block id="e15177ebae9bfb9adab94a9ccf5f2e96" category="list-text">对于提供 NFS 服务的NetApp ONTAP系统，请在跳转主机上创建后端配置文件，其中包含 backendName、managementLIF、dataLIF、svm、用户名、密码和其他详细信息。</block>
  <block id="c75cfbdcbbe9d48dc121fc816d4a2ccf" category="list-text">通过运行以下命令创建Trident后端。</block>
  <block id="74ede5d2e56e369e9eda54f4095292f5" category="list-text">创建后端后，接下来必须创建存储类。以下示例存储类定义突出显示了必需字段和基本字段。参数<block ref="55b56fb238360663afa6230ad82e74a0" prefix=" " category="inline-code"></block>应该反映新创建的Trident后端的存储驱动程序。还要注意名称字段值，该值必须在后续步骤中引用。</block>
  <block id="cf2c5963ca8332d4f43e6c3a955da4da" category="admonition">有一个可选字段称为<block ref="7cfbb6f07899c8071ff38e69dca190e2" prefix=" " category="inline-code"></block>这是在这个文件中定义的。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（XFS、ext4 等），或者可以删除此值以允许 Tanzu Kubernetes 集群决定使用哪种文件系统。</block>
  <block id="0286d73690ed0ef54af06bd9175945cd" category="list-text">通过运行 kubectl 命令创建存储类。</block>
  <block id="8d8b689e86dbd34b31294b3f829db499" category="list-text">创建存储类后，您必须创建第一个持久卷声明 (PVC)。下面给出了一个 PVC 定义示例。确保<block ref="ee822781a3bd0ae0f8f6331dc4865d9c" prefix=" " category="inline-code"></block>字段与刚刚创建的存储类的名称匹配。  PVC 定义可以根据需要配置的工作负载进一步定制。</block>
  <block id="c764ff1d25a2f9241afec7161127f74d" category="list-text">通过发出 kubectl 命令创建 PVC。创建可能需要一些时间，具体取决于所创建的备份卷的大小，因此您可以在创建完成时观察该过程。</block>
  <block id="fa6f7af807ffa3ac6e2efb5c31463a4f" category="paragraph">要通过 NFS 实现Trident与NetApp ONTAP存储系统的集成，您必须创建一个能够与存储系统通信的后端。我们在此解决方案中配置了一个基本的后端，但如果您正在寻找更多自定义选项，请访问文档<block ref="f72d871ae286e7b7cf7d9ea12426661a" category="inline-link-macro-rx"></block>。</block>
  <block id="f53bd08113ff367a9bcd470b70a036d8" category="list-text">输入 SVM 的名称，启用 NFS 协议，选中允许 NFS 客户端访问复选框，并在导出策略规则中添加工作节点所在的子网，以允许将卷作为 PV 挂载到工作负载集群中。</block>
  <block id="0cdb2a8f015b7a7d81ab5c3d73de88a5" category="inline-image-macro">使用 NFS 创建 SVM</block>
  <block id="0e439987dbbd5cdf7a259d858b733fb5" category="paragraph"><block ref="0e439987dbbd5cdf7a259d858b733fb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e570ad3092406b5118fcd78a9374e048" category="admonition">如果您使用 NSX-T 的 NAT 部署用户集群或工作负载集群，则需要将出口子网（对于 TKGS0 而言）或浮动 IP 子网（对于 TKGI 而言）添加到导出策略规则中。</block>
  <block id="8f254daa71e82320e11e55258b095b00" category="list-text">提供数据 LIF 的详细信息和 SVM 管理帐户的详细信息，然后单击“保存”。</block>
  <block id="02ffb816541fbf18a204c877564fb92e" category="inline-image-macro">SVM 数据 LIF 和 SVM 管理</block>
  <block id="06cc454005d6e09b6aa8c6816b293e73" category="paragraph"><block ref="06cc454005d6e09b6aa8c6816b293e73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="491df82049a4ac2d8b8b2fe6b773d65d" category="list-text">将聚合分配给 SVM。导航到“存储”&gt;“存储虚拟机”，单击新创建的 SVM 旁边的省略号，然后单击“编辑”。选中“限制卷创建到首选本地层”复选框并将所需的聚合附加到该复选框。</block>
  <block id="d0c0f45aef081aad9098fd68b293824e" category="paragraph"><block ref="d0c0f45aef081aad9098fd68b293824e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95fdf7e31ffa1073f8c42359589c334e" category="list-text">如果要安装Trident的用户或工作负载集群采用 NAT 部署，则由于 SNAT，存储挂载请求可能会从非标准端口到达。默认情况下， ONTAP仅允许来自根端口的卷挂载请求。因此，登录ONTAP CLI 并修改设置以允许来自非标准端口的挂载请求。</block>
  <block id="ad2008cda12d454189828df19b2f9742" category="list-text">创建后端后，接下来必须创建存储类。以下示例存储类定义突出显示了必需字段和基本字段。参数<block ref="55b56fb238360663afa6230ad82e74a0" prefix=" " category="inline-code"></block>应该反映新创建的Trident后端的存储驱动程序。</block>
  <block id="34ea8ef199c59f90c815aa0dd2bc6fd6" category="summary">演示本文档中记录的一些功能。</block>
  <block id="27619261561b45c6dad352a91cdae06e" category="doc">观看有关 Anthos 与NetApp合作的视频</block>
  <block id="4c57bd0d34bd5f3e139a2dd80505a84e" category="paragraph">通过精选的视频和演示，探索NetApp与 Google Anthos 的主要功能和部署场景。这些资源展示了最佳实践、集成步骤和实际用例。</block>
  <block id="4ccf3ae7bb3d8838f325717cd35d1dfd" category="section-title">裸机上的 Anthos 部署和设置</block>
  <block id="89b38443846cc99ba1113890e7270acc" category="video-title">在裸机上部署 Anthos - Anthos 与NetApp合作</block>
  <block id="daaab4f89e6b91dc8ffb4fdf89e47081" category="section-title">Anthos 上的Trident部署和设置</block>
  <block id="986f033962d58171ac0c17b40b399faa" category="video-title">在 Anthos 1.14 集群上部署Trident</block>
  <block id="f97a2ba852f10a885c65ef482f17b6aa" category="doc">观看有关 Red Hat OpenShift 与NetApp 的视频</block>
  <block id="e54e8dbc73d626c0aaf7a69ca95da1c7" category="paragraph">通过一系列视频探索 Red Hat OpenShift 与NetApp的集成，这些视频演示了灾难恢复、虚拟机保护、存储管理以及使用Trident和 Ansible 的自动化等关键功能。</block>
  <block id="5f3bea6f8bc9cc87c687e620901ed154" category="section-title">灾难恢复和数据保护</block>
  <block id="14aef6a2e48da70f33e219a771d4aa3e" category="video-title">使用Trident Protect 进行虚拟机灾难恢复</block>
  <block id="e0da49b5df3487900e358f73e4c78a73" category="video-title">使用Trident Protect 保护虚拟机</block>
  <block id="a85a32282b2e3fdd418e3251483f172d" category="video-title">使用Trident的高级数据管理功能对 OpenShift VM 进行故障转移/故障恢复（仅提供早期访问程序）</block>
  <block id="1370341e126c18547913cbfd911a6ab8" category="section-title">OpenShift 虚拟化和 VM 管理</block>
  <block id="1fd6120f233d6d8be5481ea6bcbdb646" category="video-title">使用 iSCSI 存储在 OpenShift Virtualization 中创建 VM</block>
  <block id="6771541141e5915f17a20a6760780a0d" category="video-title">使用ONTAP SAN（iSCSI）存储类在 OpenShift 虚拟化中部署新虚拟机</block>
  <block id="160569b817ed2a17a8d2b23c2bc20b8d" category="video-title">使用 OpenShift 虚拟化部署虚拟机 - Red Hat OpenShift 与NetApp</block>
  <block id="05c17630778983e447b6370533d21bce" category="video-title">使用Amazon FSx for NetApp ONTAP在 ROSA 上的 OpenShift 虚拟化中实时迁移虚拟机</block>
  <block id="1a77203f1aab519882f2e846b9d9b719" category="video-title">使用 Red Hat MTV 将虚拟机迁移到带有NetApp ONTAP存储的 OpenShift 虚拟化</block>
  <block id="0308f182e68fef9b68dd1683d1bf1e96" category="video-title">工作负载迁移 - Red Hat OpenShift 与NetApp</block>
  <block id="f572afcba8a95128ddd328e44a23a189" category="video-title">安装 OpenShift 虚拟化 - Red Hat OpenShift 与NetApp</block>
  <block id="e110e2333a8febc7917146824eb919fd" category="video-title">适用于 Red Hat 虚拟化上的 Red Hat OpenShift 的NetApp HCI</block>
  <block id="4c9fa62158545d2793dcf18d7f24353c" category="section-title">应用程序部署和存储</block>
  <block id="c636e83e557395cd7de62e9306bafd01" category="video-title">使用ONTAP NAS 存储类部署 postgresql 容器应用程序</block>
  <block id="ab98c7b38a5a6431e4ec0050bafac980" category="section-title">自动化与集成</block>
  <block id="c403d01ff536a70cb8d31b064fbbd59c" category="video-title">Ansible 自动化部署Trident并在 OpenShift 集群上创建存储类</block>
  <block id="fd934cb2f55bec946103e4f90ff84691" category="video-title">Cloud Insights与 Openshift Virtualization 集成</block>
  <block id="9288a4df569f8cbeebc3a4aa9cef9cf4" category="inline-link-macro">使用 Ansible 安装NetApp Trident、StorageClasses 和 Backend 的剧本可以在 github 中找到。</block>
  <block id="ec765b62758379ce6dcc1dc7ff0258bc" category="paragraph">**GitHub 中的 Ansible 示例代码**<block ref="df3073ceed8f3ce793912644c2d5a488" category="inline-link-macro-rx"></block></block>
  <block id="e6b62a38cb04c5bd5e6dc934c39d11bf" category="section-title">云和混合集成</block>
  <block id="c9e349766e4968ee277d240ff7b169e6" category="video-title">使用 OpenShift 虚拟化部署虚拟机 - Red Hat OpenShift 与NetApp</block>
  <block id="71417a3dd01aa388d35bf54aa4c401fa" category="summary">此页面包含视频链接，演示了本文档中描述的一些功能。</block>
  <block id="19c086b7a4d878ee4cb367a052e05beb" category="doc">观看有关 VMware Tanzu 与NetApp合作的视频</block>
  <block id="573dbf062a71298ebe08dc9251428738" category="paragraph">通过一系列视频探索 VMware Tanzu 与NetApp的集成，这些视频演示了持久存储配置、应用程序克隆和使用Trident 的数据保护等关键功能。</block>
  <block id="51d0dd539358548f8d26d0b978f65539" category="admonition">这些演示是使用 TKG 1.3.1 版本和Trident Protect 21.12 版本录制的技术预览版。请参阅支持矩阵以了解官方支持的版本。</block>
  <block id="d064bf8df43cbf9dd106ab99d45f3cd8" category="section-title">持久存储配置</block>
  <block id="3f9db654808cbd9588d5eb00104fe0e4" category="video-title">使用Trident在 VMware Tanzu 中配置持久存储 - VMware Tanzu 与NetApp</block>
  <block id="ed93b88d3cbf5bf6bf5bd75716682e15" category="section-title">应用程序克隆和数据保护</block>
  <block id="a2fcb579cb08f140ede4cd4024b29e9f" category="video-title">使用Trident Protect 在 VMWare Tanzu 中克隆应用程序 - VMware Tanzu 与NetApp</block>
  <block id="1ff76fb7d3302370628b1ccc6226b6a5" category="summary">NetApp容器解决方案附件的最新变更日志。</block>
  <block id="fb548f8c1b2df619579952261b15aaa1" category="doc">NetApp容器解决方案的新功能</block>
  <block id="7900a4657b5879f994050b5813a75ce6" category="paragraph">了解容器解决方案的新功能。</block>
  <block id="bab52961b58c502c7991d35556c25367" category="section-title">2025年8月18日</block>
  <block id="47e26e0d5bbeef43c544dd9ae72e66b0" category="inline-link-macro">NetApp解决方案系列</block>
  <block id="840125a006aee7dc0e8efd313e7b614e" category="paragraph">NetApp解决方案网站现在是<block ref="f083b096ae581e72c5ab727ef8bd5732" category="inline-link-macro-rx"></block>，其中包括以下网站：</block>
  <block id="e87298059f60b0844dc971f315184cf5" category="inline-link-macro">NetApp人工智能解决方案</block>
  <block id="ac42ca0e1f789a8367b40d9824726778" category="list-text"><block ref="ac42ca0e1f789a8367b40d9824726778" category="inline-link-macro-rx"></block></block>
  <block id="9cae574c1dc1ca50a949c1e889637ba7" category="list-text">NetApp容器解决方案</block>
  <block id="3947417923606d3599bcba7a82f71f1b" category="inline-link-macro">NetApp数据管理解决方案</block>
  <block id="56c054d4bb919790ebe189f7a7d11c3c" category="list-text"><block ref="56c054d4bb919790ebe189f7a7d11c3c" category="inline-link-macro-rx"></block></block>
  <block id="9bb3e58246c5654a6d8e08a7bddd60ec" category="inline-link-macro">NetApp数据库解决方案</block>
  <block id="3e2420ab1ec1d6e02b32b017d3ba969a" category="list-text"><block ref="3e2420ab1ec1d6e02b32b017d3ba969a" category="inline-link-macro-rx"></block></block>
  <block id="a37049a2a78422ac5627c7987db5c337" category="inline-link-macro">NetApp公共云和混合云解决方案</block>
  <block id="144417321224efbf0afc2ae665a84a46" category="list-text"><block ref="144417321224efbf0afc2ae665a84a46" category="inline-link-macro-rx"></block></block>
  <block id="2729aba3baa90aaaed37b282e515f6e4" category="inline-link-macro">适用于 SAP 的NetApp解决方案</block>
  <block id="5e056430559fb77ac659dbb71ecce256" category="list-text"><block ref="5e056430559fb77ac659dbb71ecce256" category="inline-link-macro-rx"></block></block>
  <block id="4ead908c2ca3b4c7156e0e703642415d" category="inline-link-macro">NetApp虚拟化解决方案</block>
  <block id="3100186c9f62cec85ac05309c5d10217" category="list-text"><block ref="3100186c9f62cec85ac05309c5d10217" category="inline-link-macro-rx"></block></block>
  <block id="a14474dbd054111be339c0985fc9a679" category="sidebar">NetApp容器解决方案是经过验证的许多流行的基于 Kubernetes 的容器编排器的部署及其与NetApp存储管理系统和软件的集成。</block>
  <block id="ef55276f0238c6b1a3f893bc026b5644" category="sidebar">NetApp容器解决方案是经过验证的许多流行的基于 Kubernetes 的容器编排器的部署及其与NetApp存储管理系统和软件的集成。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">开始使用</block>
  <block id="33871b6190a8d5adbe8b15282054766c" category="sidebar">什么是新的</block>
  <block id="3beb4861bd4493a3bf12353ac6ae3ded" category="sidebar">了解适用于容器的NetApp Trident</block>
  <block id="d6b9ea32b921a9f56de32062ba4b94f3" category="sidebar">博客</block>
  <block id="de42653a3a04e4aefa258105632011d4" category="sidebar">视频和演示</block>
  <block id="e2ed9dce9d5bb40e79fc6d3008de22ff" category="sidebar">Anthos 与NetApp合作</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="sidebar">解决方案概述</block>
  <block id="f9468c81b3d59ac0030570c4f58e95f1" category="sidebar">用例</block>
  <block id="c232cfc0ae9806d3ad6d34a51df58229" category="sidebar">Red Hat OpenShift 与NetApp</block>
  <block id="1758083ef63bb4ae8b59ef124a858366" category="sidebar">关于 Red Hat OpenShift</block>
  <block id="9bcb78f243173b51be948352a4456070" category="sidebar">关于 AWS 上的 OpenShift</block>
  <block id="1722f248c3b6574ad844b53f30ac236c" category="sidebar">VMware Tanzu 与NetApp</block>
  <block id="6d1f29cc35a6c00cd340f77f69cdd538" category="sidebar">关于 VMware Tanzu</block>
  <block id="0906b68b3611de6c610f9203cb79845d" category="sidebar">合作伙伴解决方案</block>
  <block id="608fd0ec5cdb56ad3d3e6d9595ec6f19" category="sidebar">Anthos 网站</block>
  <block id="4f08bd7fd1651ff7d7a087a393044ace" category="sidebar">Red Hat OpenShift 网站</block>
  <block id="1dbfd92530de9ca821817f92dca04cbb" category="sidebar">VMware Tanzu 网站</block>
  <block id="e95b75f557af9310f3d9c6299286a533" category="sidebar">解决方案请求和反馈</block>
  <block id="22d04ecae9fae88d0b8d4548a46a545b" category="sidebar">请求自动化</block>
  <block id="776ab15fef436c9315c14738509d299e" category="sidebar">提出新的解决方案</block>
  <block id="cfdaac8ef24ac5b2612570c34da00954" category="sidebar">提供解决方案反馈</block>
  <block id="1148d6bcb0d421cca0d8fae58b1afd7b" category="sidebar">探索 NetApp 的综合视频库，展示跨 Anthos、OpenShift 和 VMware Tanzu 平台的容器解决方案。每个集合都侧重于特定的用例和集成场景。</block>
  <block id="bc436006a66168dc26ba4aaa56259fc4" category="sidebar">观看有关使用NetApp 的容器的视频和演示</block>
  <block id="9b43113f4ddf8646d9d3550adc52d9cc" category="sidebar">一系列视频和演示讨论了 NetApp 众多容器解决方案的功能</block>
  <block id="57e5461f846280ec63710c1932950345" category="sidebar">Anthos 部署和设置</block>
  <block id="7598fa17e487d462cc4c58c4f4edc666" category="sidebar">Trident部署和设置</block>
  <block id="ae05797d002b77737a10ce3d62b7521d" category="sidebar">容器解决方案</block>
  <block id="554cfab3938e21d9270bd6b75931f96f" category="sidebar">视频</block>
  <block id="6015fcf0a9cd608ed0e3aa71296f41d4" category="sidebar">VMware Tanzu</block>
  <block id="65002e037ae0f2ae1b3677530fc669d8" category="sidebar">了解 Anthos</block>
  <block id="ca76b01854045afd9b2809e7bcc687f8" category="sidebar">Anthos 概览</block>
  <block id="aff9a6321d1ed0024673788596604472" category="sidebar">NetApp存储集成概述</block>
  <block id="10918e6d6b467ead62e231572756b997" category="sidebar">NetApp Trident概述</block>
  <block id="9345c0974c905f3596d841f244c22e5d" category="sidebar">关于高级配置选项</block>
  <block id="c75fbfce0df55a295dd56b886d37911e" category="sidebar">探索负载均衡器选项</block>
  <block id="be104e488c8f33c89311c1e663fe2fc9" category="sidebar">关于负载平衡器选项</block>
  <block id="494c2eed2603622becf6572708a95792" category="sidebar">安装 F5 BIG-IP 负载均衡器</block>
  <block id="42431abbf41572fb3a742e2224103321" category="sidebar">安装 MetalLB 负载均衡器</block>
  <block id="de02c3a4f8f11d5389014a1c339819e3" category="sidebar">安装 SeeSaw 负载均衡器</block>
  <block id="b67ebd5055f44472bc8cc303b27348ab" category="sidebar">解决方案验证和用例</block>
  <block id="d5fa78be95ea5725d94d99c1c3256b64" category="sidebar">将应用部署到 Anthos 集群</block>
  <block id="0f68b904e33d9ac04605aecc958bcf52" category="sidebar">追加信息</block>
  <block id="8c0e1e9d7a2f970b214d619b5fa0be13" category="sidebar">红帽 OpenShift</block>
  <block id="a538d4259ee82a61664e8ada23312723" category="sidebar">Openshift 概述</block>
  <block id="a6a1645c28213b20c97824fbabb75d40" category="sidebar">裸机上的 OpenShift</block>
  <block id="851356a71afbb03afddb87a2cc236dfa" category="sidebar">Red Hat OpenStack 上的 OpenShift</block>
  <block id="d274b30da0a80eb8fef4041be8dc61cb" category="sidebar">AWS 上的 OpenShift</block>
  <block id="e8702ba57ee337d95935bdfe835583a3" category="sidebar">安装 MetalLB 负载均衡器</block>
  <block id="833985b983ff7df9c79b80582559ca3d" category="sidebar">安装 F5 BIG-IP 负载均衡器</block>
  <block id="0f78dfd96e58728c792d5da431682fa2" category="sidebar">创建私有镜像仓库</block>
  <block id="c62cd9d117c8f05ed30e61fdac1fd3c2" category="sidebar">验证和用例概述</block>
  <block id="155cec080f89e880c1455f720f539ad1" category="sidebar">使用持久存储部署 Jenkins CI/CD 管道</block>
  <block id="23c55d3f2cb16ab386974fba42bbb268" category="sidebar">配置多租户</block>
  <block id="41b8bf9258cb177b1e65b4140af230fa" category="sidebar">关于配置多租户</block>
  <block id="282155126a94a0702cfd80daf38d4362" category="sidebar">配置概述</block>
  <block id="7984cdcb84b94f3ec5af3c2aa0bc9f9c" category="sidebar">配置前提条件</block>
  <block id="9128ba91c39e3e8f2e38f4b8e1f68158" category="sidebar">集群管理员任务</block>
  <block id="23eebb1148810d58d22f0f1dde752583" category="sidebar">存储管理员任务</block>
  <block id="bc967dc2d57e6eff184a821bf7577a80" category="sidebar">缩放</block>
  <block id="fe85f2b34449ea90dbe48fd5910fe08c" category="sidebar">Kubernetes 的高级集群管理</block>
  <block id="473de3786e8c237f46d47486bfafec79" category="sidebar">关于 ACM for Kubernetes</block>
  <block id="8d75b4b5f32c5f99a16eb75780f51c78" category="sidebar">为 Kubernetes 部署 ACM</block>
  <block id="d6bf2b10101446c7afd28ff94926fc44" category="sidebar">通过操作员部署</block>
  <block id="c0fb0083e5136a2c72891f49a3e6ceb4" category="sidebar">集群生命周期管理</block>
  <block id="e4ae510b1e81812b0dae0bebf4231fe7" category="sidebar">创建资源</block>
  <block id="384020c4d4a2b25e93d0325c98b23380" category="sidebar">使用Trident Protect 进行数据保护</block>
  <block id="da473976b9cde07503715dadcfbf21d9" category="sidebar">使用第三方工具进行数据保护</block>
  <block id="092bf78f9c97ba171b8232ddff585392" category="sidebar">追加信息</block>
  <block id="bdede1d84f059aba6c8c7f443f0dcf8a" category="sidebar">使用 FSxN 在 AWS 上提供 Red Hat OpenShift 服务</block>
  <block id="5e21330fc0890f55a17acc561df2e1f0" category="sidebar">AWS 上的 OpenShift 服务工作流程</block>
  <block id="aca07c605f2ab09ae67306aeaf2d51a7" category="sidebar">VMware Tanzu 产品组合</block>
  <block id="f60552c130312d00e2350a8a5f21c79f" category="sidebar">Tanzu Kubernetes 网格服务</block>
  <block id="917f58d29c572d69948f57b81064c187" category="sidebar">Tanzu Kubernetes Grid集成版</block>
  <block id="d3f65d629f805f1540f1e23b1a764393" category="sidebar">VMware vSphere 与 Tanzu</block>
</blocks>
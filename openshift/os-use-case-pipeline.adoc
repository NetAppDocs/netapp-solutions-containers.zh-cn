---
sidebar: sidebar 
permalink: openshift/os-use-case-pipeline.html 
keywords: CI/CD, Continuous integration, continuous deployment, Jenkins, PVC 
summary: 本节提供使用 Jenkins 部署持续集成和持续交付或部署管道的步骤，以验证解决方案的运行。 
---
= 使用持久存储部署 Jenkins CI/CD 管道：Red Hat OpenShift 与NetApp
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
本节提供使用 Jenkins 部署持续集成/持续交付或部署 (CI/CD) 管道以验证解决方案运行的步骤。



== 创建Jenkins部署所需的资源

要创建部署 Jenkins 应用程序所需的资源，请完成以下步骤：

. 创建一个名为 Jenkins 的新项目。
+
image:redhat-openshift-015.png["该图显示输入/输出对话框或表示书面内容"]

. 在这个例子中，我们部署了具有持久存储的 Jenkins。为了支持 Jenkins 构建，请创建 PVC。导航到存储 > 持久卷声明，然后单击创建持久卷声明。选择刚刚创建的存储类，确保持久卷声明名称为jenkins，选择合适的大小和访问模式，然后单击创建。


image:redhat-openshift-016.png["该图显示输入/输出对话框或表示书面内容"]



== 使用持久存储部署 Jenkins

要使用持久存储部署 Jenkins，请完成以下步骤：

. 在左上角，将角色从管理员更改为开发人员。单击 +添加并选择来自目录。在按关键字过滤栏中，搜索 jenkins。选择具有持久存储的 Jenkins 服务。
+
image:redhat-openshift-017.png["该图显示输入/输出对话框或表示书面内容"]

. 点击 `Instantiate Template`。
+
image:redhat-openshift-018.png["该图显示输入/输出对话框或表示书面内容"]

. 默认情况下，会填充 Jenkins 应用程序的详细信息。根据您的需求，修改参数并单击“创建”。此过程创建了在 OpenShift 上支持 Jenkins 所需的所有资源。
+
image:redhat-openshift-019.png["该图显示输入/输出对话框或表示书面内容"]

. Jenkins pod 大约需要 10 到 12 分钟才能进入就绪状态。
+
image:redhat-openshift-020.png["该图显示输入/输出对话框或表示书面内容"]

. 实例化 Pod 后，导航至“网络”>“路由”。要打开 Jenkins 网页，请单击为 jenkins 路由提供的 URL。
+
image:redhat-openshift-021.png["该图显示输入/输出对话框或表示书面内容"]

. 由于在创建 Jenkins 应用程序时使用了 OpenShift OAuth，因此请单击使用 OpenShift 登录。
+
image:redhat-openshift-022.png["该图显示输入/输出对话框或表示书面内容"]

. 授权 Jenkins 服务帐户访问 OpenShift 用户。
+
image:redhat-openshift-023.png["该图显示输入/输出对话框或表示书面内容"]

. 将显示 Jenkins 欢迎页面。因为我们使用的是 Maven 构建，所以请先完成 Maven 安装。导航到“管理 Jenkins”>“全局工具配置”，然后在“Maven”子标题中单击“添加 Maven”。输入您选择的名称并确保选择了“自动安装”选项。单击“Save”。
+
image:redhat-openshift-024.png["该图显示输入/输出对话框或表示书面内容"]

. 您现在可以创建一个管道来演示 CI/CD 工作流程。在主页上，单击左侧菜单中的“创建新作业”或“新项目”。
+
image:redhat-openshift-025.png["该图显示输入/输出对话框或表示书面内容"]

. 在创建项目页面上，输入您选择的名称，选择管道，然后单击确定。
+
image:redhat-openshift-026.png["该图显示输入/输出对话框或表示书面内容"]

. 选择管道选项卡。从尝试示例管道下拉菜单中，选择 Github + Maven。代码会自动填充。单击“Save”。
+
image:redhat-openshift-027.png["该图显示输入/输出对话框或表示书面内容"]

. 单击“立即构建”以通过准备、构建和测试阶段触发开发。完成整个构建过程并显示构建结果可能需要几分钟。
+
image:redhat-openshift-028.png["该图显示输入/输出对话框或表示书面内容"]

. 每当代码发生任何变化时，都可以重建管道来修补新版本的软件，从而实现持续集成和持续交付。单击“最近更改”可跟踪自上一版本以来的更改。
+
image:redhat-openshift-029.png["该图显示输入/输出对话框或表示书面内容"]


